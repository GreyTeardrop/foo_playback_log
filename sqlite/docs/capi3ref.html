<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<title>C/C++ Interface For SQLite Version 3</title>
<style type="text/css">
body {
    margin: auto;
    font-family: "Verdana" "sans-serif";
    padding: 8px 1%;
}

a { color: #45735f }
a:visited { color: #734559 }

.logo { position:absolute; margin:3px; }
.tagline {
  float:right;
  text-align:right;
  font-style:italic;
  width:240px;
  margin:12px;
  margin-top:58px;
}

.toolbar {
  font-variant: small-caps;
  text-align: center;
  line-height: 1.6em;
  margin: 0;
  padding:1px 8px;
}
.toolbar a { color: white; text-decoration: none; padding: 6px 12px; }
.toolbar a:visited { color: white; }
.toolbar a:hover { color: #80a796; background: white; }

.content    { margin: 5%; }
.content dt { font-weight:bold; }
.content dd { margin-bottom: 25px; margin-left:20%; }
.content ul { padding:0px; padding-left: 15px; margin:0px; }

/* rounded corners */
.se  { background: url(images/se.png) 100% 100% no-repeat #80a796}
.sw  { background: url(images/sw.png) 0% 100% no-repeat }
.ne  { background: url(images/ne.png) 100% 0% no-repeat }
.nw  { background: url(images/nw.png) 0% 0% no-repeat }

</style>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  
</head>
<body>
<div><!-- container div to satisfy validator -->

<a href="index.html">
<img class="logo" src="images/SQLite.gif" alt="SQLite Logo"
 border="0"></a>
<div><!-- IE hack to prevent disappearing logo--></div>
<div class="tagline">Small. Fast. Reliable.<br>Choose any three.</div>

<table width=100% style="clear:both"><tr><td>
  <div class="se"><div class="sw"><div class="ne"><div class="nw">
  <div class="toolbar">
    <a href="about.html">About</a>
    <a href="sitemap.html">Sitemap</a>
    <a href="docs.html">Documentation</a>
    <a href="download.html">Download</a>
    <a href="copyright.html">License</a>
    <a href="news.html">News</a>
    <a href="http://www.sqlite.org/cvstrac/index">Developers</a>
    <a href="support.html">Support</a>
  </div></div></div></div></div>
</td></tr></table>
  


<h2 class=pdf_section>C/C++ Interface For SQLite Version 3</h2>




<p>This page defined the C-language interface to SQLite.
This page is intended as a reference to what SQLite
is suppose to do.  This is not a tutorial.  This
page is designed to be precise, not easy to read.</p>

<p>This page contains all C-language interface information
in a single HTML file.  The same information is also
available broken out into 
<a href="c3ref/intro.html">lots of small pages</a>
for easier viewing, if you prefer.</p>

<p>This document is created by a script which scans comments
in the source code files.</p>

<hr>


<h2>Objects:</h2>
<table width="100%" cellpadding="5"><tr>
<td valign="top"><ul>
<li>
<a href="#sqlite3">sqlite3</a></li>
<li>
<a href="#sqlite3_int64">sqlite3_int64</a></li>
<li>
<a href="#sqlite3_int64">sqlite3_uint64</a></li>
<li>
<a href="#sqlite3_int64">sqlite_int64</a></li>
<li>
<a href="#sqlite3_int64">sqlite_uint64</a></li>
</ul></td>
<td valign="top"><ul>
<li>
<a href="#sqlite3_file">sqlite3_file</a></li>
<li>
<a href="#sqlite3_io_methods">sqlite3_io_methods</a></li>
<li>
<a href="#sqlite3_mutex">sqlite3_mutex</a></li>
<li>
<a href="#sqlite3_vfs">sqlite3_vfs</a></li>
<li>
<a href="#sqlite3_stmt">sqlite3_stmt</a></li>
</ul></td>
<td valign="top"><ul>
<li>
<a href="#sqlite3_value">sqlite3_value</a></li>
<li>
<a href="#sqlite3_context">sqlite3_context</a></li>
<li>
<a href="#sqlite3_temp_directory">sqlite3_temp_directory</a></li>
<li>
<a href="#sqlite3_blob">sqlite3_blob</a></li>
</ul></td>
</tr></table>
<hr>
<h2>Constants:</h2>
<table width="100%" cellpadding="5"><tr>
<td valign="top"><ul>
<li>
<a href="#SQLITE_ABORT">SQLITE_ABORT</a></li>
<li>
<a href="#SQLITE_ACCESS_EXISTS">SQLITE_ACCESS_EXISTS</a></li>
<li>
<a href="#SQLITE_ACCESS_EXISTS">SQLITE_ACCESS_READ</a></li>
<li>
<a href="#SQLITE_ACCESS_EXISTS">SQLITE_ACCESS_READWRITE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_ALTER_TABLE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_ANALYZE</a></li>
<li>
<a href="#SQLITE_ANY">SQLITE_ANY</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_ATTACH</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_AUTH</a></li>
<li>
<a href="#SQLITE_BLOB">SQLITE_BLOB</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_BUSY</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_CANTOPEN</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_CONSTRAINT</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_COPY</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_CORRUPT</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_INDEX</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_TABLE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_TEMP_INDEX</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_TEMP_TABLE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_TEMP_TRIGGER</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_TEMP_VIEW</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_TRIGGER</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_VIEW</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_CREATE_VTABLE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DELETE</a></li>
<li>
<a href="#SQLITE_DENY">SQLITE_DENY</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DETACH</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_DONE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_INDEX</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_TABLE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_TEMP_INDEX</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_TEMP_TABLE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_TEMP_TRIGGER</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_TEMP_VIEW</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_TRIGGER</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_VIEW</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_DROP_VTABLE</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_EMPTY</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_ERROR</a></li>
<li>
<a href="#SQLITE_FCNTL_LOCKSTATE">SQLITE_FCNTL_LOCKSTATE</a></li>
<li>
<a href="#SQLITE_BLOB">SQLITE_FLOAT</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_FORMAT</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_FULL</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_FUNCTION</a></li>
<li>
<a href="#SQLITE_DENY">SQLITE_IGNORE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_INSERT</a></li>
<li>
<a href="#SQLITE_BLOB">SQLITE_INTEGER</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_INTERNAL</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_INTERRUPT</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC16K</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC1K</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC2K</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC32K</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC4K</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC512</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC64K</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC8K</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_SAFE_APPEND</a></li>
<li>
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_SEQUENTIAL</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_IOERR</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_BLOCKED</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_DELETE</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_DIR_FSYNC</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_FSTAT</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_FSYNC</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_NOMEM</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_RDLOCK</a></li>
</ul></td>
<td valign="top"><ul>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_READ</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_SHORT_READ</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_TRUNCATE</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_UNLOCK</a></li>
<li>
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_WRITE</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_LOCKED</a></li>
<li>
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_EXCLUSIVE</a></li>
<li>
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_NONE</a></li>
<li>
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_PENDING</a></li>
<li>
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_RESERVED</a></li>
<li>
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_SHARED</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_MISMATCH</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_MISUSE</a></li>
<li>
<a href="#SQLITE_MUTEX_FAST">SQLITE_MUTEX_FAST</a></li>
<li>
<a href="#SQLITE_MUTEX_FAST">SQLITE_MUTEX_RECURSIVE</a></li>
<li>
<a href="#SQLITE_MUTEX_FAST">SQLITE_MUTEX_STATIC_LRU</a></li>
<li>
<a href="#SQLITE_MUTEX_FAST">SQLITE_MUTEX_STATIC_MASTER</a></li>
<li>
<a href="#SQLITE_MUTEX_FAST">SQLITE_MUTEX_STATIC_MEM</a></li>
<li>
<a href="#SQLITE_MUTEX_FAST">SQLITE_MUTEX_STATIC_MEM2</a></li>
<li>
<a href="#SQLITE_MUTEX_FAST">SQLITE_MUTEX_STATIC_PRNG</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_NOLFS</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_NOMEM</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_NOTADB</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_NOTFOUND</a></li>
<li>
<a href="#SQLITE_BLOB">SQLITE_NULL</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_OK</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_CREATE</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_DELETEONCLOSE</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_EXCLUSIVE</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_MAIN_DB</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_MAIN_JOURNAL</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_MASTER_JOURNAL</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READONLY</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READWRITE</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_SUBJOURNAL</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_TEMP_DB</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_TEMP_JOURNAL</a></li>
<li>
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_TRANSIENT_DB</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_PERM</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_PRAGMA</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_PROTOCOL</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_RANGE</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_READ</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_READONLY</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_REINDEX</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_ROW</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_SCHEMA</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_SELECT</a></li>
<li>
<a href="#SQLITE_STATIC">SQLITE_STATIC</a></li>
<li>
<a href="#SQLITE_SYNC_DATAONLY">SQLITE_SYNC_DATAONLY</a></li>
<li>
<a href="#SQLITE_SYNC_DATAONLY">SQLITE_SYNC_FULL</a></li>
<li>
<a href="#SQLITE_SYNC_DATAONLY">SQLITE_SYNC_NORMAL</a></li>
<li>
<a href="#SQLITE_TESTCTRL_FAULT_BENIGN_FAILURES">SQLITE_TESTCTRL_FAULT_BENIGN_FAILURES</a></li>
<li>
<a href="#SQLITE_TESTCTRL_FAULT_BENIGN_FAILURES">SQLITE_TESTCTRL_FAULT_CONFIG</a></li>
<li>
<a href="#SQLITE_TESTCTRL_FAULT_BENIGN_FAILURES">SQLITE_TESTCTRL_FAULT_FAILURES</a></li>
<li>
<a href="#SQLITE_TESTCTRL_FAULT_BENIGN_FAILURES">SQLITE_TESTCTRL_FAULT_PENDING</a></li>
<li>
<a href="#SQLITE_BLOB">SQLITE_TEXT</a></li>
<li>
<a href="#SQLITE_ABORT">SQLITE_TOOBIG</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_TRANSACTION</a></li>
<li>
<a href="#SQLITE_STATIC">SQLITE_TRANSIENT</a></li>
<li>
<a href="#SQLITE_ALTER_TABLE">SQLITE_UPDATE</a></li>
<li>
<a href="#SQLITE_ANY">SQLITE_UTF16</a></li>
<li>
<a href="#SQLITE_ANY">SQLITE_UTF16BE</a></li>
<li>
<a href="#SQLITE_ANY">SQLITE_UTF16LE</a></li>
<li>
<a href="#SQLITE_ANY">SQLITE_UTF16_ALIGNED</a></li>
<li>
<a href="#SQLITE_ANY">SQLITE_UTF8</a></li>
<li>
<a href="#SQLITE_VERSION">SQLITE_VERSION</a></li>
<li>
<a href="#SQLITE_VERSION">SQLITE_VERSION_NUMBER</a></li>
</ul></td>
</tr></table>
<hr>
<h2>Functions:</h2>
<table width="100%" cellpadding="5"><tr>
<td valign="top"><ul>
<li>
<a href="#sqlite3_aggregate_context">sqlite3_aggregate_context</a></li>
<li>
<a href="#sqlite3_aggregate_count">sqlite3_aggregate_count</a></li>
<li>
<a href="#sqlite3_auto_extension">sqlite3_auto_extension</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_blob</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_double</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_int</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_int64</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_null</a></li>
<li>
<a href="#sqlite3_bind_parameter_count">sqlite3_bind_parameter_count</a></li>
<li>
<a href="#sqlite3_bind_parameter_index">sqlite3_bind_parameter_index</a></li>
<li>
<a href="#sqlite3_bind_parameter_name">sqlite3_bind_parameter_name</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_text</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_text16</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_value</a></li>
<li>
<a href="#sqlite3_bind_blob">sqlite3_bind_zeroblob</a></li>
<li>
<a href="#sqlite3_blob_bytes">sqlite3_blob_bytes</a></li>
<li>
<a href="#sqlite3_blob_close">sqlite3_blob_close</a></li>
<li>
<a href="#sqlite3_blob_open">sqlite3_blob_open</a></li>
<li>
<a href="#sqlite3_blob_read">sqlite3_blob_read</a></li>
<li>
<a href="#sqlite3_blob_write">sqlite3_blob_write</a></li>
<li>
<a href="#sqlite3_busy_handler">sqlite3_busy_handler</a></li>
<li>
<a href="#sqlite3_busy_timeout">sqlite3_busy_timeout</a></li>
<li>
<a href="#sqlite3_changes">sqlite3_changes</a></li>
<li>
<a href="#sqlite3_clear_bindings">sqlite3_clear_bindings</a></li>
<li>
<a href="#sqlite3_close">sqlite3_close</a></li>
<li>
<a href="#sqlite3_collation_needed">sqlite3_collation_needed</a></li>
<li>
<a href="#sqlite3_collation_needed">sqlite3_collation_needed16</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_blob</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_bytes</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_bytes16</a></li>
<li>
<a href="#sqlite3_column_count">sqlite3_column_count</a></li>
<li>
<a href="#sqlite3_column_database_name">sqlite3_column_database_name</a></li>
<li>
<a href="#sqlite3_column_database_name">sqlite3_column_database_name16</a></li>
<li>
<a href="#sqlite3_column_decltype">sqlite3_column_decltype</a></li>
<li>
<a href="#sqlite3_column_decltype">sqlite3_column_decltype16</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_double</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_int</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_int64</a></li>
<li>
<a href="#sqlite3_column_name">sqlite3_column_name</a></li>
<li>
<a href="#sqlite3_column_name">sqlite3_column_name16</a></li>
<li>
<a href="#sqlite3_column_database_name">sqlite3_column_origin_name</a></li>
<li>
<a href="#sqlite3_column_database_name">sqlite3_column_origin_name16</a></li>
<li>
<a href="#sqlite3_column_database_name">sqlite3_column_table_name</a></li>
<li>
<a href="#sqlite3_column_database_name">sqlite3_column_table_name16</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_text</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_text16</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_type</a></li>
<li>
<a href="#sqlite3_column_blob">sqlite3_column_value</a></li>
<li>
<a href="#sqlite3_commit_hook">sqlite3_commit_hook</a></li>
<li>
<a href="#sqlite3_complete">sqlite3_complete</a></li>
<li>
<a href="#sqlite3_complete">sqlite3_complete16</a></li>
</ul></td>
<td valign="top"><ul>
<li>
<a href="#sqlite3_create_collation">sqlite3_create_collation</a></li>
<li>
<a href="#sqlite3_create_collation">sqlite3_create_collation16</a></li>
<li>
<a href="#sqlite3_create_collation">sqlite3_create_collation_v2</a></li>
<li>
<a href="#sqlite3_create_function">sqlite3_create_function</a></li>
<li>
<a href="#sqlite3_create_function">sqlite3_create_function16</a></li>
<li>
<a href="#sqlite3_data_count">sqlite3_data_count</a></li>
<li>
<a href="#sqlite3_db_handle">sqlite3_db_handle</a></li>
<li>
<a href="#sqlite3_enable_load_extension">sqlite3_enable_load_extension</a></li>
<li>
<a href="#sqlite3_enable_shared_cache">sqlite3_enable_shared_cache</a></li>
<li>
<a href="#sqlite3_errcode">sqlite3_errcode</a></li>
<li>
<a href="#sqlite3_errcode">sqlite3_errmsg</a></li>
<li>
<a href="#sqlite3_errcode">sqlite3_errmsg16</a></li>
<li>
<a href="#sqlite3_exec">sqlite3_exec</a></li>
<li>
<a href="#sqlite3_aggregate_count">sqlite3_expired</a></li>
<li>
<a href="#sqlite3_extended_result_codes">sqlite3_extended_result_codes</a></li>
<li>
<a href="#sqlite3_file_control">sqlite3_file_control</a></li>
<li>
<a href="#sqlite3_finalize">sqlite3_finalize</a></li>
<li>
<a href="#sqlite3_free">sqlite3_free</a></li>
<li>
<a href="#sqlite3_free_table">sqlite3_free_table</a></li>
<li>
<a href="#sqlite3_get_autocommit">sqlite3_get_autocommit</a></li>
<li>
<a href="#sqlite3_get_auxdata">sqlite3_get_auxdata</a></li>
<li>
<a href="#sqlite3_free_table">sqlite3_get_table</a></li>
<li>
<a href="#sqlite3_aggregate_count">sqlite3_global_recover</a></li>
<li>
<a href="#sqlite3_interrupt">sqlite3_interrupt</a></li>
<li>
<a href="#sqlite3_last_insert_rowid">sqlite3_last_insert_rowid</a></li>
<li>
<a href="#sqlite3_libversion">sqlite3_libversion</a></li>
<li>
<a href="#sqlite3_libversion">sqlite3_libversion_number</a></li>
<li>
<a href="#sqlite3_load_extension">sqlite3_load_extension</a></li>
<li>
<a href="#sqlite3_free">sqlite3_malloc</a></li>
<li>
<a href="#sqlite3_aggregate_count">sqlite3_memory_alarm</a></li>
<li>
<a href="#sqlite3_memory_highwater">sqlite3_memory_highwater</a></li>
<li>
<a href="#sqlite3_memory_highwater">sqlite3_memory_used</a></li>
<li>
<a href="#sqlite3_mprintf">sqlite3_mprintf</a></li>
<li>
<a href="#sqlite3_mutex_alloc">sqlite3_mutex_alloc</a></li>
<li>
<a href="#sqlite3_mutex_alloc">sqlite3_mutex_enter</a></li>
<li>
<a href="#sqlite3_mutex_alloc">sqlite3_mutex_free</a></li>
<li>
<a href="#sqlite3_mutex_held">sqlite3_mutex_held</a></li>
<li>
<a href="#sqlite3_mutex_alloc">sqlite3_mutex_leave</a></li>
<li>
<a href="#sqlite3_mutex_held">sqlite3_mutex_notheld</a></li>
<li>
<a href="#sqlite3_mutex_alloc">sqlite3_mutex_try</a></li>
<li>
<a href="#sqlite3_open">sqlite3_open</a></li>
<li>
<a href="#sqlite3_open">sqlite3_open16</a></li>
<li>
<a href="#sqlite3_open">sqlite3_open_v2</a></li>
<li>
<a href="#sqlite3_prepare">sqlite3_prepare</a></li>
<li>
<a href="#sqlite3_prepare">sqlite3_prepare16</a></li>
<li>
<a href="#sqlite3_prepare">sqlite3_prepare16_v2</a></li>
<li>
<a href="#sqlite3_prepare">sqlite3_prepare_v2</a></li>
<li>
<a href="#sqlite3_profile">sqlite3_profile</a></li>
<li>
<a href="#sqlite3_progress_handler">sqlite3_progress_handler</a></li>
<li>
<a href="#sqlite3_free">sqlite3_realloc</a></li>
<li>
<a href="#sqlite3_release_memory">sqlite3_release_memory</a></li>
</ul></td>
<td valign="top"><ul>
<li>
<a href="#sqlite3_reset">sqlite3_reset</a></li>
<li>
<a href="#sqlite3_reset_auto_extension">sqlite3_reset_auto_extension</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_blob</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_double</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_error</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_error16</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_error_code</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_error_nomem</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_error_toobig</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_int</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_int64</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_null</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_text</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_text16</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_text16be</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_text16le</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_value</a></li>
<li>
<a href="#sqlite3_result_blob">sqlite3_result_zeroblob</a></li>
<li>
<a href="#sqlite3_commit_hook">sqlite3_rollback_hook</a></li>
<li>
<a href="#sqlite3_set_authorizer">sqlite3_set_authorizer</a></li>
<li>
<a href="#sqlite3_get_auxdata">sqlite3_set_auxdata</a></li>
<li>
<a href="#sqlite3_sleep">sqlite3_sleep</a></li>
<li>
<a href="#sqlite3_mprintf">sqlite3_snprintf</a></li>
<li>
<a href="#sqlite3_soft_heap_limit">sqlite3_soft_heap_limit</a></li>
<li>
<a href="#sqlite3_step">sqlite3_step</a></li>
<li>
<a href="#sqlite3_table_column_metadata">sqlite3_table_column_metadata</a></li>
<li>
<a href="#sqlite3_test_control">sqlite3_test_control</a></li>
<li>
<a href="#sqlite3_aggregate_count">sqlite3_thread_cleanup</a></li>
<li>
<a href="#sqlite3_threadsafe">sqlite3_threadsafe</a></li>
<li>
<a href="#sqlite3_total_changes">sqlite3_total_changes</a></li>
<li>
<a href="#sqlite3_profile">sqlite3_trace</a></li>
<li>
<a href="#sqlite3_aggregate_count">sqlite3_transfer_bindings</a></li>
<li>
<a href="#sqlite3_update_hook">sqlite3_update_hook</a></li>
<li>
<a href="#sqlite3_user_data">sqlite3_user_data</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_blob</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_bytes</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_bytes16</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_double</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_int</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_int64</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_numeric_type</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_text</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_text16</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_text16be</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_text16le</a></li>
<li>
<a href="#sqlite3_value_blob">sqlite3_value_type</a></li>
<li>
<a href="#sqlite3_libversion">sqlite3_version</a></li>
<li>
<a href="#sqlite3_vfs_find">sqlite3_vfs_find</a></li>
<li>
<a href="#sqlite3_vfs_find">sqlite3_vfs_register</a></li>
<li>
<a href="#sqlite3_vfs_find">sqlite3_vfs_unregister</a></li>
<li>
<a href="#sqlite3_mprintf">sqlite3_vmprintf</a></li>
</ul></td>
</tr></table>
<hr>
<a name="SQLITE_FCNTL_LOCKSTATE"></a>
<h2>Standard File Control Opcodes</h2>
<blockquote><pre>
#define SQLITE_FCNTL_LOCKSTATE        1

</pre></blockquote>
<p>
These integer constants are opcodes for the xFileControl method
of the 
<a href="#sqlite3_io_methods">sqlite3_io_methods</a> object and to the 
<a href="#sqlite3_file_control">sqlite3_file_control()</a>
interface.</p>

<p>The 
<a href="#SQLITE_FCNTL_LOCKSTATE">SQLITE_FCNTL_LOCKSTATE</a> opcode is used for debugging.  This
opcode cases the xFileControl method to write the current state of
the lock (one of 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_NONE</a>, 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_SHARED</a>,

<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_RESERVED</a>, 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_PENDING</a>, or 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_EXCLUSIVE</a>)
into an integer that the pArg argument points to. This capability
is used during testing and only needs to be supported when SQLITE_TEST
is defined.
</p>
<hr>
<a name="sqlite3_blob"></a>
<h2>A Handle To An Open BLOB</h2>
<blockquote><pre>
typedef struct sqlite3_blob sqlite3_blob;

</pre></blockquote>
<p>
An instance of the following opaque structure is used to
represent an blob-handle.  A blob-handle is created by

<a href="#sqlite3_blob_open">sqlite3_blob_open()</a> and destroyed by 
<a href="#sqlite3_blob_close">sqlite3_blob_close()</a>.
The 
<a href="#sqlite3_blob_read">sqlite3_blob_read()</a> and 
<a href="#sqlite3_blob_write">sqlite3_blob_write()</a> interfaces
can be used to read or write small subsections of the blob.
The 
<a href="#sqlite3_blob_bytes">sqlite3_blob_bytes()</a> interface returns the size of the
blob in bytes.
</p>
<hr>
<a name="sqlite3_context"></a>
<h2>SQL Function Context Object</h2>
<blockquote><pre>
typedef struct sqlite3_context sqlite3_context;

</pre></blockquote>
<p>
The context in which an SQL function executes is stored in an
sqlite3_context object.  A pointer to an sqlite3_context
object is always first parameter to application-defined SQL functions.
</p>
<hr>
<a name="sqlite3_file"></a>
<h2>OS Interface Open File Handle</h2>
<blockquote><pre>
typedef struct sqlite3_file sqlite3_file;
struct sqlite3_file {
  const struct sqlite3_io_methods *pMethods;  /* Methods for an open file */
};

</pre></blockquote>
<p>
An 
<a href="#sqlite3_file">sqlite3_file</a> object represents an open file in the OS
interface layer.  Individual OS interface implementations will
want to subclass this object by appending additional fields
for their own use.  The pMethods entry is a pointer to an

<a href="#sqlite3_io_methods">sqlite3_io_methods</a> object that defines methods for performing
I/O operations on the open file.
</p>
<hr>
<a name="sqlite3_io_methods"></a>
<h2>OS Interface File Virtual Methods Object</h2>
<blockquote><pre>
typedef struct sqlite3_io_methods sqlite3_io_methods;
struct sqlite3_io_methods {
  int iVersion;
  int (*xClose)(sqlite3_file*);
  int (*xRead)(sqlite3_file*, void*, int iAmt, sqlite3_int64 iOfst);
  int (*xWrite)(sqlite3_file*, const void*, int iAmt, sqlite3_int64 iOfst);
  int (*xTruncate)(sqlite3_file*, sqlite3_int64 size);
  int (*xSync)(sqlite3_file*, int flags);
  int (*xFileSize)(sqlite3_file*, sqlite3_int64 *pSize);
  int (*xLock)(sqlite3_file*, int);
  int (*xUnlock)(sqlite3_file*, int);
  int (*xCheckReservedLock)(sqlite3_file*);
  int (*xFileControl)(sqlite3_file*, int op, void *pArg);
  int (*xSectorSize)(sqlite3_file*);
  int (*xDeviceCharacteristics)(sqlite3_file*);
  /* Additional methods may be added in future releases */
};

</pre></blockquote>
<p>
Every file opened by the 
<a href="#sqlite3_vfs">sqlite3_vfs</a> xOpen method contains a pointer to
an instance of the this object.  This object defines the
methods used to perform various operations against the open file.</p>

<p>The flags argument to xSync may be one of 
<a href="#SQLITE_SYNC_DATAONLY">SQLITE_SYNC_NORMAL</a> or

<a href="#SQLITE_SYNC_DATAONLY">SQLITE_SYNC_FULL</a>.  The first choice is the normal fsync().
OS-X style fullsync.  The SQLITE_SYNC_DATA flag may be ORed in to
indicate that only the data of the file and not its inode needs to be
synced.</p>

<p>The integer values to xLock() and xUnlock() are one of
<ul>
<li> 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_NONE</a>,
<li> 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_SHARED</a>,
<li> 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_RESERVED</a>,
<li> 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_PENDING</a>, or
<li> 
<a href="#SQLITE_LOCK_EXCLUSIVE">SQLITE_LOCK_EXCLUSIVE</a>.
</ul>
xLock() increases the lock. xUnlock() decreases the lock.
The xCheckReservedLock() method looks
to see if any database connection, either in this
process or in some other process, is holding an RESERVED,
PENDING, or EXCLUSIVE lock on the file.  It returns true
if such a lock exists and false if not.</p>

<p>The xFileControl() method is a generic interface that allows custom
VFS implementations to directly control an open file using the

<a href="#sqlite3_file_control">sqlite3_file_control()</a> interface.  The second "op" argument
is an integer opcode.   The third
argument is a generic pointer which is intended to be a pointer
to a structure that may contain arguments or space in which to
write return values.  Potential uses for xFileControl() might be
functions to enable blocking locks with timeouts, to change the
locking strategy (for example to use dot-file locks), to inquire
about the status of a lock, or to break stale locks.  The SQLite
core reserves opcodes less than 100 for its own use.
A 
<a href="#SQLITE_FCNTL_LOCKSTATE">list of opcodes</a> less than 100 is available.
Applications that define a custom xFileControl method should use opcodes
greater than 100 to avoid conflicts.</p>

<p>The xSectorSize() method returns the sector size of the
device that underlies the file.  The sector size is the
minimum write that can be performed without disturbing
other bytes in the file.  The xDeviceCharacteristics()
method returns a bit vector describing behaviors of the
underlying device:</p>

<p><ul>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC512</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC1K</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC2K</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC4K</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC8K</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC16K</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC32K</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_ATOMIC64K</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_SAFE_APPEND</a>
<li> 
<a href="#SQLITE_IOCAP_ATOMIC">SQLITE_IOCAP_SEQUENTIAL</a>
</ul></p>

<p>The SQLITE_IOCAP_ATOMIC property means that all writes of
any size are atomic.  The SQLITE_IOCAP_ATOMICnnn values
mean that writes of blocks that are nnn bytes in size and
are aligned to an address which is an integer multiple of
nnn are atomic.  The SQLITE_IOCAP_SAFE_APPEND value means
that when data is appended to a file, the data is appended
first then the size of the file is extended, never the other
way around.  The SQLITE_IOCAP_SEQUENTIAL property means that
information is written to disk in the same order as calls
to xWrite().
</p>
<hr>
<a name="sqlite3_mutex"></a>
<h2>Mutex Handle</h2>
<blockquote><pre>
typedef struct sqlite3_mutex sqlite3_mutex;

</pre></blockquote>
<p>
The mutex module within SQLite defines 
<a href="#sqlite3_mutex">sqlite3_mutex</a> to be an
abstract type for a mutex object.  The SQLite core never looks
at the internal representation of an 
<a href="#sqlite3_mutex">sqlite3_mutex</a>.  It only
deals with pointers to the 
<a href="#sqlite3_mutex">sqlite3_mutex</a> object.</p>

<p>Mutexes are created using 
<a href="#sqlite3_mutex_alloc">sqlite3_mutex_alloc()</a>.
</p>
<hr>
<a name="sqlite3_temp_directory"></a>
<h2>Name Of The Folder Holding Temporary Files</h2>
<blockquote><pre>
SQLITE_EXTERN char *sqlite3_temp_directory;

</pre></blockquote>
<p>
If this global variable is made to point to a string which is
the name of a folder (a.ka. directory), then all temporary files
created by SQLite will be placed in that directory.  If this variable
is NULL pointer, then SQLite does a search for an appropriate temporary
file directory.</p>

<p>It is not safe to modify this variable once a database connection
has been opened.  It is intended that this variable be set once
as part of process initialization and before any SQLite interface
routines have been call and remain unchanged thereafter.
</p>
<hr>
<a name="sqlite3_value"></a>
<h2>Dynamically Typed Value Object</h2>
<blockquote><pre>
typedef struct Mem sqlite3_value;

</pre></blockquote>
<p>
SQLite uses the sqlite3_value object to represent all values
that are or can be stored in a database table.
SQLite uses dynamic typing for the values it stores.
Values stored in sqlite3_value objects can be
be integers, floating point values, strings, BLOBs, or NULL.
</p>
<hr>
<a name="sqlite3_vfs"></a>
<h2>OS Interface Object</h2>
<blockquote><pre>
typedef struct sqlite3_vfs sqlite3_vfs;
struct sqlite3_vfs {
  int iVersion;            /* Structure version number */
  int szOsFile;            /* Size of subclassed sqlite3_file */
  int mxPathname;          /* Maximum file pathname length */
  sqlite3_vfs *pNext;      /* Next registered VFS */
  const char *zName;       /* Name of this virtual file system */
  void *pAppData;          /* Pointer to application-specific data */
  int (*xOpen)(sqlite3_vfs*, const char *zName, sqlite3_file*,
               int flags, int *pOutFlags);
  int (*xDelete)(sqlite3_vfs*, const char *zName, int syncDir);
  int (*xAccess)(sqlite3_vfs*, const char *zName, int flags);
  int (*xGetTempname)(sqlite3_vfs*, int nOut, char *zOut);
  int (*xFullPathname)(sqlite3_vfs*, const char *zName, int nOut, char *zOut);
  void *(*xDlOpen)(sqlite3_vfs*, const char *zFilename);
  void (*xDlError)(sqlite3_vfs*, int nByte, char *zErrMsg);
  void *(*xDlSym)(sqlite3_vfs*,void*, const char *zSymbol);
  void (*xDlClose)(sqlite3_vfs*, void*);
  int (*xRandomness)(sqlite3_vfs*, int nByte, char *zOut);
  int (*xSleep)(sqlite3_vfs*, int microseconds);
  int (*xCurrentTime)(sqlite3_vfs*, double*);
  /* New fields may be appended in figure versions.  The iVersion
  ** value will increment whenever this happens. */
};

</pre></blockquote>
<p>
An instance of this object defines the interface between the
SQLite core and the underlying operating system.  The "vfs"
in the name of the object stands for "virtual file system".</p>

<p>The iVersion field is initially 1 but may be larger for future
versions of SQLite.  Additional fields may be appended to this
object when the iVersion value is increased.</p>

<p>The szOsFile field is the size of the subclassed 
<a href="#sqlite3_file">sqlite3_file</a>
structure used by this VFS.  mxPathname is the maximum length of
a pathname in this VFS.</p>

<p>Registered vfs modules are kept on a linked list formed by
the pNext pointer.  The 
<a href="#sqlite3_vfs_find">sqlite3_vfs_register()</a>
and 
<a href="#sqlite3_vfs_find">sqlite3_vfs_unregister()</a> interfaces manage this list
in a thread-safe way.  The 
<a href="#sqlite3_vfs_find">sqlite3_vfs_find()</a> interface
searches the list.</p>

<p>The pNext field is the only fields in the sqlite3_vfs
structure that SQLite will ever modify.  SQLite will only access
or modify this field while holding a particular static mutex.
The application should never modify anything within the sqlite3_vfs
object once the object has been registered.</p>

<p>The zName field holds the name of the VFS module.  The name must
be unique across all VFS modules.</p>

<p> SQLite will guarantee that the zFilename string passed to
xOpen() is a full pathname as generated by xFullPathname() and
that the string will be valid and unchanged until xClose() is
called. So the 
<a href="#sqlite3_file">sqlite3_file</a> can store a pointer to the
filename if it needs to remember the filename for some reason.</p>

<p> The flags argument to xOpen() includes all bits set in
the flags argument to 
<a href="#sqlite3_open">sqlite3_open_v2()</a>.  Or if 
<a href="#sqlite3_open">sqlite3_open()</a>
or 
<a href="#sqlite3_open">sqlite3_open16()</a> is used, then flags includes at least

<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READWRITE</a> | 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_CREATE</a>.
If xOpen() opens a file read-only then it sets *pOutFlags to
include 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READONLY</a>.  Other bits in *pOutFlags may be
set.</p>

<p> SQLite will also add one of the following flags to the xOpen()
call, depending on the object being opened:</p>

<p><ul>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_MAIN_DB</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_MAIN_JOURNAL</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_TEMP_DB</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_TEMP_JOURNAL</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_TRANSIENT_DB</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_SUBJOURNAL</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_MASTER_JOURNAL</a>
</ul></p>

<p>The file I/O implementation can use the object type flags to
changes the way it deals with files.  For example, an application
that does not care about crash recovery or rollback, might make
the open of a journal file a no-op.  Writes to this journal are
also a no-op.  Any attempt to read the journal return SQLITE_IOERR.
Or the implementation might recognize the a database file will
be doing page-aligned sector reads and writes in a random order
and set up its I/O subsystem accordingly.</p>

<p>SQLite might also add one of the following flags to the xOpen
method:</p>

<p><ul>
<li> 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_DELETEONCLOSE</a>
<li> 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_EXCLUSIVE</a>
</ul></p>

<p> The 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_DELETEONCLOSE</a> flag means the file should be
deleted when it is closed. The 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_DELETEONCLOSE</a>
will be set for TEMP  databases, journals and for subjournals.
 The 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_EXCLUSIVE</a> flag means the file should be opened
for exclusive access.  This flag is set for all files except
for the main database file.</p>

<p> At least szOsFile bytes of memory is allocated by SQLite
to hold the  
<a href="#sqlite3_file">sqlite3_file</a> structure passed as the third
argument to xOpen.  The xOpen method does not have to
allocate the structure; it should just fill it in.</p>

<p> The flags argument to xAccess() may be 
<a href="#SQLITE_ACCESS_EXISTS">SQLITE_ACCESS_EXISTS</a>
to test for the existance of a file,
or 
<a href="#SQLITE_ACCESS_EXISTS">SQLITE_ACCESS_READWRITE</a> to test to see
if a file is readable and writable, or 
<a href="#SQLITE_ACCESS_EXISTS">SQLITE_ACCESS_READ</a>
to test to see if a file is at least readable. The file can be a
directory.</p>

<p> SQLite will always allocate at least mxPathname+1 byte for
the output buffers for xGetTempname and xFullPathname. The exact
size of the output buffer is also passed as a parameter to both
methods. If the output buffer is not large enough, SQLITE_CANTOPEN
should be returned. As this is handled as a fatal error by SQLite,
vfs implementations should endeavor to prevent this by setting
mxPathname to a sufficiently large value.</p>

<p>The xRandomness(), xSleep(), and xCurrentTime() interfaces
are not strictly a part of the filesystem, but they are
included in the VFS structure for completeness.
The xRandomness() function attempts to return nBytes bytes
of good-quality randomness into zOut.  The return value is
the actual number of bytes of randomness obtained.  The
xSleep() method cause the calling thread to sleep for at
least the number of microseconds given.  The xCurrentTime()
method returns a Julian Day Number for the current date and
time.
</p>
<hr>
<a name="sqlite3_aggregate_context"></a>
<h2>Obtain Aggregate Function Context</h2>
<blockquote><pre>
void *sqlite3_aggregate_context(sqlite3_context*, int nBytes);

</pre></blockquote>
<p>
The implementation of aggregate SQL functions use this routine to allocate
a structure for storing their state.
 The first time the sqlite3_aggregate_context() routine is
is called for a particular aggregate, SQLite allocates nBytes of memory
zeros that memory, and returns a pointer to it.
 On second and subsequent calls to sqlite3_aggregate_context()
for the same aggregate function index, the same buffer is returned.
The implementation
of the aggregate can use the returned buffer to accumulate data.</p>

<p> SQLite automatically frees the allocated buffer when the aggregate
query concludes.</p>

<p>The first parameter should be a copy of the

<a href="#sqlite3_context">SQL function context</a> that is the first
parameter to the callback routine that implements the aggregate
function.</p>

<p>This routine must be called from the same thread in which
the aggregate SQL function is running.
</p>
<hr>
<a name="sqlite3_auto_extension"></a>
<h2>Make Arrangements To Automatically Load An Extension</h2>
<blockquote><pre>
int sqlite3_auto_extension(void *xEntryPoint);

</pre></blockquote>
<p>
 This function
registers an extension entry point that is automatically invoked
whenever a new database connection is opened using

<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open16()</a>, or 
<a href="#sqlite3_open">sqlite3_open_v2()</a>.</p>

<p>This API can be invoked at program startup in order to register
one or more statically linked extensions that will be available
to all new database connections.</p>

<p> Duplicate extensions are detected so calling this routine multiple
times with the same extension is harmless.</p>

<p> This routine stores a pointer to the extension in an array
that is obtained from sqlite_malloc(). If you run a memory leak
checker on your program and it reports a leak because of this
array, then invoke 
<a href="#sqlite3_reset_auto_extension">sqlite3_reset_auto_extension()</a> prior
to shutdown to free the memory.</p>

<p> Automatic extensions apply across all threads.</p>

<p>This interface is experimental and is subject to change or
removal in future releases of SQLite.
</p>
<hr>
<a name="sqlite3_bind_parameter_count"></a>
<h2>Number Of SQL Parameters</h2>
<blockquote><pre>
int sqlite3_bind_parameter_count(sqlite3_stmt*);

</pre></blockquote>
<p>
This routine can be used to find the number of SQL parameters
in a prepared statement.  SQL parameters are tokens of the
form "?", "?NNN", ":AAA", "$AAA", or "@AAA" that serve as
place-holders for values that are 
<a href="#sqlite3_bind_blob">bound</a>
to the parameters at a later time.</p>

<p>This routine actually returns the index of the largest parameter.
For all forms except ?NNN, this will correspond to the number of
unique parameters.  If parameters of the ?NNN are used, there may
be gaps in the list.</p>

<p>See also: 
<a href="#sqlite3_bind_blob">sqlite3_bind()</a>,

<a href="#sqlite3_bind_parameter_name">sqlite3_bind_parameter_name()</a>, and

<a href="#sqlite3_bind_parameter_index">sqlite3_bind_parameter_index()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13601</td> 
<td valign="top">
The 
<a href="#sqlite3_bind_parameter_count">sqlite3_bind_parameter_count(S)</a> interface returns
the largest index of all SQL parameters in the

<a href="#sqlite3_stmt">prepared statement</a> S, or 0 if S
contains no SQL parameters.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_bind_parameter_index"></a>
<h2>Index Of A Parameter With A Given Name</h2>
<blockquote><pre>
int sqlite3_bind_parameter_index(sqlite3_stmt*, const char *zName);

</pre></blockquote>
<p>
Return the index of an SQL parameter given its name.  The
index value returned is suitable for use as the second
parameter to 
<a href="#sqlite3_bind_blob">sqlite3_bind()</a>.  A zero
is returned if no matching parameter is found.  The parameter
name must be given in UTF-8 even if the original statement
was prepared from UTF-16 text using 
<a href="#sqlite3_prepare">sqlite3_prepare16_v2()</a>.</p>

<p>See also: 
<a href="#sqlite3_bind_blob">sqlite3_bind()</a>,

<a href="#sqlite3_bind_parameter_count">sqlite3_bind_parameter_count()</a>, and

<a href="#sqlite3_bind_parameter_index">sqlite3_bind_parameter_index()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13641</td> 
<td valign="top">
The 
<a href="#sqlite3_bind_parameter_index">sqlite3_bind_parameter_index(S,N)</a> interface returns
the index of SQL parameter in 
<a href="#sqlite3_stmt">prepared statement</a>
S whose name matches the UTF-8 string N, or 0 if there is
no match.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_bind_parameter_name"></a>
<h2>Name Of A Host Parameter</h2>
<blockquote><pre>
const char *sqlite3_bind_parameter_name(sqlite3_stmt*, int);

</pre></blockquote>
<p>
This routine returns a pointer to the name of the n-th
SQL parameter in a 
<a href="#sqlite3_stmt">prepared statement</a>.
SQL parameters of the form ":AAA" or "@AAA" or "$AAA" have a name
which is the string ":AAA" or "@AAA" or "$VVV".
In other words, the initial ":" or "$" or "@"
is included as part of the name.
Parameters of the form "?" or "?NNN" have no name.</p>

<p>The first host parameter has an index of 1, not 0.</p>

<p>If the value n is out of range or if the n-th parameter is
nameless, then NULL is returned.  The returned string is
always in the UTF-8 encoding even if the named parameter was
originally specified as UTF-16 in 
<a href="#sqlite3_prepare">sqlite3_prepare16()</a> or

<a href="#sqlite3_prepare">sqlite3_prepare16_v2()</a>.</p>

<p>See also: 
<a href="#sqlite3_bind_blob">sqlite3_bind()</a>,

<a href="#sqlite3_bind_parameter_count">sqlite3_bind_parameter_count()</a>, and

<a href="#sqlite3_bind_parameter_index">sqlite3_bind_parameter_index()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13621</td> 
<td valign="top">
The 
<a href="#sqlite3_bind_parameter_name">sqlite3_bind_parameter_name(S,N)</a> interface returns
a UTF-8 rendering of the name of the SQL parameter in

<a href="#sqlite3_stmt">prepared statement</a> S having index N, or
NULL if there is no SQL parameter with index N or if the
parameter with index N is an anonymous parameter "?" or
a numbered parameter "?NNN".</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_blob_bytes"></a>
<h2>Return The Size Of An Open BLOB</h2>
<blockquote><pre>
int sqlite3_blob_bytes(sqlite3_blob *);

</pre></blockquote>
<p>
 Return the size in bytes of the blob accessible via the open

<a href="#sqlite3_blob">blob-handle</a> passed as an argument.
</p>
<hr>
<a name="sqlite3_blob_close"></a>
<h2>Close A BLOB Handle</h2>
<blockquote><pre>
int sqlite3_blob_close(sqlite3_blob *);

</pre></blockquote>
<p>
Close an open 
<a href="#sqlite3_blob">blob handle</a>.</p>

<p> Closing a BLOB shall cause the current transaction to commit
if there are no other BLOBs, no pending prepared statements, and the
database connection is in autocommit mode.
 If any writes were made to the BLOB, they might be held in cache
until the close operation if they will fit.
Closing the BLOB often forces the changes
out to disk and so if any I/O errors occur, they will likely occur
at the time when the BLOB is closed. Any errors that occur during
closing are reported as a non-zero return value.</p>

<p> The BLOB is closed unconditionally.  Even if this routine returns
an error code, the BLOB is still closed.
</p>
<hr>
<a name="sqlite3_blob_open"></a>
<h2>Open A BLOB For Incremental I/O</h2>
<blockquote><pre>
int sqlite3_blob_open(
  sqlite3*,
  const char *zDb,
  const char *zTable,
  const char *zColumn,
  sqlite3_int64 iRow,
  int flags,
  sqlite3_blob **ppBlob
);

</pre></blockquote>
<p>
 This interfaces opens a handle to the blob located
in row iRow,, column zColumn, table zTable in database zDb;
in other words,  the same blob that would be selected by:</p>

<p><pre>
SELECT zColumn FROM zDb.zTable WHERE rowid = iRow;
</pre></p>

<p> If the flags parameter is non-zero, the blob is opened for
read and write access. If it is zero, the blob is opened for read
access.</p>

<p> On success, 
<a href="#SQLITE_ABORT">SQLITE_OK</a> is returned and the new

<a href="#sqlite3_blob">blob handle</a> is written to *ppBlob.
 Otherwise an error code is returned and
any value written to *ppBlob should not be used by the caller.
 This function sets the database-handle error code and message
accessible via 
<a href="#sqlite3_errcode">sqlite3_errcode()</a> and 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a>.
<font color="red">(TODO: We should go through and mark all interfaces that behave this
way with a similar statement)</font>
</p>
<hr>
<a name="sqlite3_blob_read"></a>
<h2>Read Data From A BLOB Incrementally</h2>
<blockquote><pre>
int sqlite3_blob_read(sqlite3_blob *, void *z, int n, int iOffset);

</pre></blockquote>
<p>
This function is used to read data from an open

<a href="#sqlite3_blob">blob-handle</a> into a caller supplied buffer.
 n bytes of data are copied into buffer
z from the open blob, starting at offset iOffset.</p>

<p> If offset iOffset is less than n bytes from the end of the blob,

<a href="#SQLITE_ABORT">SQLITE_ERROR</a> is returned and no data is read. If n is
less than zero 
<a href="#SQLITE_ABORT">SQLITE_ERROR</a> is returned and no data is read.</p>

<p> On success, SQLITE_OK is returned. Otherwise, an

<a href="#SQLITE_ABORT">error code</a> or an 
<a href="#SQLITE_IOERR_BLOCKED">extended error code</a> is returned.
</p>
<hr>
<a name="sqlite3_blob_write"></a>
<h2>Write Data Into A BLOB Incrementally</h2>
<blockquote><pre>
int sqlite3_blob_write(sqlite3_blob *, const void *z, int n, int iOffset);

</pre></blockquote>
<p>
This function is used to write data into an open

<a href="#sqlite3_blob">blob-handle</a> from a user supplied buffer.
 n bytes of data are copied from the buffer
pointed to by z into the open blob, starting at offset iOffset.</p>

<p> If the 
<a href="#sqlite3_blob">blob-handle</a> passed as the first argument
was not opened for writing (the flags parameter to 
<a href="#sqlite3_blob_open">sqlite3_blob_open()</a>
was zero), this function returns 
<a href="#SQLITE_ABORT">SQLITE_READONLY</a>.</p>

<p> This function may only modify the contents of the blob; it is
not possible to increase the size of a blob using this API.
 If offset iOffset is less than n bytes from the end of the blob,

<a href="#SQLITE_ABORT">SQLITE_ERROR</a> is returned and no data is written. If n is
less than zero 
<a href="#SQLITE_ABORT">SQLITE_ERROR</a> is returned and no data is written.</p>

<p> On success, SQLITE_OK is returned. Otherwise, an

<a href="#SQLITE_ABORT">error code</a> or an 
<a href="#SQLITE_IOERR_BLOCKED">extended error code</a> is returned.
</p>
<hr>
<a name="sqlite3_busy_handler"></a>
<h2>Register A Callback To Handle SQLITE_BUSY Errors</h2>
<blockquote><pre>
int sqlite3_busy_handler(sqlite3*, int(*)(void*,int), void*);

</pre></blockquote>
<p>
This routine identifies a callback function that might be
invoked whenever an attempt is made to open a database table
that another thread or process has locked.
If the busy callback is NULL, then 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a>
or 
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_BLOCKED</a>
is returned immediately upon encountering the lock.
If the busy callback is not NULL, then the
callback will be invoked with two arguments.  The
first argument to the handler is a copy of the void* pointer which
is the third argument to this routine.  The second argument to
the handler is the number of times that the busy handler has
been invoked for this locking event.   If the
busy callback returns 0, then no additional attempts are made to
access the database and 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> or 
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_BLOCKED</a> is returned.
If the callback returns non-zero, then another attempt
is made to open the database for reading and the cycle repeats.</p>

<p>The presence of a busy handler does not guarantee that
it will be invoked when there is lock contention.
If SQLite determines that invoking the busy handler could result in
a deadlock, it will go ahead and return 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> or

<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_BLOCKED</a> instead of invoking the
busy handler.
Consider a scenario where one process is holding a read lock that
it is trying to promote to a reserved lock and
a second process is holding a reserved lock that it is trying
to promote to an exclusive lock.  The first process cannot proceed
because it is blocked by the second and the second process cannot
proceed because it is blocked by the first.  If both processes
invoke the busy handlers, neither will make any progress.  Therefore,
SQLite returns 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> for the first process, hoping that this
will induce the first process to release its read lock and allow
the second process to proceed.</p>

<p>The default busy callback is NULL.</p>

<p>The 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> error is converted to 
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_BLOCKED</a>
when SQLite is in the middle of a large transaction where all the
changes will not fit into the in-memory cache.  SQLite will
already hold a RESERVED lock on the database file, but it needs
to promote this lock to EXCLUSIVE so that it can spill cache
pages into the database file without harm to concurrent
readers.  If it is unable to promote the lock, then the in-memory
cache will be left in an inconsistent state and so the error
code is promoted from the relatively benign 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> to
the more severe 
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_BLOCKED</a>.  This error code promotion
forces an automatic rollback of the changes.  See the
<a href="http://www.sqlite.org/cvstrac/wiki?p=CorruptionFollowingBusyError">
CorruptionFollowingBusyError</a> wiki page for a discussion of why
this is important.</p>

<p>There can only be a single busy handler defined for each database
connection.  Setting a new busy handler clears any previous one.
Note that calling 
<a href="#sqlite3_busy_timeout">sqlite3_busy_timeout()</a> will also set or clear
the busy handler.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12311</td> 
<td valign="top">
The 
<a href="#sqlite3_busy_handler">sqlite3_busy_handler()</a> function replaces the busy handler
callback in the database connection identified by the 1st
parameter with a new busy handler identified by the 2nd and 3rd
parameters.</td></tr>
<tr><td valign="top">F12312</td> 
<td valign="top">
The default busy handler for new database connections is NULL.</td></tr>
<tr><td valign="top">F12314</td> 
<td valign="top">
When two or more database connection share a common cache,
the busy handler for the database connection currently using
the cache is invoked when the cache encounters a lock.</td></tr>
<tr><td valign="top">F12316</td> 
<td valign="top">
If a busy handler callback returns zero, then the SQLite
interface that provoked the locking event will return

<a href="#SQLITE_ABORT">SQLITE_BUSY</a>.</td></tr>
<tr><td valign="top">F12318</td> 
<td valign="top">
SQLite will invokes the busy handler with two argument which
are a copy of the pointer supplied by the 3rd parameter to

<a href="#sqlite3_busy_handler">sqlite3_busy_handler()</a> and a count of the number of prior
invocations of the busy handler for the same locking event.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12319</td> 
<td valign="top">
A busy handler should not call close the database connection
or prepared statement that invoked the busy handler.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_busy_timeout"></a>
<h2>Set A Busy Timeout</h2>
<blockquote><pre>
int sqlite3_busy_timeout(sqlite3*, int ms);

</pre></blockquote>
<p>
This routine sets a 
<a href="#sqlite3_busy_handler">busy handler</a>
that sleeps for a while when a
table is locked.  The handler will sleep multiple times until
at least "ms" milliseconds of sleeping have been done. After
"ms" milliseconds of sleeping, the handler returns 0 which
causes 
<a href="#sqlite3_step">sqlite3_step()</a> to return 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> or 
<a href="#SQLITE_IOERR_BLOCKED">SQLITE_IOERR_BLOCKED</a>.</p>

<p>Calling this routine with an argument less than or equal to zero
turns off all busy handlers.</p>

<p>There can only be a single busy handler for a particular database
connection.  If another busy handler was defined
(using 
<a href="#sqlite3_busy_handler">sqlite3_busy_handler()</a>) prior to calling
this routine, that other busy handler is cleared.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12341</td> 
<td valign="top">
The 
<a href="#sqlite3_busy_timeout">sqlite3_busy_timeout()</a> function overrides any prior

<a href="#sqlite3_busy_timeout">sqlite3_busy_timeout()</a> or 
<a href="#sqlite3_busy_handler">sqlite3_busy_handler()</a> setting
on the same database connection.</td></tr>
<tr><td valign="top">F12343</td> 
<td valign="top">
If the 2nd parameter to 
<a href="#sqlite3_busy_timeout">sqlite3_busy_timeout()</a> is less than
or equal to zero, then the busy handler is cleared so that
all subsequent locking events immediately return 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a>.</td></tr>
<tr><td valign="top">F12344</td> 
<td valign="top">
If the 2nd parameter to 
<a href="#sqlite3_busy_timeout">sqlite3_busy_timeout()</a> is a positive
number N, then a busy handler is set that repeatedly calls
the xSleep() method in the VFS interface until either the
lock clears or until the cumulative sleep time reported back
by xSleep() exceeds N milliseconds.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_changes"></a>
<h2>Count The Number Of Rows Modified</h2>
<blockquote><pre>
int sqlite3_changes(sqlite3*);

</pre></blockquote>
<p>
This function returns the number of database rows that were changed
or inserted or deleted by the most recently completed SQL statement
on the connection specified by the first parameter.  Only
changes that are directly specified by the INSERT, UPDATE, or
DELETE statement are counted.  Auxiliary changes caused by
triggers are not counted. Use the 
<a href="#sqlite3_total_changes">sqlite3_total_changes()</a> function
to find the total number of changes including changes caused by triggers.</p>

<p>A "row changes" is a change to a single row of a single table
caused by an INSERT, DELETE, or UPDATE statement.  Rows that
are changed as side effects of REPLACE constraint resolution,
rollback, ABORT processing, DROP TABLE, or by any other
mechanisms do not count as direct row changes.</p>

<p>A "trigger context" is a scope of execution that begins and
ends with the script of a trigger.  Most SQL statements are
evaluated outside of any trigger.  This is the "top level"
trigger context.  If a trigger fires from the top level, a
new trigger context is entered for the duration of that one
trigger.  Subtriggers create subcontexts for their duration.</p>

<p>Calling 
<a href="#sqlite3_exec">sqlite3_exec()</a> or 
<a href="#sqlite3_step">sqlite3_step()</a> recursively does
not create a new trigger context.</p>

<p>This function returns the number of direct row changes in the
most recent INSERT, UPDATE, or DELETE statement within the same
trigger context.</p>

<p>So when called from the top level, this function returns the
number of changes in the most recent INSERT, UPDATE, or DELETE
that also occurred at the top level.
Within the body of a trigger, the sqlite3_changes() interface
can be called to find the number of
changes in the most recently completed INSERT, UPDATE, or DELETE
statement within the body of the same trigger.
However, the number returned does not include in changes
caused by subtriggers since they have their own context.</p>

<p>SQLite implements the command "DELETE FROM table" without
a WHERE clause by dropping and recreating the table.  (This is much
faster than going through and deleting individual elements from the
table.)  Because of this optimization, the deletions in
"DELETE FROM table" are not row changes and will not be counted
by the sqlite3_changes() or 
<a href="#sqlite3_total_changes">sqlite3_total_changes()</a> functions.
To get an accurate count of the number of rows deleted, use
"DELETE FROM table WHERE 1" instead.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12241</td> 
<td valign="top">
The 
<a href="#sqlite3_changes">sqlite3_changes()</a> function returns the number of
row changes caused by the most recent INSERT, UPDATE,
or DELETE statement on the same database connection and
within the same trigger context, or zero if there have
not been any qualifying row changes.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12252</td> 
<td valign="top">
If a separate thread makes changes on the same database connection
while 
<a href="#sqlite3_changes">sqlite3_changes()</a> is running then the value returned
is unpredictable and unmeaningful.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_clear_bindings"></a>
<h2>Reset All Bindings On A Prepared Statement</h2>
<blockquote><pre>
int sqlite3_clear_bindings(sqlite3_stmt*);

</pre></blockquote>
<p>
Contrary to the intuition of many, 
<a href="#sqlite3_reset">sqlite3_reset()</a> does not
reset the 
<a href="#sqlite3_bind_blob">bindings</a> on a

<a href="#sqlite3_stmt">prepared statement</a>.  Use this routine to
reset all host parameters to NULL.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13661</td> 
<td valign="top">
The 
<a href="#sqlite3_clear_bindings">sqlite3_clear_bindings(S)</a> interface resets all
SQL parameter bindings in 
<a href="#sqlite3_stmt">prepared statement</a> S
back to NULL.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_close"></a>
<h2>Closing A Database Connection</h2>
<blockquote><pre>
int sqlite3_close(sqlite3 *);

</pre></blockquote>
<p>
This routine is the destructor for the 
<a href="#sqlite3">sqlite3</a> object.</p>

<p>Applications should 
<a href="#sqlite3_finalize">finalize</a> all

<a href="#sqlite3_stmt">prepared statements</a> and

<a href="#sqlite3_blob_close">close</a> all 
<a href="#sqlite3_blob">BLOBs</a>
associated with the 
<a href="#sqlite3">sqlite3</a> object prior
to attempting to close the 
<a href="#sqlite3">sqlite3</a> object.</p>

<p><font color="red">(TODO: What happens to pending transactions?  Are they
rolled back, or abandoned?)</font></p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12011</td> 
<td valign="top">
The 
<a href="#sqlite3_close">sqlite3_close()</a> interface destroys an 
<a href="#sqlite3">sqlite3</a> object
allocated by a prior call to 
<a href="#sqlite3_open">sqlite3_open()</a>,

<a href="#sqlite3_open">sqlite3_open16()</a>, or 
<a href="#sqlite3_open">sqlite3_open_v2()</a>.</td></tr>
<tr><td valign="top">F12012</td> 
<td valign="top">
The 
<a href="#sqlite3_close">sqlite3_close()</a> function releases all memory used by the
connection and closes all open files.</td></tr>
<tr><td valign="top">F12013</td> 
<td valign="top">
If the database connection contains

<a href="#sqlite3_stmt">prepared statements</a> that have not been
finalized by 
<a href="#sqlite3_finalize">sqlite3_finalize()</a>, then 
<a href="#sqlite3_close">sqlite3_close()</a>
returns 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> and leaves the connection open.</td></tr>
<tr><td valign="top">F12014</td> 
<td valign="top">
Giving sqlite3_close() a NULL pointer is a harmless no-op.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12015</td> 
<td valign="top">
The parameter to 
<a href="#sqlite3_close">sqlite3_close()</a> must be an 
<a href="#sqlite3">sqlite3</a> object
pointer previously obtained from 
<a href="#sqlite3_open">sqlite3_open()</a> or the
equivalent, or NULL.</td></tr>
<tr><td valign="top">U12016</td> 
<td valign="top">
The parameter to 
<a href="#sqlite3_close">sqlite3_close()</a> must not have been previously
closed.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_column_count"></a>
<h2>Number Of Columns In A Result Set</h2>
<blockquote><pre>
int sqlite3_column_count(sqlite3_stmt *pStmt);

</pre></blockquote>
<p>
Return the number of columns in the result set returned by the

<a href="#sqlite3_stmt">prepared statement</a>. This routine returns 0
if pStmt is an SQL statement that does not return data (for
example an UPDATE).</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13711</td> 
<td valign="top">
The 
<a href="#sqlite3_column_count">sqlite3_column_count(S)</a> interface returns the number of
columns in the result set generated by the

<a href="#sqlite3_stmt">prepared statement</a> S, or 0 if S does not generate
a result set.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_data_count"></a>
<h2>Number of columns in a result set</h2>
<blockquote><pre>
int sqlite3_data_count(sqlite3_stmt *pStmt);

</pre></blockquote>
<p>
Return the number of values in the current row of the result set.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13771</td> 
<td valign="top">
After a call to 
<a href="#sqlite3_step">sqlite3_step(S)</a> that returns

<a href="#SQLITE_ABORT">SQLITE_ROW</a>, the 
<a href="#sqlite3_data_count">sqlite3_data_count(S)</a> routine
will return the same value as the

<a href="#sqlite3_column_count">sqlite3_column_count(S)</a> function.</td></tr>
<tr><td valign="top">F13772</td> 
<td valign="top">
After 
<a href="#sqlite3_step">sqlite3_step(S)</a> has returned any value other than

<a href="#SQLITE_ABORT">SQLITE_ROW</a> or before 
<a href="#sqlite3_step">sqlite3_step(S)</a> has been
called on the 
<a href="#sqlite3_stmt">prepared statement</a> for
the first time since it was 
<a href="#sqlite3_prepare">prepared</a>
or 
<a href="#sqlite3_reset">reset</a>, the 
<a href="#sqlite3_data_count">sqlite3_data_count(S)</a>
routine returns zero.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_db_handle"></a>
<h2>Find The Database Handle Of A Prepared Statement</h2>
<blockquote><pre>
sqlite3 *sqlite3_db_handle(sqlite3_stmt*);

</pre></blockquote>
<p>
 The sqlite3_db_handle interface
returns the 
<a href="#sqlite3">sqlite3*</a> database handle to which a

<a href="#sqlite3_stmt">prepared statement</a> belongs.
 the database handle returned by sqlite3_db_handle
is the same database handle that was
the first argument to the 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or its variants
that was used to create the statement in the first place.
</p>
<hr>
<a name="sqlite3_enable_load_extension"></a>
<h2>Enable Or Disable Extension Loading</h2>
<blockquote><pre>
int sqlite3_enable_load_extension(sqlite3 *db, int onoff);

</pre></blockquote>
<p>
So as not to open security holes in older applications that are
unprepared to deal with extension loading, and as a means of disabling
extension loading while evaluating user-entered SQL, the following
API is provided to turn the 
<a href="#sqlite3_load_extension">sqlite3_load_extension()</a> mechanism on and
off. It is off by default. See ticket #1863.</p>

<p> Call the sqlite3_enable_load_extension() routine
with onoff==1 to turn extension loading on
and call it with onoff==0 to turn it back off again.
</p>
<hr>
<a name="sqlite3_enable_shared_cache"></a>
<h2>Enable Or Disable Shared Pager Cache</h2>
<blockquote><pre>
int sqlite3_enable_shared_cache(int);

</pre></blockquote>
<p></p>

<p>This routine enables or disables the sharing of the database cache
and schema data structures between connections to the same database.</p>

<p>Sharing is enabled if the argument is true and disabled if the argument
is false.</p>

<p> Cache sharing is enabled and disabled
for an entire process. This is a change as of SQLite version 3.5.0.
In prior versions of SQLite, sharing was
enabled or disabled for each thread separately.</p>

<p>The cache sharing mode set by this interface effects all subsequent
calls to 
<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open_v2()</a>, and 
<a href="#sqlite3_open">sqlite3_open16()</a>.
 Existing database connections continue use the sharing mode
that was in effect at the time they were opened.</p>

<p>Virtual tables cannot be used with a shared cache. When shared
cache is enabled, the 
<font color="red">sqlite3_create_module()</font> API used to register
virtual tables will always return an error.</p>

<p> This routine returns 
<a href="#SQLITE_ABORT">SQLITE_OK</a> if shared cache was
enabled or disabled successfully. An 
<a href="#SQLITE_ABORT">error code</a>
is returned otherwise.</p>

<p> Shared cache is disabled by default. But this might change in
future releases of SQLite.  Applications that care about shared
cache setting should set it explicitly.
</p>
<hr>
<a name="sqlite3_exec"></a>
<h2>One-Step Query Execution Interface</h2>
<blockquote><pre>
int sqlite3_exec(
  sqlite3*,                                  /* An open database */
  const char *sql,                           /* SQL to be evaluted */
  int (*callback)(void*,int,char**,char**),  /* Callback function */
  void *,                                    /* 1st argument to callback */
  char **errmsg                              /* Error msg written here */
);

</pre></blockquote>
<p>
The sqlite3_exec() interface is a convenient way of running
one or more SQL statements without a lot of C code.  The
SQL statements are passed in as the second parameter to
sqlite3_exec().  The statements are evaluated one by one
until either an error or an interrupt is encountered or
until they are all done.  The 3rd parameter is an optional
callback that is invoked once for each row of any query results
produced by the SQL statements.  The 5th parameter tells where
to write any error messages.</p>

<p>The sqlite3_exec() interface is implemented in terms of

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a>, 
<a href="#sqlite3_step">sqlite3_step()</a>, and 
<a href="#sqlite3_finalize">sqlite3_finalize()</a>.
The sqlite3_exec() routine does nothing that cannot be done
by 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a>, 
<a href="#sqlite3_step">sqlite3_step()</a>, and 
<a href="#sqlite3_finalize">sqlite3_finalize()</a>.
The sqlite3_exec() is just a convenient wrapper.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12101</td> 
<td valign="top">
The 
<a href="#sqlite3_exec">sqlite3_exec()</a> interface evaluates zero or more UTF-8
encoded, semicolon-separated, SQL statements in the
zero-terminated string of its 2nd parameter within the
context of the 
<a href="#sqlite3">sqlite3</a> object given in the 1st parameter.</td></tr>
<tr><td valign="top">F12104</td> 
<td valign="top">
The return value of 
<a href="#sqlite3_exec">sqlite3_exec()</a> is SQLITE_OK if all
SQL statements run successfully.</td></tr>
<tr><td valign="top">F12105</td> 
<td valign="top">
The return value of 
<a href="#sqlite3_exec">sqlite3_exec()</a> is an appropriate
non-zero error code if any SQL statement fails.</td></tr>
<tr><td valign="top">F12107</td> 
<td valign="top">
If one or more of the SQL statements handed to 
<a href="#sqlite3_exec">sqlite3_exec()</a>
return results and the 3rd parameter is not NULL, then
the callback function specified by the 3rd parameter is
invoked once for each row of result.</td></tr>
<tr><td valign="top">F12110</td> 
<td valign="top">
If the callback returns a non-zero value then 
<a href="#sqlite3_exec">sqlite3_exec()</a>
will aborted the SQL statement it is currently evaluating,
skip all subsequent SQL statements, and return 
<a href="#SQLITE_ABORT">SQLITE_ABORT</a>.
<font color="red">(TODO: What happens to *errmsg here?  Does the result code for
sqlite3_errcode() get set?)</font></td></tr>
<tr><td valign="top">F12113</td> 
<td valign="top">
The 
<a href="#sqlite3_exec">sqlite3_exec()</a> routine will pass its 4th parameter through
as the 1st parameter of the callback.</td></tr>
<tr><td valign="top">F12116</td> 
<td valign="top">
The 
<a href="#sqlite3_exec">sqlite3_exec()</a> routine sets the 2nd parameter of its
callback to be the number of columns in the current row of
result.</td></tr>
<tr><td valign="top">F12119</td> 
<td valign="top">
The 
<a href="#sqlite3_exec">sqlite3_exec()</a> routine sets the 3rd parameter of its
callback to be an array of pointers to strings holding the
values for each column in the current result set row as
obtained from 
<a href="#sqlite3_column_blob">sqlite3_column_text()</a>.</td></tr>
<tr><td valign="top">F12122</td> 
<td valign="top">
The 
<a href="#sqlite3_exec">sqlite3_exec()</a> routine sets the 4th parameter of its
callback to be an array of pointers to strings holding the
names of result columns as obtained from 
<a href="#sqlite3_column_name">sqlite3_column_name()</a>.</td></tr>
<tr><td valign="top">F12125</td> 
<td valign="top">
If the 3rd parameter to 
<a href="#sqlite3_exec">sqlite3_exec()</a> is NULL then

<a href="#sqlite3_exec">sqlite3_exec()</a> never invokes a callback.  All query
results are silently discarded.</td></tr>
<tr><td valign="top">F12128</td> 
<td valign="top">
If an error occurs while parsing or evaluating any of the SQL
statements handed to 
<a href="#sqlite3_exec">sqlite3_exec()</a> then 
<a href="#sqlite3_exec">sqlite3_exec()</a> will
return an 
<a href="#SQLITE_ABORT">error code</a> other than 
<a href="#SQLITE_ABORT">SQLITE_OK</a>.</td></tr>
<tr><td valign="top">F12131</td> 
<td valign="top">
If an error occurs while parsing or evaluating any of the SQL
handed to 
<a href="#sqlite3_exec">sqlite3_exec()</a> and if the 5th parameter (errmsg)
to 
<a href="#sqlite3_exec">sqlite3_exec()</a> is not NULL, then an error message is
allocated using the equivalent of 
<a href="#sqlite3_mprintf">sqlite3_mprintf()</a> and
*errmsg is made to point to that message.</td></tr>
<tr><td valign="top">F12134</td> 
<td valign="top">
The 
<a href="#sqlite3_exec">sqlite3_exec()</a> routine does not change the value of
*errmsg if errmsg is NULL or if there are no errors.</td></tr>
<tr><td valign="top">F12137</td> 
<td valign="top">
The 
<a href="#sqlite3_exec">sqlite3_exec()</a> function sets the error code and message
accessible via 
<a href="#sqlite3_errcode">sqlite3_errcode()</a> and 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a>.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12141</td> 
<td valign="top">
The first parameter to 
<a href="#sqlite3_exec">sqlite3_exec()</a> must be an valid and open

<a href="#sqlite3">database connection</a>.</td></tr>
<tr><td valign="top">U12142</td> 
<td valign="top">
The database connection must not be closed while

<a href="#sqlite3_exec">sqlite3_exec()</a> is running.</td></tr>
<tr><td valign="top">U12143</td> 
<td valign="top">
The calling function is should use 
<a href="#sqlite3_free">sqlite3_free()</a> to free
the memory that *errmsg is left pointing at once the error
message is no longer needed.</td></tr>
<tr><td valign="top">U12145</td> 
<td valign="top">
The SQL statement text in the 2nd parameter to 
<a href="#sqlite3_exec">sqlite3_exec()</a>
must remain unchanged while 
<a href="#sqlite3_exec">sqlite3_exec()</a> is running.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_extended_result_codes"></a>
<h2>Enable Or Disable Extended Result Codes</h2>
<blockquote><pre>
int sqlite3_extended_result_codes(sqlite3*, int onoff);

</pre></blockquote>
<p>
The sqlite3_extended_result_codes() routine enables or disables the

<a href="#SQLITE_IOERR_BLOCKED">extended result codes</a> feature of SQLite.
The extended result codes are disabled by default for historical
compatibility.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12201</td> 
<td valign="top">
Each new 
<a href="#sqlite3">database connection</a> has the

<a href="#SQLITE_IOERR_BLOCKED">extended result codes</a> feature
disabled by default.</td></tr>
<tr><td valign="top">F12202</td> 
<td valign="top">
The 
<a href="#sqlite3_extended_result_codes">sqlite3_extended_result_codes(D,F)</a> interface will enable

<a href="#SQLITE_IOERR_BLOCKED">extended result codes</a> for the

<a href="#sqlite3">database connection</a> D if the F parameter
is true, or disable them if F is false.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_file_control"></a>
<h2>Low-Level Control Of Database Files</h2>
<blockquote><pre>
int sqlite3_file_control(sqlite3*, const char *zDbName, int op, void*);

</pre></blockquote>
<p>
 The 
<a href="#sqlite3_file_control">sqlite3_file_control()</a> interface makes a direct call to the
xFileControl method for the 
<a href="#sqlite3_io_methods">sqlite3_io_methods</a> object associated
with a particular database identified by the second argument. The
name of the database is the name assigned to the database by the
<a href="lang_attach.html">ATTACH</a> SQL command that opened the
database. To control the main database file, use the name "main"
or a NULL pointer. The third and fourth parameters to this routine
are passed directly through to the second and third parameters of
the xFileControl method. The return value of the xFileControl
method becomes the return value of this routine.</p>

<p> If the second parameter (zDbName) does not match the name of any
open database file, then SQLITE_ERROR is returned. This error
code is not remembered and will not be recalled by 
<a href="#sqlite3_errcode">sqlite3_errcode()</a>
or 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a>. The underlying xFileControl method might
also return SQLITE_ERROR. There is no way to distinguish between
an incorrect zDbName and an SQLITE_ERROR return from the underlying
xFileControl method.</p>

<p>See also: 
<a href="#SQLITE_FCNTL_LOCKSTATE">SQLITE_FCNTL_LOCKSTATE</a>
</p>
<hr>
<a name="sqlite3_finalize"></a>
<h2>Destroy A Prepared Statement Object</h2>
<blockquote><pre>
int sqlite3_finalize(sqlite3_stmt *pStmt);

</pre></blockquote>
<p>
The sqlite3_finalize() function is called to delete a

<a href="#sqlite3_stmt">prepared statement</a>. If the statement was
executed successfully, or not executed at all, then SQLITE_OK is returned.
If execution of the statement failed then an

<a href="#SQLITE_ABORT">error code</a> or 
<a href="#SQLITE_IOERR_BLOCKED">extended error code</a>
is returned.</p>

<p>This routine can be called at any point during the execution of the

<a href="#sqlite3_stmt">prepared statement</a>.  If the virtual machine has not
completed execution when this routine is called, that is like
encountering an error or an interrupt.  (See 
<a href="#sqlite3_interrupt">sqlite3_interrupt()</a>.)
Incomplete updates may be rolled back and transactions cancelled,
depending on the circumstances, and the

<a href="#SQLITE_ABORT">error code</a> returned will be 
<a href="#SQLITE_ABORT">SQLITE_ABORT</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F11302</td> 
<td valign="top">
The 
<a href="#sqlite3_finalize">sqlite3_finalize(S)</a> interface destroys the

<a href="#sqlite3_stmt">prepared statement</a> S and releases all
memory and file resources held by that object.</td></tr>
<tr><td valign="top">F11304</td> 
<td valign="top">
If the most recent call to 
<a href="#sqlite3_step">sqlite3_step(S)</a> for the

<a href="#sqlite3_stmt">prepared statement</a> S returned an error,
then 
<a href="#sqlite3_finalize">sqlite3_finalize(S)</a> returns that same error.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_get_autocommit"></a>
<h2>Test To See If The Database Is In Auto-Commit Mode</h2>
<blockquote><pre>
int sqlite3_get_autocommit(sqlite3*);

</pre></blockquote>
<p>
The sqlite3_get_autocommit() interfaces returns non-zero or
zero if the given database connection is or is not in autocommit mode,
respectively.   Autocommit mode is on
by default.  Autocommit mode is disabled by a 
<a href="lang_transaction.html">BEGIN</a> statement.
Autocommit mode is reenabled by a 
<a href="lang_transaction.html">COMMIT</a> or 
<a href="lang_transaction.html">ROLLBACK</a>.</p>

<p>If certain kinds of errors occur on a statement within a multi-statement
transactions (errors including 
<a href="#SQLITE_ABORT">SQLITE_FULL</a>, 
<a href="#SQLITE_ABORT">SQLITE_IOERR</a>,

<a href="#SQLITE_ABORT">SQLITE_NOMEM</a>, 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a>, and 
<a href="#SQLITE_ABORT">SQLITE_INTERRUPT</a>) then the
transaction might be rolled back automatically.  The only way to
find out if SQLite automatically rolled back the transaction after
an error is to use this function.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12931</td> 
<td valign="top">
The 
<a href="#sqlite3_get_autocommit">sqlite3_get_autocommit()</a> interface returns non-zero or
zero if the given database connection is or is not in autocommit
mode, respectively.</td></tr>
<tr><td valign="top">F12932</td> 
<td valign="top">
Autocommit mode is on by default.</td></tr>
<tr><td valign="top">F12933</td> 
<td valign="top">
Autocommit mode is disabled by a successful 
<a href="lang_transaction.html">BEGIN</a> statement.</td></tr>
<tr><td valign="top">F12934</td> 
<td valign="top">
Autocommit mode is enabled by a successful 
<a href="lang_transaction.html">COMMIT</a> or 
<a href="lang_transaction.html">ROLLBACK</a>
statement.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12936</td> 
<td valign="top">
If another thread changes the autocommit status of the database
connection while this routine is running, then the return value
is undefined.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_interrupt"></a>
<h2>Interrupt A Long-Running Query</h2>
<blockquote><pre>
void sqlite3_interrupt(sqlite3*);

</pre></blockquote>
<p>
This function causes any pending database operation to abort and
return at its earliest opportunity. This routine is typically
called in response to a user action such as pressing "Cancel"
or Ctrl-C where the user wants a long query operation to halt
immediately.</p>

<p>It is safe to call this routine from a thread different from the
thread that is currently running the database operation.  But it
is not safe to call this routine with a database connection that
is closed or might close before sqlite3_interrupt() returns.</p>

<p>If an SQL is very nearly finished at the time when sqlite3_interrupt()
is called, then it might not have an opportunity to be interrupted.
It might continue to completion.
An SQL operation that is interrupted will return

<a href="#SQLITE_ABORT">SQLITE_INTERRUPT</a>.  If the interrupted SQL operation is an
INSERT, UPDATE, or DELETE that is inside an explicit transaction,
then the entire transaction will be rolled back automatically.
A call to sqlite3_interrupt() has no effect on SQL statements
that are started after sqlite3_interrupt() returns.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12271</td> 
<td valign="top">
The 
<a href="#sqlite3_interrupt">sqlite3_interrupt()</a> interface will force all running
SQL statements associated with the same database connection
to halt after processing at most one additional row of
data.</td></tr>
<tr><td valign="top">F12272</td> 
<td valign="top">
Any SQL statement that is interrupted by 
<a href="#sqlite3_interrupt">sqlite3_interrupt()</a>
will return 
<a href="#SQLITE_ABORT">SQLITE_INTERRUPT</a>.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12279</td> 
<td valign="top">
If the database connection closes while 
<a href="#sqlite3_interrupt">sqlite3_interrupt()</a>
is running then bad things will likely happen.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_last_insert_rowid"></a>
<h2>Last Insert Rowid</h2>
<blockquote><pre>
sqlite3_int64 sqlite3_last_insert_rowid(sqlite3*);

</pre></blockquote>
<p>
Each entry in an SQLite table has a unique 64-bit signed
integer key called the "rowid". The rowid is always available
as an undeclared column named ROWID, OID, or _ROWID_ as long as those
names are not also used by explicitly declared columns. If
the table has a column of type INTEGER PRIMARY KEY then that column
is another an alias for the rowid.</p>

<p>This routine returns the rowid of the most recent
successful INSERT into the database from the database connection
shown in the first argument.  If no successful inserts
have ever occurred on this database connection, zero is returned.</p>

<p>If an INSERT occurs within a trigger, then the rowid of the
inserted row is returned by this routine as long as the trigger
is running.  But once the trigger terminates, the value returned
by this routine reverts to the last value inserted before the
trigger fired.</p>

<p>An INSERT that fails due to a constraint violation is not a
successful insert and does not change the value returned by this
routine.  Thus INSERT OR FAIL, INSERT OR IGNORE, INSERT OR ROLLBACK,
and INSERT OR ABORT make no changes to the return value of this
routine when their insertion fails.  When INSERT OR REPLACE
encounters a constraint violation, it does not fail.  The
INSERT continues to completion after deleting rows that caused
the constraint problem so INSERT OR REPLACE will always change
the return value of this interface.</p>

<p>For the purposes of this routine, an insert is considered to
be successful even if it is subsequently rolled back.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12221</td> 
<td valign="top">
The 
<a href="#sqlite3_last_insert_rowid">sqlite3_last_insert_rowid()</a> function returns the
rowid of the most recent successful insert done
on the same database connection and within the same
trigger context, or zero if there have
been no qualifying inserts on that connection.</td></tr>
<tr><td valign="top">F12223</td> 
<td valign="top">
The 
<a href="#sqlite3_last_insert_rowid">sqlite3_last_insert_rowid()</a> function returns
same value when called from the same trigger context
immediately before and after a ROLLBACK.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12232</td> 
<td valign="top">
If separate thread does a new insert on the same
database connection while the 
<a href="#sqlite3_last_insert_rowid">sqlite3_last_insert_rowid()</a>
function is running and thus changes the last insert rowid,
then the value returned by 
<a href="#sqlite3_last_insert_rowid">sqlite3_last_insert_rowid()</a> is
unpredictable and might not equal either the old or the new
last insert rowid.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_load_extension"></a>
<h2>Load An Extension</h2>
<blockquote><pre>
int sqlite3_load_extension(
  sqlite3 *db,          /* Load the extension into this database connection */
  const char *zFile,    /* Name of the shared library containing extension */
  const char *zProc,    /* Entry point.  Derived from zFile if 0 */
  char **pzErrMsg       /* Put error message here if not 0 */
);

</pre></blockquote>
<p>
 The sqlite3_load_extension() interface
attempts to load an SQLite extension library contained in the file
zFile. The entry point is zProc. zProc may be 0
in which case the name of the entry point defaults
to "sqlite3_extension_init".</p>

<p> The sqlite3_load_extension() interface shall
return 
<a href="#SQLITE_ABORT">SQLITE_OK</a> on success and 
<a href="#SQLITE_ABORT">SQLITE_ERROR</a> if something goes wrong.</p>

<p>If an error occurs and pzErrMsg is not 0, then the
sqlite3_load_extension() interface shall attempt to fill *pzErrMsg with
error message text stored in memory obtained from 
<a href="#sqlite3_free">sqlite3_malloc()</a>.
  The calling function should free this memory
by calling 
<a href="#sqlite3_free">sqlite3_free()</a>.</p>

<p>Extension loading must be enabled using 
<a href="#sqlite3_enable_load_extension">sqlite3_enable_load_extension()</a>
prior to calling this API or an error will be returned.
</p>
<hr>
<a name="sqlite3_progress_handler"></a>
<h2>Query Progress Callbacks</h2>
<blockquote><pre>
void sqlite3_progress_handler(sqlite3*, int, int(*)(void*), void*);

</pre></blockquote>
<p>
This routine configures a callback function - the
progress callback - that is invoked periodically during long
running calls to 
<a href="#sqlite3_exec">sqlite3_exec()</a>, 
<a href="#sqlite3_step">sqlite3_step()</a> and

<a href="#sqlite3_free_table">sqlite3_get_table()</a>.   An example use for this
interface is to keep a GUI updated during a large query.</p>

<p>If the progress callback returns non-zero, the opertion is
interrupted.  This feature can be used to implement a
"Cancel" button on a GUI dialog box.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12911</td> 
<td valign="top">
The callback function registered by 
<a href="#sqlite3_progress_handler">sqlite3_progress_handler()</a>
is invoked periodically during long running calls to

<a href="#sqlite3_step">sqlite3_step()</a>.</td></tr>
<tr><td valign="top">F12912</td> 
<td valign="top">
The progress callback is invoked once for every N virtual
machine opcodes, where N is the second argument to
the 
<a href="#sqlite3_progress_handler">sqlite3_progress_handler()</a> call that registered
the callback.  <font color="red">(TODO: What if N is less than 1?)</font></td></tr>
<tr><td valign="top">F12913</td> 
<td valign="top">
The progress callback itself is identified by the third
argument to 
<a href="#sqlite3_progress_handler">sqlite3_progress_handler()</a>.</td></tr>
<tr><td valign="top">F12914</td> 
<td valign="top">
The fourth argument 
<a href="#sqlite3_progress_handler">sqlite3_progress_handler()</a> is a
void pointer passed to the progress callback
function each time it is invoked.</td></tr>
<tr><td valign="top">F12915</td> 
<td valign="top">
If a call to 
<a href="#sqlite3_step">sqlite3_step()</a> results in fewer than
N opcodes being executed,
then the progress callback is never invoked.</td></tr>
<tr><td valign="top">F12916</td> 
<td valign="top">
Every call to 
<a href="#sqlite3_progress_handler">sqlite3_progress_handler()</a>
overwrites any previously registere progress handler.</td></tr>
<tr><td valign="top">F12917</td> 
<td valign="top">
If the progress handler callback is NULL then no progress
handler is invoked.</td></tr>
<tr><td valign="top">F12918</td> 
<td valign="top">
If the progress callback returns a result other than 0, then
the behavior is a if 
<a href="#sqlite3_interrupt">sqlite3_interrupt()</a> had been called.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_release_memory"></a>
<h2>Attempt To Free Heap Memory</h2>
<blockquote><pre>
int sqlite3_release_memory(int);

</pre></blockquote>
<p>
 The sqlite3_release_memory() interface attempts to
free N bytes of heap memory by deallocating non-essential memory
allocations held by the database labrary.  Memory used
to cache database pages to improve performance is an example of
non-essential memory. sqlite3_release_memory() returns
the number of bytes actually freed, which might be more or less
than the amount requested.
</p>
<hr>
<a name="sqlite3_reset"></a>
<h2>Reset A Prepared Statement Object</h2>
<blockquote><pre>
int sqlite3_reset(sqlite3_stmt *pStmt);

</pre></blockquote>
<p>
The sqlite3_reset() function is called to reset a

<a href="#sqlite3_stmt">prepared statement</a> object.
back to its initial state, ready to be re-executed.
Any SQL statement variables that had values bound to them using
the 
<a href="#sqlite3_bind_blob">sqlite3_bind_*() API</a> retain their values.
Use 
<a href="#sqlite3_clear_bindings">sqlite3_clear_bindings()</a> to reset the bindings.</p>

<p> The 
<a href="#sqlite3_reset">sqlite3_reset(S)</a> interface resets the 
<a href="#sqlite3_stmt">prepared statement</a> S
back to the beginning of its program.</p>

<p> If the most recent call to 
<a href="#sqlite3_step">sqlite3_step(S)</a> for

<a href="#sqlite3_stmt">prepared statement</a> S returned 
<a href="#SQLITE_ABORT">SQLITE_ROW</a> or 
<a href="#SQLITE_ABORT">SQLITE_DONE</a>,
or if 
<a href="#sqlite3_step">sqlite3_step(S)</a> has never before been called on S,
then 
<a href="#sqlite3_reset">sqlite3_reset(S)</a> returns 
<a href="#SQLITE_ABORT">SQLITE_OK</a>.</p>

<p> If the most recent call to 
<a href="#sqlite3_step">sqlite3_step(S)</a> for

<a href="#sqlite3_stmt">prepared statement</a> S indicated an error, then

<a href="#sqlite3_reset">sqlite3_reset(S)</a> returns an appropriate 
<a href="#SQLITE_ABORT">error code</a>.</p>

<p> The 
<a href="#sqlite3_reset">sqlite3_reset(S)</a> interface does not change the values
of any 
<a href="#sqlite3_bind_blob">bindings</a> on 
<a href="#sqlite3_stmt">prepared statement</a> S.
</p>
<hr>
<a name="sqlite3_reset_auto_extension"></a>
<h2>Reset Automatic Extension Loading</h2>
<blockquote><pre>
void sqlite3_reset_auto_extension(void);

</pre></blockquote>
<p>
 This function disables all previously registered
automatic extensions.  This
routine undoes the effect of all prior 
<a href="#sqlite3_auto_extension">sqlite3_auto_extension()</a>
calls.</p>

<p> This call disabled automatic extensions in all threads.</p>

<p>This interface is experimental and is subject to change or
removal in future releases of SQLite.
</p>
<hr>
<a name="sqlite3_set_authorizer"></a>
<h2>Compile-Time Authorization Callbacks</h2>
<blockquote><pre>
int sqlite3_set_authorizer(
  sqlite3*,
  int (*xAuth)(void*,int,const char*,const char*,const char*,const char*),
  void *pUserData
);

</pre></blockquote>
<p>
This routine registers a authorizer callback with a particular
database connection, supplied in the first argument.
The authorizer callback is invoked as SQL statements are being compiled
by 
<a href="#sqlite3_prepare">sqlite3_prepare()</a> or its variants 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a>,

<a href="#sqlite3_prepare">sqlite3_prepare16()</a> and 
<a href="#sqlite3_prepare">sqlite3_prepare16_v2()</a>.  At various
points during the compilation process, as logic is being created
to perform various actions, the authorizer callback is invoked to
see if those actions are allowed.  The authorizer callback should
return SQLITE_OK to allow the action, 
<a href="#SQLITE_DENY">SQLITE_IGNORE</a> to disallow the
specific action but allow the SQL statement to continue to be
compiled, or 
<a href="#SQLITE_DENY">SQLITE_DENY</a> to cause the entire SQL statement to be
rejected with an error.   If the authorizer callback returns
any value other than 
<a href="#SQLITE_DENY">SQLITE_IGNORE</a>, 
<a href="#SQLITE_ABORT">SQLITE_OK</a>, or 
<a href="#SQLITE_DENY">SQLITE_DENY</a>
then 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or equivalent call that triggered
the authorizer will fail with an error message.</p>

<p>When the callback returns 
<a href="#SQLITE_ABORT">SQLITE_OK</a>, that means the operation
requested is ok.  When the callback returns 
<a href="#SQLITE_DENY">SQLITE_DENY</a>, the

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or equivalent call that triggered the
authorizer will fail with an error message explaining that
access is denied.  If the authorizer code is 
<a href="#SQLITE_ALTER_TABLE">SQLITE_READ</a>
and the callback returns 
<a href="#SQLITE_DENY">SQLITE_IGNORE</a> then the prepared
statement is constructed to insert a NULL value in place of
the table column that would have
been read if 
<a href="#SQLITE_ABORT">SQLITE_OK</a> had been returned.  The 
<a href="#SQLITE_DENY">SQLITE_IGNORE</a>
return can be used to deny an untrusted user access to individual
columns of a table.</p>

<p>The first parameter to the authorizer callback is a copy of
the third parameter to the sqlite3_set_authorizer() interface.
The second parameter to the callback is an integer

<a href="#SQLITE_ALTER_TABLE">action code</a> that specifies the particular action
to be authorized. The third through sixth
parameters to the callback are zero-terminated strings that contain
additional details about the action to be authorized.</p>

<p>An authorizer is used when preparing SQL statements from an untrusted
source, to ensure that the SQL statements do not try to access data
that they are not allowed to see, or that they do not try to
execute malicious statements that damage the database.  For
example, an application may allow a user to enter arbitrary
SQL queries for evaluation by a database.  But the application does
not want the user to be able to make arbitrary changes to the
database.  An authorizer could then be put in place while the
user-entered SQL is being prepared that disallows everything
except SELECT statements.</p>

<p>Only a single authorizer can be in place on a database connection
at a time.  Each call to sqlite3_set_authorizer overrides the
previous call.  Disable the authorizer by installing a NULL callback.
The authorizer is disabled by default.</p>

<p>Note that the authorizer callback is invoked only during

<a href="#sqlite3_prepare">sqlite3_prepare()</a> or its variants.  Authorization is not
performed during statement evaluation in 
<a href="#sqlite3_step">sqlite3_step()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12501</td> 
<td valign="top">
The 
<a href="#sqlite3_set_authorizer">sqlite3_set_authorizer(D,...)</a> interface registers a
authorizer callback with database connection D.</td></tr>
<tr><td valign="top">F12502</td> 
<td valign="top">
The authorizer callback is invoked as SQL statements are
being compiled</td></tr>
<tr><td valign="top">F12503</td> 
<td valign="top">
If the authorizer callback returns any value other than

<a href="#SQLITE_DENY">SQLITE_IGNORE</a>, 
<a href="#SQLITE_ABORT">SQLITE_OK</a>, or 
<a href="#SQLITE_DENY">SQLITE_DENY</a> then
the 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or equivalent call that caused
the authorizer callback to run shall fail with an

<a href="#SQLITE_ABORT">SQLITE_ERROR</a> error code and an appropriate error message.</td></tr>
<tr><td valign="top">F12504</td> 
<td valign="top">
When the authorizer callback returns 
<a href="#SQLITE_ABORT">SQLITE_OK</a>, the operation
described is coded normally.</td></tr>
<tr><td valign="top">F12505</td> 
<td valign="top">
When the authorizer callback returns 
<a href="#SQLITE_DENY">SQLITE_DENY</a>, the

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or equivalent call that caused the
authorizer callback to run shall fail
with an 
<a href="#SQLITE_ABORT">SQLITE_ERROR</a> error code and an error message
explaining that access is denied.</td></tr>
<tr><td valign="top">F12506</td> 
<td valign="top">
If the authorizer code (the 2nd parameter to the authorizer
callback) is 
<a href="#SQLITE_ALTER_TABLE">SQLITE_READ</a> and the authorizer callback returns

<a href="#SQLITE_DENY">SQLITE_IGNORE</a> then the prepared statement is constructed to
insert a NULL value in place of the table column that would have
been read if 
<a href="#SQLITE_ABORT">SQLITE_OK</a> had been returned.</td></tr>
<tr><td valign="top">F12507</td> 
<td valign="top">
If the authorizer code (the 2nd parameter to the authorizer
callback) is anything other than 
<a href="#SQLITE_ALTER_TABLE">SQLITE_READ</a>, then
a return of 
<a href="#SQLITE_DENY">SQLITE_IGNORE</a> has the same effect as 
<a href="#SQLITE_DENY">SQLITE_DENY</a>.</td></tr>
<tr><td valign="top">F12510</td> 
<td valign="top">
The first parameter to the authorizer callback is a copy of
the third parameter to the 
<a href="#sqlite3_set_authorizer">sqlite3_set_authorizer()</a> interface.</td></tr>
<tr><td valign="top">F12511</td> 
<td valign="top">
The second parameter to the callback is an integer

<a href="#SQLITE_ALTER_TABLE">action code</a> that specifies the particular action
to be authorized.</td></tr>
<tr><td valign="top">F12512</td> 
<td valign="top">
The third through sixth parameters to the callback are
zero-terminated strings that contain
additional details about the action to be authorized.</td></tr>
<tr><td valign="top">F12520</td> 
<td valign="top">
Each call to 
<a href="#sqlite3_set_authorizer">sqlite3_set_authorizer()</a> overrides the
any previously installed authorizer.</td></tr>
<tr><td valign="top">F12521</td> 
<td valign="top">
A NULL authorizer means that no authorization
callback is invoked.</td></tr>
<tr><td valign="top">F12522</td> 
<td valign="top">
The default authorizer is NULL.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_sleep"></a>
<h2>Suspend Execution For A Short Time</h2>
<blockquote><pre>
int sqlite3_sleep(int);

</pre></blockquote>
<p>
 The sqlite3_sleep() function
causes the current thread to suspend execution
for at least a number of milliseconds specified in its parameter.</p>

<p> If the operating system does not support sleep requests with
millisecond time resolution, then the time will be rounded up to
the nearest second. The number of milliseconds of sleep actually
requested from the operating system is returned.</p>

<p> SQLite implements this interface by calling the xSleep()
method of the default 
<a href="#sqlite3_vfs">sqlite3_vfs</a> object.
</p>
<hr>
<a name="sqlite3_soft_heap_limit"></a>
<h2>Impose A Limit On Heap Size</h2>
<blockquote><pre>
void sqlite3_soft_heap_limit(int);

</pre></blockquote>
<p>
 The sqlite3_soft_heap_limit() interface
places a "soft" limit on the amount of heap memory that may be allocated
by SQLite. If an internal allocation is requested
that would exceed the soft heap limit, 
<a href="#sqlite3_release_memory">sqlite3_release_memory()</a> is
invoked one or more times to free up some space before the allocation
is made.</p>

<p> The limit is called "soft", because if

<a href="#sqlite3_release_memory">sqlite3_release_memory()</a> cannot
free sufficient memory to prevent the limit from being exceeded,
the memory is allocated anyway and the current operation proceeds.</p>

<p>A negative or zero value for N means that there is no soft heap limit and

<a href="#sqlite3_release_memory">sqlite3_release_memory()</a> will only be called when memory is exhausted.
 The default value for the soft heap limit is zero.</p>

<p>SQLite makes a best effort to honor the soft heap limit.
 But if the soft heap limit cannot honored, execution will
continue without error or notification.  This is why the limit is
called a "soft" limit.  It is advisory only.</p>

<p>Prior to SQLite version 3.5.0, this routine only constrained the memory
allocated by a single thread - the same thread in which this routine
runs.  Beginning with SQLite version 3.5.0, the soft heap limit is
applied to all threads. The value specified for the soft heap limit
is an upper bound on the total memory allocation for all threads.  In
version 3.5.0 there is no mechanism for limiting the heap usage for
individual threads.
</p>
<hr>
<a name="sqlite3_step"></a>
<h2>Evaluate An SQL Statement</h2>
<blockquote><pre>
int sqlite3_step(sqlite3_stmt*);

</pre></blockquote>
<p>
After an 
<a href="#sqlite3_stmt">prepared statement</a> has been prepared with a call
to either 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or 
<a href="#sqlite3_prepare">sqlite3_prepare16_v2()</a> or to one of
the legacy interfaces 
<a href="#sqlite3_prepare">sqlite3_prepare()</a> or 
<a href="#sqlite3_prepare">sqlite3_prepare16()</a>,
then this function must be called one or more times to evaluate the
statement.</p>

<p>The details of the behavior of this sqlite3_step() interface depend
on whether the statement was prepared using the newer "v2" interface

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> and 
<a href="#sqlite3_prepare">sqlite3_prepare16_v2()</a> or the older legacy
interface 
<a href="#sqlite3_prepare">sqlite3_prepare()</a> and 
<a href="#sqlite3_prepare">sqlite3_prepare16()</a>.  The use of the
new "v2" interface is recommended for new applications but the legacy
interface will continue to be supported.</p>

<p>In the lagacy interface, the return value will be either 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a>,

<a href="#SQLITE_ABORT">SQLITE_DONE</a>, 
<a href="#SQLITE_ABORT">SQLITE_ROW</a>, 
<a href="#SQLITE_ABORT">SQLITE_ERROR</a>, or 
<a href="#SQLITE_ABORT">SQLITE_MISUSE</a>.
With the "v2" interface, any of the other 
<a href="#SQLITE_ABORT">result code</a>
or 
<a href="#SQLITE_IOERR_BLOCKED">extended result code</a> might be returned as
well.</p>

<p>
<a href="#SQLITE_ABORT">SQLITE_BUSY</a> means that the database engine was unable to acquire the
database locks it needs to do its job.  If the statement is a COMMIT
or occurs outside of an explicit transaction, then you can retry the
statement.  If the statement is not a COMMIT and occurs within a
explicit transaction then you should rollback the transaction before
continuing.</p>

<p>
<a href="#SQLITE_ABORT">SQLITE_DONE</a> means that the statement has finished executing
successfully.  sqlite3_step() should not be called again on this virtual
machine without first calling 
<a href="#sqlite3_reset">sqlite3_reset()</a> to reset the virtual
machine back to its initial state.</p>

<p>If the SQL statement being executed returns any data, then

<a href="#SQLITE_ABORT">SQLITE_ROW</a> is returned each time a new row of data is ready
for processing by the caller. The values may be accessed using
the 
<a href="#sqlite3_column_blob">column access functions</a>.
sqlite3_step() is called again to retrieve the next row of data.</p>

<p>
<a href="#SQLITE_ABORT">SQLITE_ERROR</a> means that a run-time error (such as a constraint
violation) has occurred.  sqlite3_step() should not be called again on
the VM. More information may be found by calling 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a>.
With the legacy interface, a more specific error code (example:

<a href="#SQLITE_ABORT">SQLITE_INTERRUPT</a>, 
<a href="#SQLITE_ABORT">SQLITE_SCHEMA</a>, 
<a href="#SQLITE_ABORT">SQLITE_CORRUPT</a>, and so forth)
can be obtained by calling 
<a href="#sqlite3_reset">sqlite3_reset()</a> on the

<a href="#sqlite3_stmt">prepared statement</a>.  In the "v2" interface,
the more specific error code is returned directly by sqlite3_step().</p>

<p>
<a href="#SQLITE_ABORT">SQLITE_MISUSE</a> means that the this routine was called inappropriately.
Perhaps it was called on a 
<a href="#sqlite3_stmt">prepared statement</a> that has
already been 
<a href="#sqlite3_finalize">finalized</a> or on one that had
previously returned 
<a href="#SQLITE_ABORT">SQLITE_ERROR</a> or 
<a href="#SQLITE_ABORT">SQLITE_DONE</a>.  Or it could
be the case that the same database connection is being used by two or
more threads at the same moment in time.</p>

<p><b>Goofy Interface Alert:</b>
In the legacy interface,
the sqlite3_step() API always returns a generic error code,

<a href="#SQLITE_ABORT">SQLITE_ERROR</a>, following any error other than 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a>
and 
<a href="#SQLITE_ABORT">SQLITE_MISUSE</a>.  You must call 
<a href="#sqlite3_reset">sqlite3_reset()</a> or

<a href="#sqlite3_finalize">sqlite3_finalize()</a> in order to find one of the specific

<a href="#SQLITE_ABORT">error codes</a> that better describes the error.
We admit that this is a goofy design.  The problem has been fixed
with the "v2" interface.  If you prepare all of your SQL statements
using either 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or 
<a href="#sqlite3_prepare">sqlite3_prepare16_v2()</a> instead
of the legacy 
<a href="#sqlite3_prepare">sqlite3_prepare()</a> and 
<a href="#sqlite3_prepare">sqlite3_prepare16()</a>, then the
more specific 
<a href="#SQLITE_ABORT">error codes</a> are returned directly
by sqlite3_step().  The use of the "v2" interface is recommended.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13202</td> 
<td valign="top">
If 
<a href="#sqlite3_stmt">prepared statement</a> S is ready to be
run, then 
<a href="#sqlite3_step">sqlite3_step(S)</a> advances that prepared statement
until to completion or until it is ready to return another
row of the result set or an interrupt or run-time error occurs.</td></tr>
<tr><td valign="top">F15304</td> 
<td valign="top">
When a call to 
<a href="#sqlite3_step">sqlite3_step(S)</a> causes the

<a href="#sqlite3_stmt">prepared statement</a> S to run to completion,
the function returns 
<a href="#SQLITE_ABORT">SQLITE_DONE</a>.</td></tr>
<tr><td valign="top">F15306</td> 
<td valign="top">
When a call to 
<a href="#sqlite3_step">sqlite3_step(S)</a> stops because it is ready
to return another row of the result set, it returns

<a href="#SQLITE_ABORT">SQLITE_ROW</a>.</td></tr>
<tr><td valign="top">F15308</td> 
<td valign="top">
If a call to 
<a href="#sqlite3_step">sqlite3_step(S)</a> encounters an

<a href="#sqlite3_interrupt">interrupt</a> or a run-time error,
it returns an appropraite error code that is not one of

<a href="#SQLITE_ABORT">SQLITE_OK</a>, 
<a href="#SQLITE_ABORT">SQLITE_ROW</a>, or 
<a href="#SQLITE_ABORT">SQLITE_DONE</a>.</td></tr>
<tr><td valign="top">F15310</td> 
<td valign="top">
If an 
<a href="#sqlite3_interrupt">interrupt</a> or run-time error
occurs during a call to 
<a href="#sqlite3_step">sqlite3_step(S)</a>
for a 
<a href="#sqlite3_stmt">prepared statement</a> S created using
legacy interfaces 
<a href="#sqlite3_prepare">sqlite3_prepare()</a> or

<a href="#sqlite3_prepare">sqlite3_prepare16()</a> then the function returns either

<a href="#SQLITE_ABORT">SQLITE_ERROR</a>, 
<a href="#SQLITE_ABORT">SQLITE_BUSY</a>, or 
<a href="#SQLITE_ABORT">SQLITE_MISUSE</a>.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_table_column_metadata"></a>
<h2>Extract Metadata About A Column Of A Table</h2>
<blockquote><pre>
int sqlite3_table_column_metadata(
  sqlite3 *db,                /* Connection handle */
  const char *zDbName,        /* Database name or NULL */
  const char *zTableName,     /* Table name */
  const char *zColumnName,    /* Column name */
  char const **pzDataType,    /* OUTPUT: Declared data type */
  char const **pzCollSeq,     /* OUTPUT: Collation sequence name */
  int *pNotNull,              /* OUTPUT: True if NOT NULL constraint exists */
  int *pPrimaryKey,           /* OUTPUT: True if column part of PK */
  int *pAutoinc               /* OUTPUT: True if column is auto-increment */
);

</pre></blockquote>
<p>
This routine
returns meta-data about a specific column of a specific database
table accessible using the connection handle passed as the first function
argument.</p>

<p>The column is identified by the second, third and fourth parameters to
this function. The second parameter is either the name of the database
(i.e. "main", "temp" or an attached database) containing the specified
table or NULL. If it is NULL, then all attached databases are searched
for the table using the same algorithm as the database engine uses to
resolve unqualified table references.</p>

<p>The third and fourth parameters to this function are the table and column
name of the desired column, respectively. Neither of these parameters
may be NULL.</p>

<p>Meta information is returned by writing to the memory locations passed as
the 5th and subsequent parameters to this function. Any of these
arguments may be NULL, in which case the corresponding element of meta
information is ommitted.</p>

<p><pre>
Parameter     Output Type      Description
-----------------------------------</p>

<p>5th         const char*      Data type
6th         const char*      Name of the default collation sequence
7th         int              True if the column has a NOT NULL constraint
8th         int              True if the column is part of the PRIMARY KEY
9th         int              True if the column is AUTOINCREMENT
</pre></p>

<p>The memory pointed to by the character pointers returned for the
declaration type and collation sequence is valid only until the next
call to any sqlite API function.</p>

<p>If the specified table is actually a view, then an error is returned.</p>

<p>If the specified column is "rowid", "oid" or "_rowid_" and an
INTEGER PRIMARY KEY column has been explicitly declared, then the output
parameters are set for the explicitly declared column. If there is no
explicitly declared IPK column, then the output parameters are set as
follows:</p>

<p><pre>
data type: "INTEGER"
collation sequence: "BINARY"
not null: 0
primary key: 1
auto increment: 0
</pre></p>

<p>This function may load one or more schemas from database files. If an
error occurs during this process, or if the requested table or column
cannot be found, an SQLITE error code is returned and an error message
left in the database handle (to be retrieved using sqlite3_errmsg()).</p>

<p>This API is only available if the library was compiled with the
SQLITE_ENABLE_COLUMN_METADATA preprocessor symbol defined.
</p>
<hr>
<a name="sqlite3_test_control"></a>
<h2>Testing Interface</h2>
<blockquote><pre>
int sqlite3_test_control(int op, ...);

</pre></blockquote>
<p>
The sqlite3_test_control() interface is used to read out internal
state of SQLite and to inject faults into SQLite for testing
purposes.  The first parameter a operation code that determines
the number, meaning, and operation of all subsequent parameters.</p>

<p>This interface is not for use by applications.  It exists solely
for verifying the correct operation of the SQLite library.  Depending
on how the SQLite library is compiled, this interface might not exist.</p>

<p>The details of the operation codes, their meanings, the parameters
they take, and what they do are all subject to change without notice.
Unlike most of the SQLite API, this function is not guaranteed to
operate consistently from one release to the next.
</p>
<hr>
<a name="sqlite3_threadsafe"></a>
<h2>Test To See If The Library Is Threadsafe</h2>
<blockquote><pre>
int sqlite3_threadsafe(void);

</pre></blockquote>
<p>
SQLite can be compiled with or without mutexes.  When
the SQLITE_THREADSAFE C preprocessor macro is true, mutexes
are enabled and SQLite is threadsafe.  When that macro os false,
the mutexes are omitted.  Without the mutexes, it is not safe
to use SQLite from more than one thread.</p>

<p>There is a measurable performance penalty for enabling mutexes.
So if speed is of utmost importance, it makes sense to disable
the mutexes.  But for maximum safety, mutexes should be enabled.
The default behavior is for mutexes to be enabled.</p>

<p>This interface can be used by a program to make sure that the
version of SQLite that it is linking against was compiled with
the desired setting of the SQLITE_THREADSAFE macro.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F10101</td> 
<td valign="top">
The 
<a href="#sqlite3_threadsafe">sqlite3_threadsafe()</a> function returns nonzero if
SQLite was compiled with its mutexes enabled or zero
if SQLite was compiled with mutexes disabled.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_total_changes"></a>
<h2>Total Number Of Rows Modified</h2>
<blockquote><pre>
int sqlite3_total_changes(sqlite3*);

</pre></blockquote>
<p>
This function returns the number of row changes caused
by INSERT, UPDATE or DELETE statements since the database handle
was opened.  The count includes all changes from all trigger
contexts.  But the count does not include changes used to
implement REPLACE constraints, do rollbacks or ABORT processing,
or DROP table processing.
The changes
are counted as soon as the statement that makes them is completed
(when the statement handle is passed to 
<a href="#sqlite3_reset">sqlite3_reset()</a> or

<a href="#sqlite3_finalize">sqlite3_finalize()</a>).</p>

<p>SQLite implements the command "DELETE FROM table" without
a WHERE clause by dropping and recreating the table.  (This is much
faster than going
through and deleting individual elements form the table.)  Because of
this optimization, the change count for "DELETE FROM table" will be
zero regardless of the number of elements that were originally in the
table. To get an accurate count of the number of rows deleted, use
"DELETE FROM table WHERE 1" instead.</p>

<p>See also the 
<a href="#sqlite3_changes">sqlite3_changes()</a> interface.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12261</td> 
<td valign="top">
The 
<a href="#sqlite3_total_changes">sqlite3_total_changes()</a> returns the total number
of row changes caused by INSERT, UPDATE, and/or DELETE
statements on the same 
<a href="#sqlite3">database connection</a>, in any
trigger context, since the database connection was
created.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U12264</td> 
<td valign="top">
If a separate thread makes changes on the same database connection
while 
<a href="#sqlite3_total_changes">sqlite3_total_changes()</a> is running then the value
returned is unpredictable and unmeaningful.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_update_hook"></a>
<h2>Data Change Notification Callbacks</h2>
<blockquote><pre>
void *sqlite3_update_hook(
  sqlite3*, 
  void(*)(void *,int ,char const *,char const *,sqlite3_int64),
  void*
);

</pre></blockquote>
<p>
 The sqlite3_update_hook() interface
registers a callback function with the database connection identified by the
first argument to be invoked whenever a row is updated, inserted or deleted.
 Any callback set by a previous call to this function for the same
database connection is overridden.</p>

<p> The second argument is a pointer to the function to invoke when a
row is updated, inserted or deleted.
 The first argument to the callback is
a copy of the third argument to sqlite3_update_hook().
 The second callback
argument is one of 
<a href="#SQLITE_ALTER_TABLE">SQLITE_INSERT</a>, 
<a href="#SQLITE_ALTER_TABLE">SQLITE_DELETE</a> or 
<a href="#SQLITE_ALTER_TABLE">SQLITE_UPDATE</a>,
depending on the operation that caused the callback to be invoked.
 The third and
fourth arguments to the callback contain pointers to the database and
table name containing the affected row.
 The final callback parameter is
the rowid of the row.
 In the case of an update, this is the rowid after
the update takes place.</p>

<p> The update hook is not invoked when internal system tables are
modified (i.e. sqlite_master and sqlite_sequence).</p>

<p> If another function was previously registered, its pArg value
is returned. Otherwise NULL is returned.
</p>
<hr>
<a name="sqlite3_user_data"></a>
<h2>User Data For Functions</h2>
<blockquote><pre>
void *sqlite3_user_data(sqlite3_context*);

</pre></blockquote>
<p>
 The sqlite3_user_data() interface returns a copy of
the pointer that was the pUserData parameter (the 5th parameter)
of the the 
<a href="#sqlite3_create_function">sqlite3_create_function()</a>
and 
<a href="#sqlite3_create_function">sqlite3_create_function16()</a> routines that originally
registered the application defined function.</p>

<p> This routine must be called from the same thread in which
the application-defined function is running.
</p>
<hr>
<a name="SQLITE_ABORT"></a>
<h2>Result Codes</h2>
<blockquote><pre>
#define SQLITE_OK           0   /* Successful result */
/* beginning-of-error-codes */
#define SQLITE_ERROR        1   /* SQL error or missing database */
#define SQLITE_INTERNAL     2   /* Internal logic error in SQLite */
#define SQLITE_PERM         3   /* Access permission denied */
#define SQLITE_ABORT        4   /* Callback routine requested an abort */
#define SQLITE_BUSY         5   /* The database file is locked */
#define SQLITE_LOCKED       6   /* A table in the database is locked */
#define SQLITE_NOMEM        7   /* A malloc() failed */
#define SQLITE_READONLY     8   /* Attempt to write a readonly database */
#define SQLITE_INTERRUPT    9   /* Operation terminated by sqlite3_interrupt()*/
#define SQLITE_IOERR       10   /* Some kind of disk I/O error occurred */
#define SQLITE_CORRUPT     11   /* The database disk image is malformed */
#define SQLITE_NOTFOUND    12   /* NOT USED. Table or record not found */
#define SQLITE_FULL        13   /* Insertion failed because database is full */
#define SQLITE_CANTOPEN    14   /* Unable to open the database file */
#define SQLITE_PROTOCOL    15   /* NOT USED. Database lock protocol error */
#define SQLITE_EMPTY       16   /* Database is empty */
#define SQLITE_SCHEMA      17   /* The database schema changed */
#define SQLITE_TOOBIG      18   /* String or BLOB exceeds size limit */
#define SQLITE_CONSTRAINT  19   /* Abort due to constraint violation */
#define SQLITE_MISMATCH    20   /* Data type mismatch */
#define SQLITE_MISUSE      21   /* Library used incorrectly */
#define SQLITE_NOLFS       22   /* Uses OS features not supported on host */
#define SQLITE_AUTH        23   /* Authorization denied */
#define SQLITE_FORMAT      24   /* Auxiliary database format error */
#define SQLITE_RANGE       25   /* 2nd parameter to sqlite3_bind out of range */
#define SQLITE_NOTADB      26   /* File opened that is not a database file */
#define SQLITE_ROW         100  /* sqlite3_step() has another row ready */
#define SQLITE_DONE        101  /* sqlite3_step() has finished executing */
/* end-of-error-codes */

</pre></blockquote>
<p>
Many SQLite functions return an integer result code from the set shown
here in order to indicates success or failure.</p>

<p>See also: 
<a href="#SQLITE_IOERR_BLOCKED">extended result codes</a>
</p>
<hr>
<a name="SQLITE_ACCESS_EXISTS"></a>
<h2>Flags for the xAccess VFS method</h2>
<blockquote><pre>
#define SQLITE_ACCESS_EXISTS    0
#define SQLITE_ACCESS_READWRITE 1
#define SQLITE_ACCESS_READ      2

</pre></blockquote>
<p>
 These integer constants can be used as the third parameter to
the xAccess method of an 
<a href="#sqlite3_vfs">sqlite3_vfs</a> object.  They determine
the kind of what kind of permissions the xAccess method is
looking for. With SQLITE_ACCESS_EXISTS, the xAccess method
simply checks to see if the file exists. With
SQLITE_ACCESS_READWRITE, the xAccess method checks to see
if the file is both readable and writable. With
SQLITE_ACCESS_READ the xAccess method
checks to see if the file is readable.
</p>
<hr>
<a name="SQLITE_ALTER_TABLE"></a>
<h2>Authorizer Action Codes</h2>
<blockquote><pre>
/******************************************* 3rd ************ 4th ***********/
#define SQLITE_CREATE_INDEX          1   /* Index Name      Table Name      */
#define SQLITE_CREATE_TABLE          2   /* Table Name      NULL            */
#define SQLITE_CREATE_TEMP_INDEX     3   /* Index Name      Table Name      */
#define SQLITE_CREATE_TEMP_TABLE     4   /* Table Name      NULL            */
#define SQLITE_CREATE_TEMP_TRIGGER   5   /* Trigger Name    Table Name      */
#define SQLITE_CREATE_TEMP_VIEW      6   /* View Name       NULL            */
#define SQLITE_CREATE_TRIGGER        7   /* Trigger Name    Table Name      */
#define SQLITE_CREATE_VIEW           8   /* View Name       NULL            */
#define SQLITE_DELETE                9   /* Table Name      NULL            */
#define SQLITE_DROP_INDEX           10   /* Index Name      Table Name      */
#define SQLITE_DROP_TABLE           11   /* Table Name      NULL            */
#define SQLITE_DROP_TEMP_INDEX      12   /* Index Name      Table Name      */
#define SQLITE_DROP_TEMP_TABLE      13   /* Table Name      NULL            */
#define SQLITE_DROP_TEMP_TRIGGER    14   /* Trigger Name    Table Name      */
#define SQLITE_DROP_TEMP_VIEW       15   /* View Name       NULL            */
#define SQLITE_DROP_TRIGGER         16   /* Trigger Name    Table Name      */
#define SQLITE_DROP_VIEW            17   /* View Name       NULL            */
#define SQLITE_INSERT               18   /* Table Name      NULL            */
#define SQLITE_PRAGMA               19   /* Pragma Name     1st arg or NULL */
#define SQLITE_READ                 20   /* Table Name      Column Name     */
#define SQLITE_SELECT               21   /* NULL            NULL            */
#define SQLITE_TRANSACTION          22   /* NULL            NULL            */
#define SQLITE_UPDATE               23   /* Table Name      Column Name     */
#define SQLITE_ATTACH               24   /* Filename        NULL            */
#define SQLITE_DETACH               25   /* Database Name   NULL            */
#define SQLITE_ALTER_TABLE          26   /* Database Name   Table Name      */
#define SQLITE_REINDEX              27   /* Index Name      NULL            */
#define SQLITE_ANALYZE              28   /* Table Name      NULL            */
#define SQLITE_CREATE_VTABLE        29   /* Table Name      Module Name     */
#define SQLITE_DROP_VTABLE          30   /* Table Name      Module Name     */
#define SQLITE_FUNCTION             31   /* Function Name   NULL            */
#define SQLITE_COPY                  0   /* No longer used */

</pre></blockquote>
<p>
The 
<a href="#sqlite3_set_authorizer">sqlite3_set_authorizer()</a> interface registers a callback function
that is invoked to authorizer certain SQL statement actions.  The
second parameter to the callback is an integer code that specifies
what action is being authorized.  These are the integer action codes that
the authorizer callback may be passed.</p>

<p>These action code values signify what kind of operation is to be
authorized.  The 3rd and 4th parameters to the authorization
callback function will be parameters or NULL depending on which of these
codes is used as the second parameter.  The 5th parameter to the
authorizer callback is the name of the database ("main", "temp",
etc.) if applicable.  The 6th parameter to the authorizer callback
is the name of the inner-most trigger or view that is responsible for
the access attempt or NULL if this access attempt is directly from
top-level SQL code.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12551</td> 
<td valign="top">
The second parameter to an

<a href="#sqlite3_set_authorizer">authorizer callback is always an integer
[SQLITE_COPY</a> that specifies what action
is being authorized.</td></tr>
<tr><td valign="top">F12552</td> 
<td valign="top">
The 3rd and 4th parameters to the

<a href="#sqlite3_set_authorizer">authorization callback function</a>
will be parameters or NULL depending on which

<a href="#SQLITE_ALTER_TABLE">authorizer code</a> is used as the second parameter.</td></tr>
<tr><td valign="top">F12553</td> 
<td valign="top">
The 5th parameter to the

<a href="#sqlite3_set_authorizer">authorizer callback</a> is the name
of the database (example: "main", "temp", etc.) if applicable.</td></tr>
<tr><td valign="top">F12554</td> 
<td valign="top">
The 6th parameter to the

<a href="#sqlite3_set_authorizer">authorizer callback</a> is the name
of the inner-most trigger or view that is responsible for
the access attempt or NULL if this access attempt is directly from
top-level SQL code.</td></tr>
</table>
</p>
<hr>
<a name="SQLITE_ANY"></a>
<h2>Text Encodings</h2>
<blockquote><pre>
#define SQLITE_UTF8           1
#define SQLITE_UTF16LE        2
#define SQLITE_UTF16BE        3
#define SQLITE_UTF16          4    /* Use native byte order */
#define SQLITE_ANY            5    /* sqlite3_create_function only */
#define SQLITE_UTF16_ALIGNED  8    /* sqlite3_create_collation only */

</pre></blockquote>
<p>
These constant define integer codes that represent the various
text encodings supported by SQLite.
</p>
<hr>
<a name="SQLITE_BLOB"></a>
<h2>Fundamental Datatypes</h2>
<blockquote><pre>
#define SQLITE_INTEGER  1
#define SQLITE_FLOAT    2
#define SQLITE_BLOB     4
#define SQLITE_NULL     5
#ifdef SQLITE_TEXT
# undef SQLITE_TEXT
#else
# define SQLITE_TEXT     3
#endif
#define SQLITE3_TEXT     3

</pre></blockquote>
<p>
Every value in SQLite has one of five fundamental datatypes:</p>

<p><ul>
<li> 64-bit signed integer
<li> 64-bit IEEE floating point number
<li> string
<li> BLOB
<li> NULL
</ul></p>

<p>These constants are codes for each of those types.</p>

<p>Note that the SQLITE_TEXT constant was also used in SQLite version 2
for a completely different meaning.  Software that links against both
SQLite version 2 and SQLite version 3 should use SQLITE3_TEXT not
SQLITE_TEXT.
</p>
<hr>
<a name="SQLITE_DENY"></a>
<h2>Authorizer Return Codes</h2>
<blockquote><pre>
#define SQLITE_DENY   1   /* Abort the SQL statement with an error */
#define SQLITE_IGNORE 2   /* Don't allow access, but don't generate an error */

</pre></blockquote>
<p>
The 
<a href="#sqlite3_set_authorizer">authorizer callback function</a> must
return either 
<a href="#SQLITE_ABORT">SQLITE_OK</a> or one of these two constants in order
to signal SQLite whether or not the action is permitted.  See the

<a href="#sqlite3_set_authorizer">authorizer documentation</a> for additional
information.
</p>
<hr>
<a name="SQLITE_IOCAP_ATOMIC"></a>
<h2>Device Characteristics</h2>
<blockquote><pre>
#define SQLITE_IOCAP_ATOMIC          0x00000001
#define SQLITE_IOCAP_ATOMIC512       0x00000002
#define SQLITE_IOCAP_ATOMIC1K        0x00000004
#define SQLITE_IOCAP_ATOMIC2K        0x00000008
#define SQLITE_IOCAP_ATOMIC4K        0x00000010
#define SQLITE_IOCAP_ATOMIC8K        0x00000020
#define SQLITE_IOCAP_ATOMIC16K       0x00000040
#define SQLITE_IOCAP_ATOMIC32K       0x00000080
#define SQLITE_IOCAP_ATOMIC64K       0x00000100
#define SQLITE_IOCAP_SAFE_APPEND     0x00000200
#define SQLITE_IOCAP_SEQUENTIAL      0x00000400

</pre></blockquote>
<p>
The xDeviceCapabilities method of the 
<a href="#sqlite3_io_methods">sqlite3_io_methods</a>
object returns an integer which is a vector of the these
bit values expressing I/O characteristics of the mass storage
device that holds the file that the 
<a href="#sqlite3_io_methods">sqlite3_io_methods</a>
refers to.</p>

<p>The SQLITE_IOCAP_ATOMIC property means that all writes of
any size are atomic.  The SQLITE_IOCAP_ATOMICnnn values
mean that writes of blocks that are nnn bytes in size and
are aligned to an address which is an integer multiple of
nnn are atomic.  The SQLITE_IOCAP_SAFE_APPEND value means
that when data is appended to a file, the data is appended
first then the size of the file is extended, never the other
way around.  The SQLITE_IOCAP_SEQUENTIAL property means that
information is written to disk in the same order as calls
to xWrite().
</p>
<hr>
<a name="SQLITE_IOERR_BLOCKED"></a>
<h2>Extended Result Codes</h2>
<blockquote><pre>
#define SQLITE_IOERR_READ          (SQLITE_IOERR | (1&lt;&lt;8))
#define SQLITE_IOERR_SHORT_READ    (SQLITE_IOERR | (2&lt;&lt;8))
#define SQLITE_IOERR_WRITE         (SQLITE_IOERR | (3&lt;&lt;8))
#define SQLITE_IOERR_FSYNC         (SQLITE_IOERR | (4&lt;&lt;8))
#define SQLITE_IOERR_DIR_FSYNC     (SQLITE_IOERR | (5&lt;&lt;8))
#define SQLITE_IOERR_TRUNCATE      (SQLITE_IOERR | (6&lt;&lt;8))
#define SQLITE_IOERR_FSTAT         (SQLITE_IOERR | (7&lt;&lt;8))
#define SQLITE_IOERR_UNLOCK        (SQLITE_IOERR | (8&lt;&lt;8))
#define SQLITE_IOERR_RDLOCK        (SQLITE_IOERR | (9&lt;&lt;8))
#define SQLITE_IOERR_DELETE        (SQLITE_IOERR | (10&lt;&lt;8))
#define SQLITE_IOERR_BLOCKED       (SQLITE_IOERR | (11&lt;&lt;8))
#define SQLITE_IOERR_NOMEM         (SQLITE_IOERR | (12&lt;&lt;8))

</pre></blockquote>
<p>
In its default configuration, SQLite API routines return one of 26 integer

<a href="#SQLITE_ABORT">result codes</a>.  However, experience has shown that
many of these result codes are too course-grained.  They do not provide as
much information about problems as programmers might like.  In an effort to
address this, newer versions of SQLite (version 3.3.8 and later) include
support for additional result codes that provide more detailed information
about errors. The extended result codes are enabled or disabled
for each database connection using the 
<a href="#sqlite3_extended_result_codes">sqlite3_extended_result_codes()</a>
API.</p>

<p>Some of the available extended result codes are listed here.
One may expect the number of extended result codes will be expand
over time.  Software that uses extended result codes should expect
to see new result codes in future releases of SQLite.</p>

<p>The SQLITE_OK result code will never be extended.  It will always
be exactly zero.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F10223</td> 
<td valign="top">
The symbolic name for an extended result code always contains
a related primary result code as a prefix.</td></tr>
<tr><td valign="top">F10224</td> 
<td valign="top">
Primary result code names contain a single "_" character.</td></tr>
<tr><td valign="top">F10225</td> 
<td valign="top">
Extended result code names contain two or more "_" characters.</td></tr>
<tr><td valign="top">F10226</td> 
<td valign="top">
The numeric value of an extended result code contains the
numeric value of its corresponding primary result code it
its least significant 8 bits.</td></tr>
</table>
</p>
<hr>
<a name="SQLITE_LOCK_EXCLUSIVE"></a>
<h2>File Locking Levels</h2>
<blockquote><pre>
#define SQLITE_LOCK_NONE          0
#define SQLITE_LOCK_SHARED        1
#define SQLITE_LOCK_RESERVED      2
#define SQLITE_LOCK_PENDING       3
#define SQLITE_LOCK_EXCLUSIVE     4

</pre></blockquote>
<p>
SQLite uses one of these integer values as the second
argument to calls it makes to the xLock() and xUnlock() methods
of an 
<a href="#sqlite3_io_methods">sqlite3_io_methods</a> object.
</p>
<hr>
<a name="SQLITE_MUTEX_FAST"></a>
<h2>Mutex Types</h2>
<blockquote><pre>
#define SQLITE_MUTEX_FAST             0
#define SQLITE_MUTEX_RECURSIVE        1
#define SQLITE_MUTEX_STATIC_MASTER    2
#define SQLITE_MUTEX_STATIC_MEM       3  /* sqlite3_malloc() */
#define SQLITE_MUTEX_STATIC_MEM2      4  /* sqlite3_release_memory() */
#define SQLITE_MUTEX_STATIC_PRNG      5  /* sqlite3_random() */
#define SQLITE_MUTEX_STATIC_LRU       6  /* lru page list */

</pre></blockquote>
<p>
 The 
<a href="#sqlite3_mutex_alloc">sqlite3_mutex_alloc()</a> interface takes a single argument
which is one of these integer constants.
</p>
<hr>
<a name="SQLITE_OPEN_CREATE"></a>
<h2>Flags For File Open Operations</h2>
<blockquote><pre>
#define SQLITE_OPEN_READONLY         0x00000001
#define SQLITE_OPEN_READWRITE        0x00000002
#define SQLITE_OPEN_CREATE           0x00000004
#define SQLITE_OPEN_DELETEONCLOSE    0x00000008
#define SQLITE_OPEN_EXCLUSIVE        0x00000010
#define SQLITE_OPEN_MAIN_DB          0x00000100
#define SQLITE_OPEN_TEMP_DB          0x00000200
#define SQLITE_OPEN_TRANSIENT_DB     0x00000400
#define SQLITE_OPEN_MAIN_JOURNAL     0x00000800
#define SQLITE_OPEN_TEMP_JOURNAL     0x00001000
#define SQLITE_OPEN_SUBJOURNAL       0x00002000
#define SQLITE_OPEN_MASTER_JOURNAL   0x00004000

</pre></blockquote>
<p>
These bit values are intended for use in then
3rd parameter to the 
<a href="#sqlite3_open">sqlite3_open_v2()</a> interface and
in the 4th parameter to the xOpen method of the

<a href="#sqlite3_vfs">sqlite3_vfs</a> object.
</p>
<hr>
<a name="SQLITE_STATIC"></a>
<h2>Constants Defining Special Destructor Behavior</h2>
<blockquote><pre>
typedef void (*sqlite3_destructor_type)(void*);
#define SQLITE_STATIC      ((sqlite3_destructor_type)0)
#define SQLITE_TRANSIENT   ((sqlite3_destructor_type)-1)

</pre></blockquote>
<p>
These are special value for the destructor that is passed in as the
final argument to routines like 
<a href="#sqlite3_result_blob">sqlite3_result_blob()</a>.  If the destructor
argument is SQLITE_STATIC, it means that the content pointer is constant
and will never change.  It does not need to be destroyed.  The
SQLITE_TRANSIENT value means that the content will likely change in
the near future and that SQLite should make its own private copy of
the content before returning.</p>

<p>The typedef is necessary to work around problems in certain
C++ compilers.  See ticket #2191.
</p>
<hr>
<a name="SQLITE_SYNC_DATAONLY"></a>
<h2>Synchronization Type Flags</h2>
<blockquote><pre>
#define SQLITE_SYNC_NORMAL        0x00002
#define SQLITE_SYNC_FULL          0x00003
#define SQLITE_SYNC_DATAONLY      0x00010

</pre></blockquote>
<p>
When SQLite invokes the xSync() method of an

<a href="#sqlite3_io_methods">sqlite3_io_methods</a> object it uses a combination of the
these integer values as the second argument.</p>

<p>When the SQLITE_SYNC_DATAONLY flag is used, it means that the
sync operation only needs to flush data to mass storage.  Inode
information need not be flushed. The SQLITE_SYNC_NORMAL means
to use normal fsync() semantics. The SQLITE_SYNC_FULL flag means
to use Mac OS-X style fullsync instead of fsync().
</p>
<hr>
<a name="SQLITE_TESTCTRL_FAULT_BENIGN_FAILURES"></a>
<h2>Testing Interface Operation Codes</h2>
<blockquote><pre>
#define SQLITE_TESTCTRL_FAULT_CONFIG             1
#define SQLITE_TESTCTRL_FAULT_FAILURES           2
#define SQLITE_TESTCTRL_FAULT_BENIGN_FAILURES    3
#define SQLITE_TESTCTRL_FAULT_PENDING            4

</pre></blockquote>
<p>
These constants are the valid operation code parameters used
as the first argument to 
<a href="#sqlite3_test_control">sqlite3_test_control()</a>.</p>

<p>These parameters and their meansing are subject to change
without notice.  These values are for testing purposes only.
Applications should not use any of these parameters or the

<a href="#sqlite3_test_control">sqlite3_test_control()</a> interface.
</p>
<hr>
<a name="SQLITE_VERSION"></a>
<h2>Compile-Time Library Version Numbers</h2>
<blockquote><pre>
#define SQLITE_VERSION         "3.5.6"
#define SQLITE_VERSION_NUMBER 3005006

</pre></blockquote>
<p>
The SQLITE_VERSION and SQLITE_VERSION_NUMBER #defines in
the sqlite3.h file specify the version of SQLite with which
that header file is associated.</p>

<p>The "version" of SQLite is a strong of the form "X.Y.Z".
The phrase "alpha" or "beta" might be appended after the Z.
The X value is major version number always 3 in SQLite3.
The X value only changes when  backwards compatibility is
broken and we intend to never break
backwards compatibility.  The Y value is the minor version
number and only changes when
there are major feature enhancements that are forwards compatible
but not backwards compatible.  The Z value is release number
and is incremented with
each release but resets back to 0 when Y is incremented.</p>

<p>See also: 
<a href="#sqlite3_libversion">sqlite3_libversion()</a> and 
<a href="#sqlite3_libversion">sqlite3_libversion_number()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F10011</td> 
<td valign="top">
The SQLITE_VERSION #define in the sqlite3.h header file
evaluates to a string literal that is the SQLite version
with which the header file is associated.</td></tr>
<tr><td valign="top">F10014</td> 
<td valign="top">
The SQLITE_VERSION_NUMBER #define resolves to an integer
with the value  (X*1000000 + Y*1000 + Z) where X, Y, and
Z are the major version, minor version, and release number.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_int64"></a>
<h2>64-Bit Integer Types</h2>
<blockquote><pre>
#ifdef SQLITE_INT64_TYPE
  typedef SQLITE_INT64_TYPE sqlite_int64;
  typedef unsigned SQLITE_INT64_TYPE sqlite_uint64;
#elif defined(_MSC_VER) || defined(__BORLANDC__)
  typedef __int64 sqlite_int64;
  typedef unsigned __int64 sqlite_uint64;
#else
  typedef long long int sqlite_int64;
  typedef unsigned long long int sqlite_uint64;
#endif
typedef sqlite_int64 sqlite3_int64;
typedef sqlite_uint64 sqlite3_uint64;

</pre></blockquote>
<p>
Because there is no cross-platform way to specify 64-bit integer types
SQLite includes typedefs for 64-bit signed and unsigned integers.</p>

<p>The sqlite3_int64 and sqlite3_uint64 are the preferred type
definitions.  The sqlite_int64 and sqlite_uint64 types are
supported for backwards compatibility only.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F10201</td> 
<td valign="top">
The 
<a href="#sqlite3_int64">sqlite_int64</a> and 
<a href="#sqlite3_int64">sqlite3_int64</a> types specify a
64-bit signed integer.</td></tr>
<tr><td valign="top">F10202</td> 
<td valign="top">
The 
<a href="#sqlite3_int64">sqlite_uint64</a> and 
<a href="#sqlite3_int64">sqlite3_uint64</a> types specify
a 64-bit unsigned integer.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3"></a>
<h2>Database Connection Handle</h2>
<blockquote><pre>
typedef struct sqlite3 sqlite3;

</pre></blockquote>
<p>
Each open SQLite database is represented by pointer to an instance of the
opaque structure named "sqlite3".  It is useful to think of an sqlite3
pointer as an object.  The 
<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open16()</a>, and

<a href="#sqlite3_open">sqlite3_open_v2()</a> interfaces are its constructors
and 
<a href="#sqlite3_close">sqlite3_close()</a> is its destructor.  There are many other interfaces
(such as 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a>, 
<a href="#sqlite3_create_function">sqlite3_create_function()</a>, and

<a href="#sqlite3_busy_timeout">sqlite3_busy_timeout()</a> to name but three) that are methods on this
object.
</p>
<hr>
<a name="sqlite3_stmt"></a>
<h2>SQL Statement Object</h2>
<blockquote><pre>
typedef struct sqlite3_stmt sqlite3_stmt;

</pre></blockquote>
<p>
An instance of this object represent single SQL statements.  This
object is variously known as a "prepared statement" or a
"compiled SQL statement" or simply as a "statement".</p>

<p>The life of a statement object goes something like this:</p>

<p><ol>
<li> Create the object using 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or a related
function.
<li> Bind values to host parameters using

<a href="#sqlite3_bind_blob">sqlite3_bind_* interfaces</a>.
<li> Run the SQL by calling 
<a href="#sqlite3_step">sqlite3_step()</a> one or more times.
<li> Reset the statement using 
<a href="#sqlite3_reset">sqlite3_reset()</a> then go back
to step 2.  Do this zero or more times.
<li> Destroy the object using 
<a href="#sqlite3_finalize">sqlite3_finalize()</a>.
</ol></p>

<p>Refer to documentation on individual methods above for additional
information.
</p>
<hr>
<a name="sqlite3_aggregate_count"></a>
<h2>Obsolete Functions</h2>
<blockquote><pre>
int sqlite3_aggregate_count(sqlite3_context*);
int sqlite3_expired(sqlite3_stmt*);
int sqlite3_transfer_bindings(sqlite3_stmt*, sqlite3_stmt*);
int sqlite3_global_recover(void);
void sqlite3_thread_cleanup(void);
int sqlite3_memory_alarm(void(*)(void*,sqlite3_int64,int),void*,sqlite3_int64);

</pre></blockquote>
<p>
These functions are all now obsolete.  In order to maintain
backwards compatibility with older code, we continue to support
these functions.  However, new development projects should avoid
the use of these functions.  To help encourage people to avoid
using these functions, we are not going to tell you want they do.
</p>
<hr>
<a name="sqlite3_bind_blob"></a>
<h2>Binding Values To Prepared Statements</h2>
<blockquote><pre>
int sqlite3_bind_blob(sqlite3_stmt*, int, const void*, int n, void(*)(void*));
int sqlite3_bind_double(sqlite3_stmt*, int, double);
int sqlite3_bind_int(sqlite3_stmt*, int, int);
int sqlite3_bind_int64(sqlite3_stmt*, int, sqlite3_int64);
int sqlite3_bind_null(sqlite3_stmt*, int);
int sqlite3_bind_text(sqlite3_stmt*, int, const char*, int n, void(*)(void*));
int sqlite3_bind_text16(sqlite3_stmt*, int, const void*, int, void(*)(void*));
int sqlite3_bind_value(sqlite3_stmt*, int, const sqlite3_value*);
int sqlite3_bind_zeroblob(sqlite3_stmt*, int, int n);

</pre></blockquote>
<p>
In the SQL strings input to 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> and its
variants, literals may be replace by a parameter in one
of these forms:</p>

<p><ul>
<li>  ?
<li>  ?NNN
<li>  :VVV
<li>  @VVV
<li>  $VVV
</ul></p>

<p>In the parameter forms shown above NNN is an integer literal,
VVV alpha-numeric parameter name.
The values of these parameters (also called "host parameter names"
or "SQL parameters")
can be set using the sqlite3_bind_*() routines defined here.</p>

<p>The first argument to the sqlite3_bind_*() routines always
is a pointer to the 
<a href="#sqlite3_stmt">sqlite3_stmt</a> object returned from

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or its variants. The second
argument is the index of the parameter to be set. The
first parameter has an index of 1.  When the same named
parameter is used more than once, second and subsequent
occurrences have the same index as the first occurrence.
The index for named parameters can be looked up using the

<a href="#sqlite3_bind_parameter_name">sqlite3_bind_parameter_name()</a> API if desired.  The index
for "?NNN" parameters is the value of NNN.
The NNN value must be between 1 and the compile-time
parameter SQLITE_MAX_VARIABLE_NUMBER (default value: 999).</p>

<p>The third argument is the value to bind to the parameter.</p>

<p>In those
routines that have a fourth argument, its value is the number of bytes
in the parameter.  To be clear: the value is the number of <u>bytes</u>
in the value, not the number of characters.   The number
of bytes does not include the zero-terminator at the end of strings.
If the fourth parameter is negative, the length of the string is
number of bytes up to the first zero terminator.</p>

<p>The fifth argument to sqlite3_bind_blob(), sqlite3_bind_text(), and
sqlite3_bind_text16() is a destructor used to dispose of the BLOB or
string after SQLite has finished with it. If the fifth argument is
the special value 
<a href="#SQLITE_STATIC">SQLITE_STATIC</a>, then SQLite assumes that the
information is in static, unmanaged space and does not need to be freed.
If the fifth argument has the value 
<a href="#SQLITE_STATIC">SQLITE_TRANSIENT</a>, then
SQLite makes its own private copy of the data immediately, before
the sqlite3_bind_*() routine returns.</p>

<p>The sqlite3_bind_zeroblob() routine binds a BLOB of length N that
is filled with zeros.  A zeroblob uses a fixed amount of memory
(just an integer to hold it size) while it is being processed.
Zeroblobs are intended to serve as place-holders for BLOBs whose
content is later written using

<a href="#sqlite3_blob_open">increment BLOB I/O</a> routines. A negative
value for the zeroblob results in a zero-length BLOB.</p>

<p>The sqlite3_bind_*() routines must be called after

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> (and its variants) or 
<a href="#sqlite3_reset">sqlite3_reset()</a> and
before 
<a href="#sqlite3_step">sqlite3_step()</a>.
Bindings are not cleared by the 
<a href="#sqlite3_reset">sqlite3_reset()</a> routine.
Unbound parameters are interpreted as NULL.</p>

<p>These routines return 
<a href="#SQLITE_ABORT">SQLITE_OK</a> on success or an error code if
anything goes wrong.  
<a href="#SQLITE_ABORT">SQLITE_RANGE</a> is returned if the parameter
index is out of range.  
<a href="#SQLITE_ABORT">SQLITE_NOMEM</a> is returned if malloc fails.

<a href="#SQLITE_ABORT">SQLITE_MISUSE</a> might be returned if these routines are called on a
virtual machine that is the wrong state or which has already been finalized.
Detection of misuse is unreliable.  Applications should not depend
on SQLITE_MISUSE returns.  SQLITE_MISUSE is intended to indicate a
a logic error in the application.  Future versions of SQLite might
panic rather than return SQLITE_MISUSE.</p>

<p>See also: 
<a href="#sqlite3_bind_parameter_count">sqlite3_bind_parameter_count()</a>,

<a href="#sqlite3_bind_parameter_name">sqlite3_bind_parameter_name()</a>, and

<a href="#sqlite3_bind_parameter_index">sqlite3_bind_parameter_index()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13506</td> 
<td valign="top">
The 
<a href="#sqlite3_prepare">SQL statement compiler</a> recognizes
tokens of the forms "?", "?NNN", "$VVV", ":VVV", and "@VVV"
as SQL parameters, where NNN is any sequence of one or more
digits and where VVV is any sequence of one or more
alphanumeric characters or "::" optionally followed by
a string containing no spaces and contained within parentheses.</td></tr>
<tr><td valign="top">F13509</td> 
<td valign="top">
The initial value of an SQL parameter is NULL.</td></tr>
<tr><td valign="top">F13512</td> 
<td valign="top">
The index of an "?" SQL parameter is one larger than the
largest index of SQL parameter to the left, or 1 if
the "?" is the leftmost SQL parameter.</td></tr>
<tr><td valign="top">F13515</td> 
<td valign="top">
The index of an "?NNN" SQL parameter is the integer NNN.</td></tr>
<tr><td valign="top">F13518</td> 
<td valign="top">
The index of an ":VVV", "$VVV", or "@VVV" SQL parameter is
the same as the index of leftmost occurances of the same
parameter, or one more than the largest index over all
parameters to the left if this is the first occurrance
of this parameter, or 1 if this is the leftmost parameter.</td></tr>
<tr><td valign="top">F13521</td> 
<td valign="top">
The 
<a href="#sqlite3_prepare">SQL statement compiler</a> fail with
an 
<a href="#SQLITE_ABORT">SQLITE_RANGE</a> error if the index of an SQL parameter
is less than 1 or greater than SQLITE_MAX_VARIABLE_NUMBER.</td></tr>
<tr><td valign="top">F13524</td> 
<td valign="top">
Calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind(S,N,V,...)</a>
associate the value V with all SQL parameters having an
index of N in the 
<a href="#sqlite3_stmt">prepared statement</a> S.</td></tr>
<tr><td valign="top">F13527</td> 
<td valign="top">
Calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind(S,N,...)</a>
override prior calls with the same values of S and N.</td></tr>
<tr><td valign="top">F13530</td> 
<td valign="top">
Bindings established by 
<a href="#sqlite3_bind_blob">sqlite3_bind(S,...)</a>
persist across calls to 
<a href="#sqlite3_reset">sqlite3_reset(S)</a>.</td></tr>
<tr><td valign="top">F13533</td> 
<td valign="top">
In calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind_blob(S,N,V,L,D)</a>,

<a href="#sqlite3_bind_blob">sqlite3_bind_text(S,N,V,L,D)</a>, or

<a href="#sqlite3_bind_blob">sqlite3_bind_text16(S,N,V,L,D)</a> SQLite binds the first L
bytes of the blob or string pointed to by V, when L
is non-negative.</td></tr>
<tr><td valign="top">F13536</td> 
<td valign="top">
In calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind_text(S,N,V,L,D)</a> or

<a href="#sqlite3_bind_blob">sqlite3_bind_text16(S,N,V,L,D)</a> SQLite binds characters
from V through the first zero character when L is negative.</td></tr>
<tr><td valign="top">F13539</td> 
<td valign="top">
In calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind_blob(S,N,V,L,D)</a>,

<a href="#sqlite3_bind_blob">sqlite3_bind_text(S,N,V,L,D)</a>, or

<a href="#sqlite3_bind_blob">sqlite3_bind_text16(S,N,V,L,D)</a> when D is the special
constant 
<a href="#SQLITE_STATIC">SQLITE_STATIC</a>, SQLite assumes that the value V
is held in static unmanaged space that will not change
during the lifetime of the binding.</td></tr>
<tr><td valign="top">F13542</td> 
<td valign="top">
In calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind_blob(S,N,V,L,D)</a>,

<a href="#sqlite3_bind_blob">sqlite3_bind_text(S,N,V,L,D)</a>, or

<a href="#sqlite3_bind_blob">sqlite3_bind_text16(S,N,V,L,D)</a> when D is the special
constant 
<a href="#SQLITE_STATIC">SQLITE_TRANSIENT</a>, the routine makes a
private copy of V value before it returns.</td></tr>
<tr><td valign="top">F13545</td> 
<td valign="top">
In calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind_blob(S,N,V,L,D)</a>,

<a href="#sqlite3_bind_blob">sqlite3_bind_text(S,N,V,L,D)</a>, or

<a href="#sqlite3_bind_blob">sqlite3_bind_text16(S,N,V,L,D)</a> when D is a pointer to
a function, SQLite invokes that function to destroy the
V value after it has finished using the V value.</td></tr>
<tr><td valign="top">F13548</td> 
<td valign="top">
In calls to 
<a href="#sqlite3_bind_blob">sqlite3_bind_zeroblob(S,N,V,L)</a> the value bound
is a blob of L bytes, or a zero-length blob if L is negative.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_collation_needed"></a>
<h2>Collation Needed Callbacks</h2>
<blockquote><pre>
int sqlite3_collation_needed(
  sqlite3*, 
  void*, 
  void(*)(void*,sqlite3*,int eTextRep,const char*)
);
int sqlite3_collation_needed16(
  sqlite3*, 
  void*,
  void(*)(void*,sqlite3*,int eTextRep,const void*)
);

</pre></blockquote>
<p></p>

<p>To avoid having to register all collation sequences before a database
can be used, a single callback function may be registered with the
database handle to be called whenever an undefined collation sequence is
required.</p>

<p>If the function is registered using the sqlite3_collation_needed() API,
then it is passed the names of undefined collation sequences as strings
encoded in UTF-8. If sqlite3_collation_needed16() is used, the names
are passed as UTF-16 in machine native byte order. A call to either
function replaces any existing callback.</p>

<p> When the callback is invoked, the first argument passed is a copy
of the second argument to sqlite3_collation_needed() or
sqlite3_collation_needed16(). The second argument is the database
handle. The third argument is one of 
<a href="#SQLITE_ANY">SQLITE_UTF8</a>,

<a href="#SQLITE_ANY">SQLITE_UTF16BE</a>, or 
<a href="#SQLITE_ANY">SQLITE_UTF16LE</a>, indicating the most
desirable form of the collation sequence function required.
 The fourth parameter is the name of the
required collation sequence.</p>

<p>The callback function should register the desired collation using

<a href="#sqlite3_create_collation">sqlite3_create_collation()</a>, 
<a href="#sqlite3_create_collation">sqlite3_create_collation16()</a>, or

<a href="#sqlite3_create_collation">sqlite3_create_collation_v2()</a>.
</p>
<hr>
<a name="sqlite3_column_blob"></a>
<h2>Results Values From A Query</h2>
<blockquote><pre>
const void *sqlite3_column_blob(sqlite3_stmt*, int iCol);
int sqlite3_column_bytes(sqlite3_stmt*, int iCol);
int sqlite3_column_bytes16(sqlite3_stmt*, int iCol);
double sqlite3_column_double(sqlite3_stmt*, int iCol);
int sqlite3_column_int(sqlite3_stmt*, int iCol);
sqlite3_int64 sqlite3_column_int64(sqlite3_stmt*, int iCol);
const unsigned char *sqlite3_column_text(sqlite3_stmt*, int iCol);
const void *sqlite3_column_text16(sqlite3_stmt*, int iCol);
int sqlite3_column_type(sqlite3_stmt*, int iCol);
sqlite3_value *sqlite3_column_value(sqlite3_stmt*, int iCol);

</pre></blockquote>
<p>
These routines form the "result set query" interface.</p>

<p>These routines return information about
a single column of the current result row of a query.  In every
case the first argument is a pointer to the

<a href="#sqlite3_stmt">prepared statement</a> that is being
evaluated (the 
<a href="#sqlite3_stmt">sqlite3_stmt*</a> that was returned from

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> or one of its variants) and
the second argument is the index of the column for which information
should be returned.  The left-most column of the result set
has an index of 0.</p>

<p>If the SQL statement is not currently point to a valid row, or if the
the column index is out of range, the result is undefined.
These routines may only be called when the most recent call to

<a href="#sqlite3_step">sqlite3_step()</a> has returned 
<a href="#SQLITE_ABORT">SQLITE_ROW</a> and neither

<a href="#sqlite3_reset">sqlite3_reset()</a> nor 
<a href="#sqlite3_finalize">sqlite3_finalize()</a> has been call subsequently.
If any of these routines are called after 
<a href="#sqlite3_reset">sqlite3_reset()</a> or

<a href="#sqlite3_finalize">sqlite3_finalize()</a> or after 
<a href="#sqlite3_step">sqlite3_step()</a> has returned
something other than 
<a href="#SQLITE_ABORT">SQLITE_ROW</a>, the results are undefined.
If 
<a href="#sqlite3_step">sqlite3_step()</a> or 
<a href="#sqlite3_reset">sqlite3_reset()</a> or 
<a href="#sqlite3_finalize">sqlite3_finalize()</a>
are called from a different thread while any of these routines
are pending, then the results are undefined.</p>

<p>The sqlite3_column_type() routine returns

<a href="#SQLITE_BLOB">datatype code</a> for the initial data type
of the result column.  The returned value is one of 
<a href="#SQLITE_BLOB">SQLITE_INTEGER</a>,

<a href="#SQLITE_BLOB">SQLITE_FLOAT</a>, 
<a href="#SQLITE_BLOB">SQLITE_TEXT</a>, 
<a href="#SQLITE_BLOB">SQLITE_BLOB</a>, or 
<a href="#SQLITE_BLOB">SQLITE_NULL</a>.  The value
returned by sqlite3_column_type() is only meaningful if no type
conversions have occurred as described below.  After a type conversion,
the value returned by sqlite3_column_type() is undefined.  Future
versions of SQLite may change the behavior of sqlite3_column_type()
following a type conversion.</p>

<p>If the result is a BLOB or UTF-8 string then the sqlite3_column_bytes()
routine returns the number of bytes in that BLOB or string.
If the result is a UTF-16 string, then sqlite3_column_bytes() converts
the string to UTF-8 and then returns the number of bytes.
If the result is a numeric value then sqlite3_column_bytes() uses

<a href="#sqlite3_mprintf">sqlite3_snprintf()</a> to convert that value to a UTF-8 string and returns
the number of bytes in that string.
The value returned does not include the zero terminator at the end
of the string.  For clarity: the value returned is the number of
bytes in the string, not the number of characters.</p>

<p>Strings returned by sqlite3_column_text() and sqlite3_column_text16(),
even empty strings, are always zero terminated.  The return
value from sqlite3_column_blob() for a zero-length blob is an arbitrary
pointer, possibly even a NULL pointer.</p>

<p>The sqlite3_column_bytes16() routine is similar to sqlite3_column_bytes()
but leaves the result in UTF-16 in native byte order instead of UTF-8.
The zero terminator is not included in this count.</p>

<p>These routines attempt to convert the value where appropriate.  For
example, if the internal representation is FLOAT and a text result
is requested, 
<a href="#sqlite3_mprintf">sqlite3_snprintf()</a> is used internally to do the conversion
automatically.  The following table details the conversions that
are applied:</p>

<p><blockquote>
<table border="1">
<tr><th> Internal<br>Type <th> Requested<br>Type <th>  Conversion</p>

<p><tr><td>  NULL    <td> INTEGER   <td> Result is 0
<tr><td>  NULL    <td>  FLOAT    <td> Result is 0.0
<tr><td>  NULL    <td>   TEXT    <td> Result is NULL pointer
<tr><td>  NULL    <td>   BLOB    <td> Result is NULL pointer
<tr><td> INTEGER  <td>  FLOAT    <td> Convert from integer to float
<tr><td> INTEGER  <td>   TEXT    <td> ASCII rendering of the integer
<tr><td> INTEGER  <td>   BLOB    <td> Same as for INTEGER->TEXT
<tr><td>  FLOAT   <td> INTEGER   <td> Convert from float to integer
<tr><td>  FLOAT   <td>   TEXT    <td> ASCII rendering of the float
<tr><td>  FLOAT   <td>   BLOB    <td> Same as FLOAT->TEXT
<tr><td>  TEXT    <td> INTEGER   <td> Use atoi()
<tr><td>  TEXT    <td>  FLOAT    <td> Use atof()
<tr><td>  TEXT    <td>   BLOB    <td> No change
<tr><td>  BLOB    <td> INTEGER   <td> Convert to TEXT then use atoi()
<tr><td>  BLOB    <td>  FLOAT    <td> Convert to TEXT then use atof()
<tr><td>  BLOB    <td>   TEXT    <td> Add a zero terminator if needed
</table>
</blockquote></p>

<p>The table above makes reference to standard C library functions atoi()
and atof().  SQLite does not really use these functions.  It has its
on equavalent internal routines.  The atoi() and atof() names are
used in the table for brevity and because they are familiar to most
C programmers.</p>

<p>Note that when type conversions occur, pointers returned by prior
calls to sqlite3_column_blob(), sqlite3_column_text(), and/or
sqlite3_column_text16() may be invalidated.
Type conversions and pointer invalidations might occur
in the following cases:</p>

<p><ul>
<li><p>  The initial content is a BLOB and sqlite3_column_text()
or sqlite3_column_text16() is called.  A zero-terminator might
need to be added to the string.</p></li></p>

<p><li><p>  The initial content is UTF-8 text and sqlite3_column_bytes16() or
sqlite3_column_text16() is called.  The content must be converted
to UTF-16.</p></li></p>

<p><li><p>  The initial content is UTF-16 text and sqlite3_column_bytes() or
sqlite3_column_text() is called.  The content must be converted
to UTF-8.</p></li>
</ul></p>

<p>Conversions between UTF-16be and UTF-16le are always done in place and do
not invalidate a prior pointer, though of course the content of the buffer
that the prior pointer points to will have been modified.  Other kinds
of conversion are done in place when it is possible, but sometime it is
not possible and in those cases prior pointers are invalidated.</p>

<p>The safest and easiest to remember policy is to invoke these routines
in one of the following ways:</p>

<p><ul>
<li>sqlite3_column_text() followed by sqlite3_column_bytes()</li>
<li>sqlite3_column_blob() followed by sqlite3_column_bytes()</li>
<li>sqlite3_column_text16() followed by sqlite3_column_bytes16()</li>
</ul></p>

<p>In other words, you should call sqlite3_column_text(), sqlite3_column_blob(),
or sqlite3_column_text16() first to force the result into the desired
format, then invoke sqlite3_column_bytes() or sqlite3_column_bytes16() to
find the size of the result.  Do not mix call to sqlite3_column_text() or
sqlite3_column_blob() with calls to sqlite3_column_bytes16().  And do not
mix calls to sqlite3_column_text16() with calls to sqlite3_column_bytes().</p>

<p>The pointers returned are valid until a type conversion occurs as
described above, or until 
<a href="#sqlite3_step">sqlite3_step()</a> or 
<a href="#sqlite3_reset">sqlite3_reset()</a> or

<a href="#sqlite3_finalize">sqlite3_finalize()</a> is called.  The memory space used to hold strings
and blobs is freed automatically.  Do <b>not</b> pass the pointers returned

<a href="#sqlite3_column_blob">sqlite3_column_blob()</a>, 
<a href="#sqlite3_column_blob">sqlite3_column_text()</a>, etc. into

<a href="#sqlite3_free">sqlite3_free()</a>.</p>

<p>If a memory allocation error occurs during the evaluation of any
of these routines, a default value is returned.  The default value
is either the integer 0, the floating point number 0.0, or a NULL
pointer.  Subsequent calls to 
<a href="#sqlite3_errcode">sqlite3_errcode()</a> will return

<a href="#SQLITE_ABORT">SQLITE_NOMEM</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13803</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_blob(S,N)</a> interface converts the
Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S into a blob and then returns a
pointer to the converted value.</td></tr>
<tr><td valign="top">F13806</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_bytes(S,N)</a> interface returns the
number of bytes in the blob or string (exclusive of the
zero terminator on the string) that was returned by the
most recent call to 
<a href="#sqlite3_column_blob">sqlite3_column_blob(S,N)</a> or

<a href="#sqlite3_column_blob">sqlite3_column_text(S,N)</a>.</td></tr>
<tr><td valign="top">F13809</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_bytes16(S,N)</a> interface returns the
number of bytes in the string (exclusive of the
zero terminator on the string) that was returned by the
most recent call to 
<a href="#sqlite3_column_blob">sqlite3_column_text16(S,N)</a>.</td></tr>
<tr><td valign="top">F13812</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_double(S,N)</a> interface converts the
Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S into a floating point value and
returns a copy of that value.</td></tr>
<tr><td valign="top">F13815</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_int(S,N)</a> interface converts the
Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S into a 32-bit signed integer and
returns a copy of that integer.</td></tr>
<tr><td valign="top">F13818</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_int64(S,N)</a> interface converts the
Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S into a 64-bit signed integer and
returns a copy of that integer.</td></tr>
<tr><td valign="top">F13821</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_text(S,N)</a> interface converts the
Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S into a zero-terminated UTF-8
string and returns a pointer to that string.</td></tr>
<tr><td valign="top">F13824</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_text16(S,N)</a> interface converts the
Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S into a zero-terminated 2-byte
aligned UTF-16 native byte order
string and returns a pointer to that string.</td></tr>
<tr><td valign="top">F13827</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_type(S,N)</a> interface returns
one of 
<a href="#SQLITE_BLOB">SQLITE_NULL</a>, 
<a href="#SQLITE_BLOB">SQLITE_INTEGER</a>, 
<a href="#SQLITE_BLOB">SQLITE_FLOAT</a>,

<a href="#SQLITE_BLOB">SQLITE_TEXT</a>, or 
<a href="#SQLITE_BLOB">SQLITE_BLOB</a> as appropriate for
the Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S.</td></tr>
<tr><td valign="top">F13830</td> 
<td valign="top">
The 
<a href="#sqlite3_column_blob">sqlite3_column_value(S,N)</a> interface returns a
pointer to the 
<a href="#sqlite3_value">sqlite3_value</a> object that for the
Nth column in the current row of the result set for

<a href="#sqlite3_stmt">prepared statement</a> S.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_column_database_name"></a>
<h2>Source Of Data In A Query Result</h2>
<blockquote><pre>
const char *sqlite3_column_database_name(sqlite3_stmt*,int);
const void *sqlite3_column_database_name16(sqlite3_stmt*,int);
const char *sqlite3_column_table_name(sqlite3_stmt*,int);
const void *sqlite3_column_table_name16(sqlite3_stmt*,int);
const char *sqlite3_column_origin_name(sqlite3_stmt*,int);
const void *sqlite3_column_origin_name16(sqlite3_stmt*,int);

</pre></blockquote>
<p>
These routines provide a means to determine what column of what
table in which database a result of a SELECT statement comes from.
The name of the database or table or column can be returned as
either a UTF8 or UTF16 string.  The _database_ routines return
the database name, the _table_ routines return the table name, and
the origin_ routines return the column name.
The returned string is valid until
the 
<a href="#sqlite3_stmt">prepared statement</a> is destroyed using

<a href="#sqlite3_finalize">sqlite3_finalize()</a> or until the same information is requested
again in a different encoding.</p>

<p>The names returned are the original un-aliased names of the
database, table, and column.</p>

<p>The first argument to the following calls is a 
<a href="#sqlite3_stmt">prepared statement</a>.
These functions return information about the Nth column returned by
the statement, where N is the second function argument.</p>

<p>If the Nth column returned by the statement is an expression
or subquery and is not a column value, then all of these functions
return NULL.  These routine might also return NULL if a memory
allocation error occurs.  Otherwise, they return the
name of the attached database, table and column that query result
column was extracted from.</p>

<p>As with all other SQLite APIs, those postfixed with "16" return
UTF-16 encoded strings, the other functions return UTF-8.</p>

<p>These APIs are only available if the library was compiled with the
SQLITE_ENABLE_COLUMN_METADATA preprocessor symbol defined.</p>

<p>If two or more threads call one or more of these routines against the same
prepared statement and column at the same time then the results are
undefined.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13741</td> 
<td valign="top">
The 
<a href="#sqlite3_column_database_name">sqlite3_column_database_name(S,N)</a> interface returns either
the UTF-8 zero-terminated name of the database from which the
Nth result column of 
<a href="#sqlite3_stmt">prepared statement</a> S
is extracted, or NULL if the the Nth column of S is a
general expression or if unable to allocate memory
to store the name.</td></tr>
<tr><td valign="top">F13742</td> 
<td valign="top">
The 
<a href="#sqlite3_column_database_name">sqlite3_column_database_name16(S,N)</a> interface returns either
the UTF-16 native byte order
zero-terminated name of the database from which the
Nth result column of 
<a href="#sqlite3_stmt">prepared statement</a> S
is extracted, or NULL if the the Nth column of S is a
general expression or if unable to allocate memory
to store the name.</td></tr>
<tr><td valign="top">F13743</td> 
<td valign="top">
The 
<a href="#sqlite3_column_database_name">sqlite3_column_table_name(S,N)</a> interface returns either
the UTF-8 zero-terminated name of the table from which the
Nth result column of 
<a href="#sqlite3_stmt">prepared statement</a> S
is extracted, or NULL if the the Nth column of S is a
general expression or if unable to allocate memory
to store the name.</td></tr>
<tr><td valign="top">F13744</td> 
<td valign="top">
The 
<a href="#sqlite3_column_database_name">sqlite3_column_table_name16(S,N)</a> interface returns either
the UTF-16 native byte order
zero-terminated name of the table from which the
Nth result column of 
<a href="#sqlite3_stmt">prepared statement</a> S
is extracted, or NULL if the the Nth column of S is a
general expression or if unable to allocate memory
to store the name.</td></tr>
<tr><td valign="top">F13745</td> 
<td valign="top">
The 
<a href="#sqlite3_column_database_name">sqlite3_column_origin_name(S,N)</a> interface returns either
the UTF-8 zero-terminated name of the table column from which the
Nth result column of 
<a href="#sqlite3_stmt">prepared statement</a> S
is extracted, or NULL if the the Nth column of S is a
general expression or if unable to allocate memory
to store the name.</td></tr>
<tr><td valign="top">F13746</td> 
<td valign="top">
The 
<a href="#sqlite3_column_database_name">sqlite3_column_origin_name16(S,N)</a> interface returns either
the UTF-16 native byte order
zero-terminated name of the table column from which the
Nth result column of 
<a href="#sqlite3_stmt">prepared statement</a> S
is extracted, or NULL if the the Nth column of S is a
general expression or if unable to allocate memory
to store the name.</td></tr>
<tr><td valign="top">F13748</td> 
<td valign="top">
The return values from

<a href="#sqlite3_column_database_name">column metadata interfaces</a>
are valid
for the lifetime of the 
<a href="#sqlite3_stmt">prepared statement</a>
or until the encoding is changed by another metadata
interface call for the same prepared statement and column.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U13751</td> 
<td valign="top">
If two or more threads call one or more

<a href="#sqlite3_column_database_name">column metadata interfaces</a>
the same 
<a href="#sqlite3_stmt">prepared statement</a> and result column
at the same time then the results are undefined.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_column_decltype"></a>
<h2>Declared Datatype Of A Query Result</h2>
<blockquote><pre>
const char *sqlite3_column_decltype(sqlite3_stmt*,int);
const void *sqlite3_column_decltype16(sqlite3_stmt*,int);

</pre></blockquote>
<p>
The first parameter is a 
<a href="#sqlite3_stmt">prepared statement</a>.
If this statement is a SELECT statement and the Nth column of the
returned result set of that SELECT is a table column (not an
expression or subquery) then the declared type of the table
column is returned.  If the Nth column of the result set is an
expression or subquery, then a NULL pointer is returned.
The returned string is always UTF-8 encoded.
For example, in the database schema:</p>

<p>CREATE TABLE t1(c1 VARIANT);</p>

<p>And the following statement compiled:</p>

<p>SELECT c1 + 1, c1 FROM t1;</p>

<p>Then this routine would return the string "VARIANT" for the second
result column (i==1), and a NULL pointer for the first result column
(i==0).</p>

<p>SQLite uses dynamic run-time typing.  So just because a column
is declared to contain a particular type does not mean that the
data stored in that column is of the declared type.  SQLite is
strongly typed, but the typing is dynamic not static.  Type
is associated with individual values, not with the containers
used to hold those values.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13761</td> 
<td valign="top">
A successful call to 
<a href="#sqlite3_column_decltype">sqlite3_column_decltype(S,N)</a>
returns a zero-terminated UTF-8 string containing the
the declared datatype of the table column that appears
as the Nth column (numbered from 0) of the result set to the

<a href="#sqlite3_stmt">prepared statement</a> S.</td></tr>
<tr><td valign="top">F13762</td> 
<td valign="top">
A successful call to 
<a href="#sqlite3_column_decltype">sqlite3_column_decltype16(S,N)</a>
returns a zero-terminated UTF-16 native byte order string
containing the declared datatype of the table column that appears
as the Nth column (numbered from 0) of the result set to the

<a href="#sqlite3_stmt">prepared statement</a> S.</td></tr>
<tr><td valign="top">F13763</td> 
<td valign="top">
If N is less than 0 or N is greater than or equal to
the number of columns in 
<a href="#sqlite3_stmt">prepared statement</a> S
or if the Nth column of S is an expression or subquery rather
than a table column or if a memory allocation failure
occurs during encoding conversions, then
calls to 
<a href="#sqlite3_column_decltype">sqlite3_column_decltype(S,N)</a> or

<a href="#sqlite3_column_decltype">sqlite3_column_decltype16(S,N)</a> return NULL.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_column_name"></a>
<h2>Column Names In A Result Set</h2>
<blockquote><pre>
const char *sqlite3_column_name(sqlite3_stmt*, int N);
const void *sqlite3_column_name16(sqlite3_stmt*, int N);

</pre></blockquote>
<p>
These routines return the name assigned to a particular column
in the result set of a SELECT statement.  The sqlite3_column_name()
interface returns a pointer to a zero-terminated UTF8 string
and sqlite3_column_name16() returns a pointer to a zero-terminated
UTF16 string.  The first parameter is the

<a href="#sqlite3_stmt">prepared statement</a> that implements the SELECT statement.
The second parameter is the column number.  The left-most column is
number 0.</p>

<p>The returned string pointer is valid until either the

<a href="#sqlite3_stmt">prepared statement</a> is destroyed by 
<a href="#sqlite3_finalize">sqlite3_finalize()</a>
or until the next call sqlite3_column_name() or sqlite3_column_name16()
on the same column.</p>

<p>If sqlite3_malloc() fails during the processing of either routine
(for example during a conversion from UTF-8 to UTF-16) then a
NULL pointer is returned.</p>

<p>The name of a result column is the value of the "AS" clause for
that column, if there is an AS clause.  If there is no AS clause
then the name of the column is unspecified and may change from
one release of SQLite to the next.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13721</td> 
<td valign="top">
A successful invocation of the 
<a href="#sqlite3_column_name">sqlite3_column_name(S,N)</a>
interface returns the name
of the Nth column (where 0 is the left-most column) for the
result set of 
<a href="#sqlite3_stmt">prepared statement</a> S as a
zero-terminated UTF-8 string.</td></tr>
<tr><td valign="top">F13723</td> 
<td valign="top">
A successful invocation of the 
<a href="#sqlite3_column_name">sqlite3_column_name16(S,N)</a>
interface returns the name
of the Nth column (where 0 is the left-most column) for the
result set of 
<a href="#sqlite3_stmt">prepared statement</a> S as a
zero-terminated UTF-16 string in the native byte order.</td></tr>
<tr><td valign="top">F13724</td> 
<td valign="top">
The 
<a href="#sqlite3_column_name">sqlite3_column_name()</a> and 
<a href="#sqlite3_column_name">sqlite3_column_name16()</a>
interfaces return a NULL pointer if they are unable to
allocate memory memory to hold there normal return strings.</td></tr>
<tr><td valign="top">F13725</td> 
<td valign="top">
If the N parameter to 
<a href="#sqlite3_column_name">sqlite3_column_name(S,N)</a> or

<a href="#sqlite3_column_name">sqlite3_column_name16(S,N)</a> is out of range, then the
interfaces returns a NULL pointer.</td></tr>
<tr><td valign="top">F13726</td> 
<td valign="top">
The strings returned by 
<a href="#sqlite3_column_name">sqlite3_column_name(S,N)</a> and

<a href="#sqlite3_column_name">sqlite3_column_name16(S,N)</a> are valid until the next
call to either routine with the same S and N parameters
or until 
<a href="#sqlite3_finalize">sqlite3_finalize(S)</a> is called.</td></tr>
<tr><td valign="top">F13727</td> 
<td valign="top">
When a result column of a 
<a href="lang_select.html">SELECT</a> statement contains
an AS clause, the name of that column is the indentifier
to the right of the AS keyword.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_commit_hook"></a>
<h2>Commit And Rollback Notification Callbacks</h2>
<blockquote><pre>
void *sqlite3_commit_hook(sqlite3*, int(*)(void*), void*);
void *sqlite3_rollback_hook(sqlite3*, void(*)(void *), void*);

</pre></blockquote>
<p>
 The sqlite3_commit_hook() interface registers a callback
function to be invoked whenever a transaction is committed.
 Any callback set by a previous call to sqlite3_commit_hook()
for the same database connection is overridden.
 The sqlite3_rollback_hook() interface registers a callback
function to be invoked whenever a transaction is committed.
 Any callback set by a previous call to sqlite3_commit_hook()
for the same database connection is overridden.
 The pArg argument is passed through
to the callback. If the callback on a commit hook function
returns non-zero, then the commit is converted into a rollback.</p>

<p> If another function was previously registered, its
pArg value is returned.  Otherwise NULL is returned.</p>

<p> Registering a NULL function disables the callback.</p>

<p> For the purposes of this API, a transaction is said to have been
rolled back if an explicit "ROLLBACK" statement is executed, or
an error or constraint causes an implicit rollback to occur.
 The rollback callback is not invoked if a transaction is
automatically rolled back because the database connection is closed.
 The rollback callback is not invoked if a transaction is
rolled back because a commit callback returned non-zero.
<font color="red">(TODO:  Check on this )</font></p>

<p>These are experimental interfaces and are subject to change.
</p>
<hr>
<a name="sqlite3_complete"></a>
<h2>Determine If An SQL Statement Is Complete</h2>
<blockquote><pre>
int sqlite3_complete(const char *sql);
int sqlite3_complete16(const void *sql);

</pre></blockquote>
<p>
These routines are useful for command-line input to determine if the
currently entered text seems to form complete a SQL statement or
if additional input is needed before sending the text into
SQLite for parsing.  These routines return true if the input string
appears to be a complete SQL statement.  A statement is judged to be
complete if it ends with a semicolon token and is not a fragment of a
CREATE TRIGGER statement.  Semicolons that are embedded within
string literals or quoted identifier names or comments are not
independent tokens (they are part of the token in which they are
embedded) and thus do not count as a statement terminator.</p>

<p>These routines do not parse the SQL and
so will not detect syntactically incorrect SQL.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F10511</td> 
<td valign="top">
The sqlite3_complete() and sqlite3_complete16() functions
return true (non-zero) if and only if the last
non-whitespace token in their input is a semicolon that
is not in between the BEGIN and END of a CREATE TRIGGER
statement.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U10512</td> 
<td valign="top">
The input to sqlite3_complete() must be a zero-terminated
UTF-8 string.</td></tr>
<tr><td valign="top">U10513</td> 
<td valign="top">
The input to sqlite3_complete16() must be a zero-terminated
UTF-16 string in native byte order.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_create_collation"></a>
<h2>Define New Collating Sequences</h2>
<blockquote><pre>
int sqlite3_create_collation(
  sqlite3*, 
  const char *zName, 
  int eTextRep, 
  void*,
  int(*xCompare)(void*,int,const void*,int,const void*)
);
int sqlite3_create_collation_v2(
  sqlite3*, 
  const char *zName, 
  int eTextRep, 
  void*,
  int(*xCompare)(void*,int,const void*,int,const void*),
  void(*xDestroy)(void*)
);
int sqlite3_create_collation16(
  sqlite3*, 
  const char *zName, 
  int eTextRep, 
  void*,
  int(*xCompare)(void*,int,const void*,int,const void*)
);

</pre></blockquote>
<p></p>

<p>These functions are used to add new collation sequences to the

<a href="#sqlite3">sqlite3*</a> handle specified as the first argument.</p>

<p>The name of the new collation sequence is specified as a UTF-8 string
for sqlite3_create_collation() and sqlite3_create_collation_v2()
and a UTF-16 string for sqlite3_create_collation16(). In all cases
the name is passed as the second function argument.</p>

<p>The third argument may be one of the constants 
<a href="#SQLITE_ANY">SQLITE_UTF8</a>,

<a href="#SQLITE_ANY">SQLITE_UTF16LE</a> or 
<a href="#SQLITE_ANY">SQLITE_UTF16BE</a>, indicating that the user-supplied
routine expects to be passed pointers to strings encoded using UTF-8,
UTF-16 little-endian or UTF-16 big-endian respectively. The
third argument might also be 
<a href="#SQLITE_ANY">SQLITE_UTF16_ALIGNED</a> to indicate that
the routine expects pointers to 16-bit word aligned strings
of UTF16 in the native byte order of the host computer.</p>

<p>A pointer to the user supplied routine must be passed as the fifth
argument. If it is NULL, this is the same as deleting the collation
sequence (so that SQLite cannot call it anymore).
 Each time the application
supplied function is invoked, it is passed a copy of the void* passed as
the fourth argument to sqlite3_create_collation() or
sqlite3_create_collation16() as its first parameter.</p>

<p>The remaining arguments to the application-supplied routine are two strings,
each represented by a (length, data) pair and encoded in the encoding
that was passed as the third argument when the collation sequence was
registered. The application defined collation routine should
return negative, zero or positive if
the first string is less than, equal to, or greater than the second
string. i.e. (STRING1 - STRING2).</p>

<p>The sqlite3_create_collation_v2() works like sqlite3_create_collation()
excapt that it takes an extra argument which is a destructor for
the collation. The destructor is called when the collation is
destroyed and is passed a copy of the fourth parameter void* pointer
of the sqlite3_create_collation_v2().
  Collations are destroyed when
they are overridden by later calls to the collation creation functions
or when the 
<a href="#sqlite3">sqlite3*</a> database handle is closed using 
<a href="#sqlite3_close">sqlite3_close()</a>.
</p>
<hr>
<a name="sqlite3_errcode"></a>
<h2>Error Codes And Messages</h2>
<blockquote><pre>
int sqlite3_errcode(sqlite3 *db);
const char *sqlite3_errmsg(sqlite3*);
const void *sqlite3_errmsg16(sqlite3*);

</pre></blockquote>
<p>
The sqlite3_errcode() interface returns the numeric

<a href="#SQLITE_ABORT">result code</a> or 
<a href="#SQLITE_IOERR_BLOCKED">extended result code</a>
for the most recent failed sqlite3_* API call associated
with 
<a href="#sqlite3">sqlite3</a> handle 'db'. If a prior API call failed but the
most recent API call succeeded, the return value from sqlite3_errcode()
is undefined.</p>

<p>The sqlite3_errmsg() and sqlite3_errmsg16() return English-language
text that describes the error, as either UTF8 or UTF16 respectively.
Memory to hold the error message string is managed internally.
The application does not need to worry with freeing the result.
However, the error string might be overwritten or deallocated b
subsequent calls to other SQLite interface functions.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12801</td> 
<td valign="top">
The 
<a href="#sqlite3_errcode">sqlite3_errcode(D)</a> interface returns the numeric

<a href="#SQLITE_ABORT">result code</a> or

<a href="#SQLITE_IOERR_BLOCKED">extended result code</a>
for the most recent failed interface call associated
with 
<a href="#sqlite3">sqlite3</a> handle D.</td></tr>
<tr><td valign="top">U12802</td> 
<td valign="top">
If a prior API call failed but the most recent API call
succeeded, the return value from 
<a href="#sqlite3_errcode">sqlite3_errcode()</a>,

<a href="#sqlite3_errcode">sqlite3_errmsg()</a>, and 
<a href="#sqlite3_errcode">sqlite3_errmsg16()</a> are undefined.</td></tr>
<tr><td valign="top">F12803</td> 
<td valign="top">
The 
<a href="#sqlite3_errcode">sqlite3_errmsg(D)</a> and 
<a href="#sqlite3_errcode">sqlite3_errmsg16(D)</a>
interfaces return English-language text that describes
the error in the mostly recently failed interface call,
encoded as either UTF8 or UTF16 respectively.</td></tr>
<tr><td valign="top">U12804</td> 
<td valign="top">
The strings returned by 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a> and 
<a href="#sqlite3_errcode">sqlite3_errmsg16()</a>
are only valid until the next SQLite interface call.</td></tr>
<tr><td valign="top">F12807</td> 
<td valign="top">
Calls to 
<a href="#sqlite3_errcode">sqlite3_errcode()</a>, 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a>, and

<a href="#sqlite3_errcode">sqlite3_errmsg16()</a> themselves do not affect the
results of future invocations of these routines.</td></tr>
<tr><td valign="top">F12808</td> 
<td valign="top">
Calls to API routines that do not return an error code
(example: 
<a href="#sqlite3_data_count">sqlite3_data_count()</a>) do not
change the error code or message returned by

<a href="#sqlite3_errcode">sqlite3_errcode()</a>, 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a>, or 
<a href="#sqlite3_errcode">sqlite3_errmsg16()</a>.</td></tr>
<tr><td valign="top">F12809</td> 
<td valign="top">
Interfaces that are not associated with a specific

<a href="#sqlite3">database connection</a> (examples:

<a href="#sqlite3_mprintf">sqlite3_mprintf()</a> or 
<a href="#sqlite3_enable_shared_cache">sqlite3_enable_shared_cache()</a>
do not change the values returned by

<a href="#sqlite3_errcode">sqlite3_errcode()</a>, 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a>, or 
<a href="#sqlite3_errcode">sqlite3_errmsg16()</a>.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_free"></a>
<h2>Memory Allocation Subsystem</h2>
<blockquote><pre>
void *sqlite3_malloc(int);
void *sqlite3_realloc(void*, int);
void sqlite3_free(void*);

</pre></blockquote>
<p>
The SQLite core  uses these three routines for all of its own
internal memory allocation needs. "Core" in the previous sentence
does not include operating-system specific VFS implementation.  The
windows VFS uses native malloc and free for some operations.</p>

<p>The sqlite3_malloc() routine returns a pointer to a block
of memory at least N bytes in length, where N is the parameter.
If sqlite3_malloc() is unable to obtain sufficient free
memory, it returns a NULL pointer.  If the parameter N to
sqlite3_malloc() is zero or negative then sqlite3_malloc() returns
a NULL pointer.</p>

<p>Calling sqlite3_free() with a pointer previously returned
by sqlite3_malloc() or sqlite3_realloc() releases that memory so
that it might be reused.  The sqlite3_free() routine is
a no-op if is called with a NULL pointer.  Passing a NULL pointer
to sqlite3_free() is harmless.  After being freed, memory
should neither be read nor written.  Even reading previously freed
memory might result in a segmentation fault or other severe error.
Memory corruption, a segmentation fault, or other severe error
might result if sqlite3_free() is called with a non-NULL pointer that
was not obtained from sqlite3_malloc() or sqlite3_free().</p>

<p>The sqlite3_realloc() interface attempts to resize a
prior memory allocation to be at least N bytes, where N is the
second parameter.  The memory allocation to be resized is the first
parameter.  If the first parameter to sqlite3_realloc()
is a NULL pointer then its behavior is identical to calling
sqlite3_malloc(N) where N is the second parameter to sqlite3_realloc().
If the second parameter to sqlite3_realloc() is zero or
negative then the behavior is exactly the same as calling
sqlite3_free(P) where P is the first parameter to sqlite3_realloc().
Sqlite3_realloc() returns a pointer to a memory allocation
of at least N bytes in size or NULL if sufficient memory is unavailable.
If M is the size of the prior allocation, then min(N,M) bytes
of the prior allocation are copied into the beginning of buffer returned
by sqlite3_realloc() and the prior allocation is freed.
If sqlite3_realloc() returns NULL, then the prior allocation
is not freed.</p>

<p>The memory returned by sqlite3_malloc() and sqlite3_realloc()
is always aligned to at least an 8 byte boundary.</p>

<p>The default implementation
of the memory allocation subsystem uses the malloc(), realloc()
and free() provided by the standard C library. However, if
SQLite is compiled with the following C preprocessor macro</p>

<p><blockquote> SQLITE_MEMORY_SIZE=<i>NNN</i> </blockquote></p>

<p>where <i>NNN</i> is an integer, then SQLite create a static
array of at least <i>NNN</i> bytes in size and use that array
for all of its dynamic memory allocation needs.  Additional
memory allocator options may be added in future releases.</p>

<p>In SQLite version 3.5.0 and 3.5.1, it was possible to define
the SQLITE_OMIT_MEMORY_ALLOCATION which would cause the built-in
implementation of these routines to be omitted.  That capability
is no longer provided.  Only built-in memory allocators can be
used.</p>

<p>The windows OS interface layer calls
the system malloc() and free() directly when converting
filenames between the UTF-8 encoding used by SQLite
and whatever filename encoding is used by the particular windows
installation.  Memory allocation errors are detected, but
they are reported back as 
<a href="#SQLITE_ABORT">SQLITE_CANTOPEN</a> or

<a href="#SQLITE_ABORT">SQLITE_IOERR</a> rather than 
<a href="#SQLITE_ABORT">SQLITE_NOMEM</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F17303</td> 
<td valign="top">
The 
<a href="#sqlite3_free">sqlite3_malloc(N)</a> interface returns either a pointer to
newly checked-out block of at least N bytes of memory
that is 8-byte aligned,
or it returns NULL if it is unable to fulfill the request.</td></tr>
<tr><td valign="top">F17304</td> 
<td valign="top">
The 
<a href="#sqlite3_free">sqlite3_malloc(N)</a> interface returns a NULL pointer if
N is less than or equal to zero.</td></tr>
<tr><td valign="top">F17305</td> 
<td valign="top">
The 
<a href="#sqlite3_free">sqlite3_free(P)</a> interface releases memory previously
returned from 
<a href="#sqlite3_free">sqlite3_malloc()</a> or 
<a href="#sqlite3_free">sqlite3_realloc()</a>,
making it available for reuse.</td></tr>
<tr><td valign="top">F17306</td> 
<td valign="top">
A call to 
<a href="#sqlite3_free">sqlite3_free(NULL)</a> is a harmless no-op.</td></tr>
<tr><td valign="top">F17310</td> 
<td valign="top">
A call to 
<a href="#sqlite3_free">sqlite3_realloc(0,N)</a> is equivalent to a call
to 
<a href="#sqlite3_free">sqlite3_malloc(N)</a>.</td></tr>
<tr><td valign="top">F17312</td> 
<td valign="top">
A call to 
<a href="#sqlite3_free">sqlite3_realloc(P,0)</a> is equivalent to a call
to 
<a href="#sqlite3_free">sqlite3_free(P)</a>.</td></tr>
<tr><td valign="top">F17315</td> 
<td valign="top">
The SQLite core uses 
<a href="#sqlite3_free">sqlite3_malloc()</a>, 
<a href="#sqlite3_free">sqlite3_realloc()</a>,
and 
<a href="#sqlite3_free">sqlite3_free()</a> for all of its memory allocation and
deallocation needs.</td></tr>
<tr><td valign="top">F17318</td> 
<td valign="top">
The 
<a href="#sqlite3_free">sqlite3_realloc(P,N)</a> interface returns either a pointer
to a block of checked-out memory of at least N bytes in size
that is 8-byte aligned, or a NULL pointer.</td></tr>
<tr><td valign="top">F17321</td> 
<td valign="top">
When 
<a href="#sqlite3_free">sqlite3_realloc(P,N)</a> returns a non-NULL pointer, it first
copies the first K bytes of content from P into the newly allocated
where K is the lessor of N and the size of the buffer P.</td></tr>
<tr><td valign="top">F17322</td> 
<td valign="top">
When 
<a href="#sqlite3_free">sqlite3_realloc(P,N)</a> returns a non-NULL pointer, it first
releases the buffer P.</td></tr>
<tr><td valign="top">F17323</td> 
<td valign="top">
When 
<a href="#sqlite3_free">sqlite3_realloc(P,N)</a> returns NULL, the buffer P is
not modified or released.</td></tr>
</table></p>

<p><h3>Limitations:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">U17350</td> 
<td valign="top">
The pointer arguments to 
<a href="#sqlite3_free">sqlite3_free()</a> and 
<a href="#sqlite3_free">sqlite3_realloc()</a>
must be either NULL or else a pointer obtained from a prior
invocation of 
<a href="#sqlite3_free">sqlite3_malloc()</a> or 
<a href="#sqlite3_free">sqlite3_realloc()</a> that has
not been released.</td></tr>
<tr><td valign="top">U17351</td> 
<td valign="top">
The application must not read or write any part of
a block of memory after it has been released using

<a href="#sqlite3_free">sqlite3_free()</a> or 
<a href="#sqlite3_free">sqlite3_realloc()</a>.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_free_table"></a>
<h2>Convenience Routines For Running Queries</h2>
<blockquote><pre>
int sqlite3_get_table(
  sqlite3*,             /* An open database */
  const char *sql,      /* SQL to be evaluated */
  char ***pResult,      /* Results of the query */
  int *nrow,            /* Number of result rows written here */
  int *ncolumn,         /* Number of result columns written here */
  char **errmsg         /* Error msg written here */
);
void sqlite3_free_table(char **result);

</pre></blockquote>
<p>
Definition: A <b>result table</b> is memory data structure created by the

<a href="#sqlite3_free_table">sqlite3_get_table()</a> interface.  A result table records the
complete query results from one or more queries.</p>

<p>The table conceptually has a number of rows and columns.  But
these numbers are not part of the result table itself.  These
numbers are obtained separately.  Let N be the number of rows
and M be the number of columns.</p>

<p>A result table is an array of pointers to zero-terminated
UTF-8 strings.  There are (N+1)*M elements in the array.
The first M pointers point to zero-terminated strings that
contain the names of the columns.
The remaining entries all point to query results.  NULL
values are give a NULL pointer.  All other values are in
their UTF-8 zero-terminated string representation as returned by

<a href="#sqlite3_column_blob">sqlite3_column_text()</a>.</p>

<p>A result table might consists of one or more memory allocations.
It is not safe to pass a result table directly to 
<a href="#sqlite3_free">sqlite3_free()</a>.
A result table should be deallocated using 
<a href="#sqlite3_free_table">sqlite3_free_table()</a>.</p>

<p>As an example of the result table format, suppose a query result
is as follows:</p>

<p><blockquote><pre>
Name        | Age
-----------------------
Alice       | 43
Bob         | 28
Cindy       | 21
</pre></blockquote></p>

<p>There are two column (M==2) and three rows (N==3).  Thus the
result table has 8 entries.  Suppose the result table is stored
in an array names azResult.  Then azResult holds this content:</p>

<p><blockquote><pre>
azResult&#91;0] = "Name";
azResult&#91;1] = "Age";
azResult&#91;2] = "Alice";
azResult&#91;3] = "43";
azResult&#91;4] = "Bob";
azResult&#91;5] = "28";
azResult&#91;6] = "Cindy";
azResult&#91;7] = "21";
</pre></blockquote></p>

<p>The sqlite3_get_table() function evaluates one or more
semicolon-separated SQL statements in the zero-terminated UTF-8
string of its 2nd parameter.  It returns a result table to the
pointer given in its 3rd parameter.</p>

<p>After the calling function has finished using the result, it should
pass the pointer to the result table to sqlite3_free_table() in order to
release the memory that was malloc-ed.  Because of the way the

<a href="#sqlite3_free">sqlite3_malloc()</a> happens within sqlite3_get_table(), the calling
function must not try to call 
<a href="#sqlite3_free">sqlite3_free()</a> directly.  Only

<a href="#sqlite3_free_table">sqlite3_free_table()</a> is able to release the memory properly and safely.</p>

<p>The sqlite3_get_table() interface is implemented as a wrapper around

<a href="#sqlite3_exec">sqlite3_exec()</a>.  The sqlite3_get_table() routine does not have access
to any internal data structures of SQLite.  It uses only the public
interface defined here.  As a consequence, errors that occur in the
wrapper layer outside of the internal 
<a href="#sqlite3_exec">sqlite3_exec()</a> call are not
reflected in subsequent calls to 
<a href="#sqlite3_errcode">sqlite3_errcode()</a> or

<a href="#sqlite3_errcode">sqlite3_errmsg()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12371</td> 
<td valign="top">
If a 
<a href="#sqlite3_free_table">sqlite3_get_table()</a> fails a memory allocation, then
it frees the result table under construction, aborts the
query in process, skips any subsequent queries, sets the
*resultp output pointer to NULL and returns 
<a href="#SQLITE_ABORT">SQLITE_NOMEM</a>.</td></tr>
<tr><td valign="top">F12373</td> 
<td valign="top">
If the ncolumn parameter to 
<a href="#sqlite3_free_table">sqlite3_get_table()</a> is not NULL
then 
<a href="#sqlite3_free_table">sqlite3_get_table()</a> write the number of columns in the
result set of the query into *ncolumn if the query is
successful (if the function returns SQLITE_OK).</td></tr>
<tr><td valign="top">F12374</td> 
<td valign="top">
If the nrow parameter to 
<a href="#sqlite3_free_table">sqlite3_get_table()</a> is not NULL
then 
<a href="#sqlite3_free_table">sqlite3_get_table()</a> write the number of rows in the
result set of the query into *nrow if the query is
successful (if the function returns SQLITE_OK).</td></tr>
<tr><td valign="top">F12376</td> 
<td valign="top">
The 
<a href="#sqlite3_free_table">sqlite3_get_table()</a> function sets its *ncolumn value
to the number of columns in the result set of the query in the
sql parameter, or to zero if the query in sql has an empty
result set.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_get_auxdata"></a>
<h2>Function Auxiliary Data</h2>
<blockquote><pre>
void *sqlite3_get_auxdata(sqlite3_context*, int N);
void sqlite3_set_auxdata(sqlite3_context*, int N, void*, void (*)(void*));

</pre></blockquote>
<p>
The following two functions may be used by scalar SQL functions to
associate meta-data with argument values. If the same value is passed to
multiple invocations of the same SQL function during query execution, under
some circumstances the associated meta-data may be preserved. This may
be used, for example, to add a regular-expression matching scalar
function. The compiled version of the regular expression is stored as
meta-data associated with the SQL value passed as the regular expression
pattern.  The compiled regular expression can be reused on multiple
invocations of the same function so that the original pattern string
does not need to be recompiled on each invocation.</p>

<p>The sqlite3_get_auxdata() interface returns a pointer to the meta-data
associated by the sqlite3_set_auxdata() function with the Nth argument
value to the application-defined function.
 If no meta-data has been ever been set for the Nth
argument of the function, or if the cooresponding function parameter
has changed since the meta-data was set, then sqlite3_get_auxdata()
returns a NULL pointer.</p>

<p> The sqlite3_set_auxdata() interface saves the meta-data
pointed to by its 3rd parameter as the meta-data for the N-th
argument of the application-defined function. Subsequent
calls to sqlite3_get_auxdata() might return this data, if it has
not been destroyed.
 If it is not NULL, SQLite will invoke the destructor
function given by the 4th parameter to sqlite3_set_auxdata() on
the meta-data when the corresponding function parameter changes
or when the SQL statement completes, whichever comes first.</p>

<p>In practice, meta-data is preserved between function calls for
expressions that are constant at compile time. This includes literal
values and SQL variables.</p>

<p>These routines must be called from the same thread in which
the SQL function is running.
</p>
<hr>
<a name="sqlite3_libversion"></a>
<h2>Run-Time Library Version Numbers</h2>
<blockquote><pre>
SQLITE_EXTERN const char sqlite3_version[];
const char *sqlite3_libversion(void);
int sqlite3_libversion_number(void);

</pre></blockquote>
<p>
These features provide the same information as the 
<a href="#SQLITE_VERSION">SQLITE_VERSION</a>
and 
<a href="#SQLITE_VERSION">SQLITE_VERSION_NUMBER</a> #defines in the header, but are associated
with the library instead of the header file.  Cautious programmers might
include a check in their application to verify that
sqlite3_libversion_number() always returns the value

<a href="#SQLITE_VERSION">SQLITE_VERSION_NUMBER</a>.</p>

<p>The sqlite3_libversion() function returns the same information as is
in the sqlite3_version
[]
 string constant.  The function is provided
for use in DLLs since DLL users usually do not have direct access to string
constants within the DLL.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F10021</td> 
<td valign="top">
The 
<a href="#sqlite3_libversion">sqlite3_libversion_number()</a> interface returns an integer
equal to 
<a href="#SQLITE_VERSION">SQLITE_VERSION_NUMBER</a>.</td></tr>
<tr><td valign="top">F10022</td> 
<td valign="top">
The 
<a href="#sqlite3_libversion">sqlite3_version</a> string constant contains the text of the

<a href="#SQLITE_VERSION">SQLITE_VERSION</a> string.</td></tr>
<tr><td valign="top">F10023</td> 
<td valign="top">
The 
<a href="#sqlite3_libversion">sqlite3_libversion()</a> function returns
a pointer to the 
<a href="#sqlite3_libversion">sqlite3_version</a> string constant.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_memory_highwater"></a>
<h2>Memory Allocator Statistics</h2>
<blockquote><pre>
sqlite3_int64 sqlite3_memory_used(void);
sqlite3_int64 sqlite3_memory_highwater(int resetFlag);

</pre></blockquote>
<p>
SQLite provides these two interfaces for reporting on the status
of the 
<a href="#sqlite3_free">sqlite3_malloc()</a>, 
<a href="#sqlite3_free">sqlite3_free()</a>, and 
<a href="#sqlite3_free">sqlite3_realloc()</a>
the memory allocation subsystem included within the SQLite.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F17371</td> 
<td valign="top">
The 
<a href="#sqlite3_memory_highwater">sqlite3_memory_used()</a> routine returns the
number of bytes of memory currently outstanding
(malloced but not freed).</td></tr>
<tr><td valign="top">F17373</td> 
<td valign="top">
The 
<a href="#sqlite3_memory_highwater">sqlite3_memory_highwater()</a> routine returns the maximum
value of 
<a href="#sqlite3_memory_highwater">sqlite3_memory_used()</a>
since the highwater mark was last reset.</td></tr>
<tr><td valign="top">F17374</td> 
<td valign="top">
The values returned by 
<a href="#sqlite3_memory_highwater">sqlite3_memory_used()</a> and

<a href="#sqlite3_memory_highwater">sqlite3_memory_highwater()</a> include any overhead
added by SQLite in its implementation of 
<a href="#sqlite3_free">sqlite3_malloc()</a>,
but not overhead added by the any underlying system library
routines that 
<a href="#sqlite3_free">sqlite3_malloc()</a> may call.</td></tr>
<tr><td valign="top">F17375</td> 
<td valign="top">
The memory highwater mark is reset to the current value of

<a href="#sqlite3_memory_highwater">sqlite3_memory_used()</a> if and only if the parameter to

<a href="#sqlite3_memory_highwater">sqlite3_memory_highwater()</a> is true.  The value returned
by 
<a href="#sqlite3_memory_highwater">sqlite3_memory_highwater(1)</a> is the highwater mark
prior to the reset.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_mprintf"></a>
<h2>Formatted String Printing Functions</h2>
<blockquote><pre>
char *sqlite3_mprintf(const char*,...);
char *sqlite3_vmprintf(const char*, va_list);
char *sqlite3_snprintf(int,char*,const char*, ...);

</pre></blockquote>
<p>
These routines are workalikes of the "printf()" family of functions
from the standard C library.</p>

<p>The sqlite3_mprintf() and sqlite3_vmprintf() routines write their
results into memory obtained from 
<a href="#sqlite3_free">sqlite3_malloc()</a>.
The strings returned by these two routines should be
released by 
<a href="#sqlite3_free">sqlite3_free()</a>.   Both routines return a
NULL pointer if 
<a href="#sqlite3_free">sqlite3_malloc()</a> is unable to allocate enough
memory to hold the resulting string.</p>

<p>In sqlite3_snprintf() routine is similar to "snprintf()" from
the standard C library.  The result is written into the
buffer supplied as the second parameter whose size is given by
the first parameter. Note that the order of the
first two parameters is reversed from snprintf().  This is an
historical accident that cannot be fixed without breaking
backwards compatibility.  Note also that sqlite3_snprintf()
returns a pointer to its buffer instead of the number of
characters actually written into the buffer.  We admit that
the number of characters written would be a more useful return
value but we cannot change the implementation of sqlite3_snprintf()
now without breaking compatibility.</p>

<p>As long as the buffer size is greater than zero, sqlite3_snprintf()
guarantees that the buffer is always zero-terminated.  The first
parameter "n" is the total size of the buffer, including space for
the zero terminator.  So the longest string that can be completely
written will be n-1 characters.</p>

<p>These routines all implement some additional formatting
options that are useful for constructing SQL statements.
All of the usual printf formatting options apply.  In addition, there
is are "%q", "%Q", and "%z" options.</p>

<p>The %q option works like %s in that it substitutes a null-terminated
string from the argument list.  But %q also doubles every '\'' character.
%q is designed for use inside a string literal.  By doubling each '\''
character it escapes that character and allows it to be inserted into
the string.</p>

<p>For example, so some string variable contains text as follows:</p>

<p><blockquote><pre>
char *zText = "It's a happy day!";
</pre></blockquote></p>

<p>One can use this text in an SQL statement as follows:</p>

<p><blockquote><pre>
char *zSQL = sqlite3_mprintf("INSERT INTO table VALUES('%q')", zText);
sqlite3_exec(db, zSQL, 0, 0, 0);
sqlite3_free(zSQL);
</pre></blockquote></p>

<p>Because the %q format string is used, the '\'' character in zText
is escaped and the SQL generated is as follows:</p>

<p><blockquote><pre>
INSERT INTO table1 VALUES('It''s a happy day!')
</pre></blockquote></p>

<p>This is correct.  Had we used %s instead of %q, the generated SQL
would have looked like this:</p>

<p><blockquote><pre>
INSERT INTO table1 VALUES('It's a happy day!');
</pre></blockquote></p>

<p>This second example is an SQL syntax error.  As a general rule you
should always use %q instead of %s when inserting text into a string
literal.</p>

<p>The %Q option works like %q except it also adds single quotes around
the outside of the total string.  Or if the parameter in the argument
list is a NULL pointer, %Q substitutes the text "NULL" (without single
quotes) in place of the %Q option.  So, for example, one could say:</p>

<p><blockquote><pre>
char *zSQL = sqlite3_mprintf("INSERT INTO table VALUES(%Q)", zText);
sqlite3_exec(db, zSQL, 0, 0, 0);
sqlite3_free(zSQL);
</pre></blockquote></p>

<p>The code above will render a correct SQL statement in the zSQL
variable even if the zText variable is a NULL pointer.</p>

<p>The "%z" formatting option works exactly like "%s" with the
addition that after the string has been read and copied into
the result, 
<a href="#sqlite3_free">sqlite3_free()</a> is called on the input string.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F17403</td> 
<td valign="top">
The 
<a href="#sqlite3_mprintf">sqlite3_mprintf()</a> and 
<a href="#sqlite3_mprintf">sqlite3_vmprintf()</a> interfaces
return either pointers to zero-terminated UTF-8 strings held in
memory obtained from 
<a href="#sqlite3_free">sqlite3_malloc()</a> or NULL pointers if
a call to 
<a href="#sqlite3_free">sqlite3_malloc()</a> fails.</td></tr>
<tr><td valign="top">F17406</td> 
<td valign="top">
The 
<a href="#sqlite3_mprintf">sqlite3_snprintf()</a> interface writes a zero-terminated
UTF-8 string into the buffer pointed to by the second parameter
provided that the first parameter is greater than zero.</td></tr>
<tr><td valign="top">F17407</td> 
<td valign="top">
The 
<a href="#sqlite3_mprintf">sqlite3_snprintf()</a> interface does not writes slots of
its output buffer (the second parameter) outside the range
of 0 through N-1 (where N is the first parameter)
regardless of the length of the string
requested by the format specification.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_mutex_alloc"></a>
<h2>Mutexes</h2>
<blockquote><pre>
sqlite3_mutex *sqlite3_mutex_alloc(int);
void sqlite3_mutex_free(sqlite3_mutex*);
void sqlite3_mutex_enter(sqlite3_mutex*);
int sqlite3_mutex_try(sqlite3_mutex*);
void sqlite3_mutex_leave(sqlite3_mutex*);

</pre></blockquote>
<p>
The SQLite core uses these routines for thread
synchronization.  Though they are intended for internal
use by SQLite, code that links against SQLite is
permitted to use any of these routines.</p>

<p>The SQLite source code contains multiple implementations
of these mutex routines.  An appropriate implementation
is selected automatically at compile-time.  The following
implementations are available in the SQLite core:</p>

<p><ul>
<li>   SQLITE_MUTEX_OS2
<li>   SQLITE_MUTEX_PTHREAD
<li>   SQLITE_MUTEX_W32
<li>   SQLITE_MUTEX_NOOP
</ul></p>

<p>The SQLITE_MUTEX_NOOP implementation is a set of routines
that does no real locking and is appropriate for use in
a single-threaded application.  The SQLITE_MUTEX_OS2,
SQLITE_MUTEX_PTHREAD, and SQLITE_MUTEX_W32 implementations
are appropriate for use on os/2, unix, and windows.</p>

<p>If SQLite is compiled with the SQLITE_MUTEX_APPDEF preprocessor
macro defined (with "-DSQLITE_MUTEX_APPDEF=1"), then no mutex
implementation is included with the library.  The
mutex interface routines defined here become external
references in the SQLite library for which implementations
must be provided by the application.  This facility allows an
application that links against SQLite to provide its own mutex
implementation without having to modify the SQLite core.</p>

<p> The sqlite3_mutex_alloc() routine allocates a new
mutex and returns a pointer to it. If it returns NULL
that means that a mutex could not be allocated. SQLite
will unwind its stack and return an error. The argument
to sqlite3_mutex_alloc() is one of these integer constants:</p>

<p><ul>
<li>  SQLITE_MUTEX_FAST
<li>  SQLITE_MUTEX_RECURSIVE
<li>  SQLITE_MUTEX_STATIC_MASTER
<li>  SQLITE_MUTEX_STATIC_MEM
<li>  SQLITE_MUTEX_STATIC_MEM2
<li>  SQLITE_MUTEX_STATIC_PRNG
<li>  SQLITE_MUTEX_STATIC_LRU
</ul></p>

<p> The first two constants cause sqlite3_mutex_alloc() to create
a new mutex.  The new mutex is recursive when SQLITE_MUTEX_RECURSIVE
is used but not necessarily so when SQLITE_MUTEX_FAST is used.
The mutex implementation does not need to make a distinction
between SQLITE_MUTEX_RECURSIVE and SQLITE_MUTEX_FAST if it does
not want to. But SQLite will only request a recursive mutex in
cases where it really needs one. If a faster non-recursive mutex
implementation is available on the host platform, the mutex subsystem
might return such a mutex in response to SQLITE_MUTEX_FAST.</p>

<p> The other allowed parameters to sqlite3_mutex_alloc() each return
a pointer to a static preexisting mutex.  Four static mutexes are
used by the current version of SQLite.  Future versions of SQLite
may add additional static mutexes.  Static mutexes are for internal
use by SQLite only.  Applications that use SQLite mutexes should
use only the dynamic mutexes returned by SQLITE_MUTEX_FAST or
SQLITE_MUTEX_RECURSIVE.</p>

<p> Note that if one of the dynamic mutex parameters (SQLITE_MUTEX_FAST
or SQLITE_MUTEX_RECURSIVE) is used then sqlite3_mutex_alloc()
returns a different mutex on every call. But for the static
mutex types, the same mutex is returned on every call that has
the same type number.</p>

<p> The sqlite3_mutex_free() routine deallocates a previously
allocated dynamic mutex. SQLite is careful to deallocate every
dynamic mutex that it allocates. The dynamic mutexes must not be in
use when they are deallocated. Attempting to deallocate a static
mutex results in undefined behavior. SQLite never deallocates
a static mutex.</p>

<p>The sqlite3_mutex_enter() and sqlite3_mutex_try() routines attempt
to enter a mutex. If another thread is already within the mutex,
sqlite3_mutex_enter() will block and sqlite3_mutex_try() will return
SQLITE_BUSY.  The sqlite3_mutex_try() interface returns SQLITE_OK
upon successful entry. Mutexes created using
SQLITE_MUTEX_RECURSIVE can be entered multiple times by the same thread.
 In such cases the,
mutex must be exited an equal number of times before another thread
can enter. If the same thread tries to enter any other
kind of mutex more than once, the behavior is undefined.
 SQLite will never exhibit
such behavior in its own use of mutexes.</p>

<p>Some systems (ex: windows95) do not the operation implemented by
sqlite3_mutex_try().  On those systems, sqlite3_mutex_try() will
always return SQLITE_BUSY. The SQLite core only ever uses
sqlite3_mutex_try() as an optimization so this is acceptable behavior.</p>

<p> The sqlite3_mutex_leave() routine exits a mutex that was
previously entered by the same thread. The behavior
is undefined if the mutex is not currently entered by the
calling thread or is not currently allocated. SQLite will
never do either.</p>

<p>See also: 
<a href="#sqlite3_mutex_held">sqlite3_mutex_held()</a> and 
<a href="#sqlite3_mutex_held">sqlite3_mutex_notheld()</a>.
</p>
<hr>
<a name="sqlite3_mutex_held"></a>
<h2>Mutex Verifcation Routines</h2>
<blockquote><pre>
int sqlite3_mutex_held(sqlite3_mutex*);
int sqlite3_mutex_notheld(sqlite3_mutex*);

</pre></blockquote>
<p>
The sqlite3_mutex_held() and sqlite3_mutex_notheld() routines
are intended for use inside assert() statements. The SQLite core
never uses these routines except inside an assert() and applications
are advised to follow the lead of the core. The core only
provides implementations for these routines when it is compiled
with the SQLITE_DEBUG flag. External mutex implementations
are only required to provide these routines if SQLITE_DEBUG is
defined and if NDEBUG is not defined.</p>

<p> These routines should return true if the mutex in their argument
is held or not held, respectively, by the calling thread.</p>

<p> The implementation is not required to provided versions of these
routines that actually work.
If the implementation does not provide working
versions of these routines, it should at least provide stubs
that always return true so that one does not get spurious
assertion failures.</p>

<p> If the argument to sqlite3_mutex_held() is a NULL pointer then
the routine should return 1. This seems counter-intuitive since
clearly the mutex cannot be held if it does not exist.  But the
the reason the mutex does not exist is because the build is not
using mutexes.  And we do not want the assert() containing the
call to sqlite3_mutex_held() to fail, so a non-zero return is
the appropriate thing to do. The sqlite3_mutex_notheld()
interface should also return 1 when given a NULL pointer.
</p>
<hr>
<a name="sqlite3_open"></a>
<h2>Opening A New Database Connection</h2>
<blockquote><pre>
int sqlite3_open(
  const char *filename,   /* Database filename (UTF-8) */
  sqlite3 **ppDb          /* OUT: SQLite db handle */
);
int sqlite3_open16(
  const void *filename,   /* Database filename (UTF-16) */
  sqlite3 **ppDb          /* OUT: SQLite db handle */
);
int sqlite3_open_v2(
  const char *filename,   /* Database filename (UTF-8) */
  sqlite3 **ppDb,         /* OUT: SQLite db handle */
  int flags,              /* Flags */
  const char *zVfs        /* Name of VFS module to use */
);

</pre></blockquote>
<p>
These routines open an SQLite database file whose name
is given by the filename argument.
The filename argument is interpreted as UTF-8
for 
<a href="#sqlite3_open">sqlite3_open()</a> and 
<a href="#sqlite3_open">sqlite3_open_v2()</a> and as UTF-16
in the native byte order for 
<a href="#sqlite3_open">sqlite3_open16()</a>.
An 
<a href="#sqlite3">sqlite3*</a> handle is usually returned in *ppDb, even
if an error occurs.  The only exception is if SQLite is unable
to allocate memory to hold the 
<a href="#sqlite3">sqlite3</a> object, a NULL will
be written into *ppDb instead of a pointer to the 
<a href="#sqlite3">sqlite3</a> object.
If the database is opened (and/or created)
successfully, then 
<a href="#SQLITE_ABORT">SQLITE_OK</a> is returned.  Otherwise an
error code is returned.  The

<a href="#sqlite3_errcode">sqlite3_errmsg()</a> or 
<a href="#sqlite3_errcode">sqlite3_errmsg16()</a>  routines can be used to obtain
an English language description of the error.</p>

<p>The default encoding for the database will be UTF-8 if

<a href="#sqlite3_open">sqlite3_open()</a> or 
<a href="#sqlite3_open">sqlite3_open_v2()</a> is called and
UTF-16 in the native byte order if 
<a href="#sqlite3_open">sqlite3_open16()</a> is used.</p>

<p>Whether or not an error occurs when it is opened, resources
associated with the 
<a href="#sqlite3">sqlite3*</a> handle should be released by passing it
to 
<a href="#sqlite3_close">sqlite3_close()</a> when it is no longer required.</p>

<p>The 
<a href="#sqlite3_open">sqlite3_open_v2()</a> interface works like 
<a href="#sqlite3_open">sqlite3_open()</a>
except that it acccepts two additional parameters for additional control
over the new database connection.  The flags parameter can be
one of:</p>

<p><ol>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READONLY</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READWRITE</a>
<li>  
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READWRITE</a> | 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_CREATE</a>
</ol></p>

<p>The first value opens the database read-only.
If the database does not previously exist, an error is returned.
The second option opens
the database for reading and writing if possible, or reading only if
if the file is write protected.  In either case the database
must already exist or an error is returned.  The third option
opens the database for reading and writing and creates it if it does
not already exist.
The third options is behavior that is always used for 
<a href="#sqlite3_open">sqlite3_open()</a>
and 
<a href="#sqlite3_open">sqlite3_open16()</a>.</p>

<p>If the filename is ":memory:", then an private
in-memory database is created for the connection.  This in-memory
database will vanish when the database connection is closed.  Future
version of SQLite might make use of additional special filenames
that begin with the ":" character.  It is recommended that
when a database filename really does begin with
":" that you prefix the filename with a pathname like "./" to
avoid ambiguity.</p>

<p>If the filename is an empty string, then a private temporary
on-disk database will be created.  This private database will be
automatically deleted as soon as the database connection is closed.</p>

<p>The fourth parameter to sqlite3_open_v2() is the name of the

<a href="#sqlite3_vfs">sqlite3_vfs</a> object that defines the operating system
interface that the new database connection should use.  If the
fourth parameter is a NULL pointer then the default 
<a href="#sqlite3_vfs">sqlite3_vfs</a>
object is used.</p>

<p><b>Note to windows users:</b>  The encoding used for the filename argument
of 
<a href="#sqlite3_open">sqlite3_open()</a> and 
<a href="#sqlite3_open">sqlite3_open_v2()</a> must be UTF-8, not whatever
codepage is currently defined.  Filenames containing international
characters must be converted to UTF-8 prior to passing them into

<a href="#sqlite3_open">sqlite3_open()</a> or 
<a href="#sqlite3_open">sqlite3_open_v2()</a>.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12701</td> 
<td valign="top">
The 
<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open16()</a>, and

<a href="#sqlite3_open">sqlite3_open_v2()</a> interfaces create a new

<a href="#sqlite3">database connection</a> associated with
the database file given in their first parameter.</td></tr>
<tr><td valign="top">F12702</td> 
<td valign="top">
The filename argument is interpreted as UTF-8
for 
<a href="#sqlite3_open">sqlite3_open()</a> and 
<a href="#sqlite3_open">sqlite3_open_v2()</a> and as UTF-16
in the native byte order for 
<a href="#sqlite3_open">sqlite3_open16()</a>.</td></tr>
<tr><td valign="top">F12703</td> 
<td valign="top">
A successful invocation of 
<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open16()</a>,
or 
<a href="#sqlite3_open">sqlite3_open_v2()</a> writes a pointer to a new

<a href="#sqlite3">database connection</a> into *ppDb.</td></tr>
<tr><td valign="top">F12704</td> 
<td valign="top">
The 
<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open16()</a>, and

<a href="#sqlite3_open">sqlite3_open_v2()</a> interfaces return 
<a href="#SQLITE_ABORT">SQLITE_OK</a> upon success,
or an appropriate 
<a href="#SQLITE_ABORT">error code</a> on failure.</td></tr>
<tr><td valign="top">F12706</td> 
<td valign="top">
The default text encoding for a new database created using

<a href="#sqlite3_open">sqlite3_open()</a> or 
<a href="#sqlite3_open">sqlite3_open_v2()</a> will be UTF-8.</td></tr>
<tr><td valign="top">F12707</td> 
<td valign="top">
The default text encoding for a new database created using

<a href="#sqlite3_open">sqlite3_open16()</a> will be UTF-16.</td></tr>
<tr><td valign="top">F12709</td> 
<td valign="top">
The 
<a href="#sqlite3_open">sqlite3_open(F,D)</a> interface is equivalent to

<a href="#sqlite3_open">sqlite3_open_v2(F,D,G,0)</a> where the G parameter is

<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READWRITE</a>|
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_CREATE</a>.</td></tr>
<tr><td valign="top">F12711</td> 
<td valign="top">
If the G parameter to 
<a href="#sqlite3_open">sqlite3_open_v2(F,D,G,V)</a> contains the
bit value 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READONLY</a> then the database is opened
for reading only.</td></tr>
<tr><td valign="top">F12712</td> 
<td valign="top">
If the G parameter to 
<a href="#sqlite3_open">sqlite3_open_v2(F,D,G,V)</a> contains the
bit value 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_READWRITE</a> then the database is opened
reading and writing if possible, or for reading only if the
file is write protected by the operating system.</td></tr>
<tr><td valign="top">F12713</td> 
<td valign="top">
If the G parameter to 
<a href="#sqlite3_open">sqlite3_open(v2(F,D,G,V)</a> omits the
bit value 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_CREATE</a> and the database does not
previously exist, an error is returned.</td></tr>
<tr><td valign="top">F12714</td> 
<td valign="top">
If the G parameter to 
<a href="#sqlite3_open">sqlite3_open(v2(F,D,G,V)</a> contains the
bit value 
<a href="#SQLITE_OPEN_CREATE">SQLITE_OPEN_CREATE</a> and the database does not
previously exist, then an attempt is made to create and
initialize the database.</td></tr>
<tr><td valign="top">F12717</td> 
<td valign="top">
If the filename argument to 
<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open16()</a>,
or 
<a href="#sqlite3_open">sqlite3_open_v2()</a> is ":memory:", then an private,
ephemeral, in-memory database is created for the connection.
<font color="red">(TODO: Is SQLITE_OPEN_CREATE|SQLITE_OPEN_READWRITE required
in sqlite3_open_v2()?)</font></td></tr>
<tr><td valign="top">F12719</td> 
<td valign="top">
If the filename is an empty string, then a private, ephermeral
on-disk database will be created.
<font color="red">(TODO: Is SQLITE_OPEN_CREATE|SQLITE_OPEN_READWRITE required
in sqlite3_open_v2()?)</font></td></tr>
<tr><td valign="top">F12721</td> 
<td valign="top">
The 
<a href="#sqlite3">database connection</a> created by

<a href="#sqlite3_open">sqlite3_open_v2(F,D,G,V)</a> will use the

<a href="#sqlite3_vfs">sqlite3_vfs</a> object identified by the V parameter, or
the default 
<a href="#sqlite3_vfs">sqlite3_vfs</a> object is V is a NULL pointer.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_prepare"></a>
<h2>Compiling An SQL Statement</h2>
<blockquote><pre>
int sqlite3_prepare(
  sqlite3 *db,            /* Database handle */
  const char *zSql,       /* SQL statement, UTF-8 encoded */
  int nByte,              /* Maximum length of zSql in bytes. */
  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */
  const char **pzTail     /* OUT: Pointer to unused portion of zSql */
);
int sqlite3_prepare_v2(
  sqlite3 *db,            /* Database handle */
  const char *zSql,       /* SQL statement, UTF-8 encoded */
  int nByte,              /* Maximum length of zSql in bytes. */
  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */
  const char **pzTail     /* OUT: Pointer to unused portion of zSql */
);
int sqlite3_prepare16(
  sqlite3 *db,            /* Database handle */
  const void *zSql,       /* SQL statement, UTF-16 encoded */
  int nByte,              /* Maximum length of zSql in bytes. */
  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */
  const void **pzTail     /* OUT: Pointer to unused portion of zSql */
);
int sqlite3_prepare16_v2(
  sqlite3 *db,            /* Database handle */
  const void *zSql,       /* SQL statement, UTF-16 encoded */
  int nByte,              /* Maximum length of zSql in bytes. */
  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */
  const void **pzTail     /* OUT: Pointer to unused portion of zSql */
);

</pre></blockquote>
<p>
To execute an SQL query, it must first be compiled into a byte-code
program using one of these routines.</p>

<p>The first argument "db" is an 
<a href="#sqlite3">database connection</a>
obtained from a prior call to 
<a href="#sqlite3_open">sqlite3_open()</a>, 
<a href="#sqlite3_open">sqlite3_open_v2()</a>
or 
<a href="#sqlite3_open">sqlite3_open16()</a>.
The second argument "zSql" is the statement to be compiled, encoded
as either UTF-8 or UTF-16.  The sqlite3_prepare() and sqlite3_prepare_v2()
interfaces uses UTF-8 and sqlite3_prepare16() and sqlite3_prepare16_v2()
use UTF-16.</p>

<p>If the nByte argument is less
than zero, then zSql is read up to the first zero terminator.
If nByte is non-negative, then it is the maximum number of
bytes read from zSql.  When nByte is non-negative, the
zSql string ends at either the first '\000' or '\u0000' character or
until the nByte-th byte, whichever comes first.</p>

<p>*pzTail is made to point to the first byte past the end of the
first SQL statement in zSql.  These routines only compiles the first
statement in zSql, so *pzTail is left pointing to what remains
uncompiled.</p>

<p>*ppStmt is left pointing to a compiled 
<a href="#sqlite3_stmt">prepared statement</a> that can be
executed using 
<a href="#sqlite3_step">sqlite3_step()</a>.  Or if there is an error, *ppStmt may be
set to NULL.  If the input text contains no SQL (if the input
is and empty string or a comment) then *ppStmt is set to NULL.
 The calling procedure is responsible for deleting the
compiled SQL statement
using 
<a href="#sqlite3_finalize">sqlite3_finalize()</a> after it has finished with it.</p>

<p>On success, 
<a href="#SQLITE_ABORT">SQLITE_OK</a> is returned.  Otherwise an

<a href="#SQLITE_ABORT">error code</a> is returned.</p>

<p>The sqlite3_prepare_v2() and sqlite3_prepare16_v2() interfaces are
recommended for all new programs. The two older interfaces are retained
for backwards compatibility, but their use is discouraged.
In the "v2" interfaces, the prepared statement
that is returned (the 
<a href="#sqlite3_stmt">sqlite3_stmt</a> object) contains a copy of the
original SQL text. This causes the 
<a href="#sqlite3_step">sqlite3_step()</a> interface to
behave a differently in two ways:</p>

<p><ol>
<li>
If the database schema changes, instead of returning 
<a href="#SQLITE_ABORT">SQLITE_SCHEMA</a> as it
always used to do, 
<a href="#sqlite3_step">sqlite3_step()</a> will automatically recompile the SQL
statement and try to run it again.  If the schema has changed in
a way that makes the statement no longer valid, 
<a href="#sqlite3_step">sqlite3_step()</a> will still
return 
<a href="#SQLITE_ABORT">SQLITE_SCHEMA</a>.  But unlike the legacy behavior,

<a href="#SQLITE_ABORT">SQLITE_SCHEMA</a> is now a fatal error.  Calling

<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> again will not make the
error go away.  Note: use 
<a href="#sqlite3_errcode">sqlite3_errmsg()</a> to find the text
of the parsing error that results in an 
<a href="#SQLITE_ABORT">SQLITE_SCHEMA</a> return.
</li></p>

<p><li>
When an error occurs,

<a href="#sqlite3_step">sqlite3_step()</a> will return one of the detailed

<a href="#SQLITE_ABORT">error codes</a> or 
<a href="#SQLITE_IOERR_BLOCKED">extended error codes</a>.
The legacy behavior was that 
<a href="#sqlite3_step">sqlite3_step()</a> would only return a generic

<a href="#SQLITE_ABORT">SQLITE_ERROR</a> result code and you would have to make a second call to

<a href="#sqlite3_reset">sqlite3_reset()</a> in order to find the underlying cause of the problem.
With the "v2" prepare interfaces, the underlying reason for the error is
returned immediately.
</li>
</ol></p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F13011</td> 
<td valign="top">
The 
<a href="#sqlite3_prepare">sqlite3_prepare(db,zSql,...)</a> and

<a href="#sqlite3_prepare">sqlite3_prepare_v2(db,zSql,...)</a> interfaces interpret the
text in their zSql parameter as UTF-8.</td></tr>
<tr><td valign="top">F13012</td> 
<td valign="top">
The 
<a href="#sqlite3_prepare">sqlite3_prepare16(db,zSql,...)</a> and

<a href="#sqlite3_prepare">sqlite3_prepare16_v2(db,zSql,...)</a> interfaces interpret the
text in their zSql parameter as UTF-16 in the native byte order.</td></tr>
<tr><td valign="top">F13013</td> 
<td valign="top">
If the nByte argument to 
<a href="#sqlite3_prepare">sqlite3_prepare_v2(db,zSql,nByte,...)</a>
and its variants is less than zero, then SQL text is
read from zSql is read up to the first zero terminator.</td></tr>
<tr><td valign="top">F13014</td> 
<td valign="top">
If the nByte argument to 
<a href="#sqlite3_prepare">sqlite3_prepare_v2(db,zSql,nByte,...)</a>
and its variants is non-negative, then nBytes bytes
SQL text is read from zSql.</td></tr>
<tr><td valign="top">F13015</td> 
<td valign="top">
In 
<a href="#sqlite3_prepare">sqlite3_prepare_v2(db,zSql,N,P,pzTail)</a> and its variants
if the zSql input text contains more than one SQL statement
and pzTail is not NULL, then *pzTail is made to point to the
first byte past the end of the first SQL statement in zSql.
<font color="red">(TODO: What does *pzTail point to if there is one statement?)</font></td></tr>
<tr><td valign="top">F13016</td> 
<td valign="top">
A successful call to 
<a href="#sqlite3_prepare">sqlite3_prepare_v2(db,zSql,N,ppStmt,...)</a>
or one of its variants writes into *ppStmt a pointer to a new

<a href="#sqlite3_stmt">prepared statement</a> or a pointer to NULL
if zSql contains nothing other than whitespace or comments.</td></tr>
<tr><td valign="top">F13019</td> 
<td valign="top">
The 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a> interface and its variants return

<a href="#SQLITE_ABORT">SQLITE_OK</a> or an appropriate 
<a href="#SQLITE_ABORT">error code</a> upon failure.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_profile"></a>
<h2>Tracing And Profiling Functions</h2>
<blockquote><pre>
void *sqlite3_trace(sqlite3*, void(*xTrace)(void*,const char*), void*);
void *sqlite3_profile(sqlite3*,
   void(*xProfile)(void*,const char*,sqlite3_uint64), void*);

</pre></blockquote>
<p>
These routines register callback functions that can be used for
tracing and profiling the execution of SQL statements.</p>

<p>The callback function registered by sqlite3_trace() is invoked at
various times when an SQL statement is being run by 
<a href="#sqlite3_step">sqlite3_step()</a>.
The callback returns a UTF-8 rendering of the SQL statement text
as the statement first begins executing.  Additional callbacks occur
as each triggersubprogram is entered.  The callbacks for triggers
contain a UTF-8 SQL comment that identifies the trigger.</p>

<p>The callback function registered by sqlite3_profile() is invoked
as each SQL statement finishes.  The profile callback contains
the original statement text and an estimate of wall-clock time
of how long that statement took to run.</p>

<p>The sqlite3_profile() API is currently considered experimental and
is subject to change or removal in a future release.</p>

<p>The trigger reporting feature of the trace callback is considered
experimental and is subject to change or removal in future releases.
Future versions of SQLite might also add new trace callback
invocations.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F12281</td> 
<td valign="top">
The callback function registered by 
<a href="#sqlite3_profile">sqlite3_trace()</a> is
whenever an SQL statement first begins to execute and
whenever a trigger subprogram first begins to run.</td></tr>
<tr><td valign="top">F12282</td> 
<td valign="top">
Each call to 
<a href="#sqlite3_profile">sqlite3_trace()</a> overrides the previously
registered trace callback.</td></tr>
<tr><td valign="top">F12283</td> 
<td valign="top">
A NULL trace callback disables tracing.</td></tr>
<tr><td valign="top">F12284</td> 
<td valign="top">
The first argument to the trace callback is a copy of
the pointer which was the 3rd argument to 
<a href="#sqlite3_profile">sqlite3_trace()</a>.</td></tr>
<tr><td valign="top">F12285</td> 
<td valign="top">
The second argument to the trace callback is a
zero-terminated UTF8 string containing the original text
of the SQL statement as it was passed into 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a>
or the equivalent, or an SQL comment indicating the beginning
of a trigger subprogram.</td></tr>
<tr><td valign="top">F12287</td> 
<td valign="top">
The callback function registered by 
<a href="#sqlite3_profile">sqlite3_profile()</a> is invoked
as each SQL statement finishes.</td></tr>
<tr><td valign="top">F12288</td> 
<td valign="top">
The first parameter to the profile callback is a copy of
the 3rd parameter to 
<a href="#sqlite3_profile">sqlite3_profile()</a>.</td></tr>
<tr><td valign="top">F12289</td> 
<td valign="top">
The second parameter to the profile callback is a
zero-terminated UTF-8 string that contains the complete text of
the SQL statement as it was processed by 
<a href="#sqlite3_prepare">sqlite3_prepare_v2()</a>
or the equivalent.</td></tr>
<tr><td valign="top">F12290</td> 
<td valign="top">
The third parameter to the profile  callback is an estimate
of the number of nanoseconds of wall-clock time required to
run the SQL statement from start to finish.</td></tr>
</table>
</p>
<hr>
<a name="sqlite3_result_blob"></a>
<h2>Setting The Result Of An SQL Function</h2>
<blockquote><pre>
void sqlite3_result_blob(sqlite3_context*, const void*, int, void(*)(void*));
void sqlite3_result_double(sqlite3_context*, double);
void sqlite3_result_error(sqlite3_context*, const char*, int);
void sqlite3_result_error16(sqlite3_context*, const void*, int);
void sqlite3_result_error_toobig(sqlite3_context*);
void sqlite3_result_error_nomem(sqlite3_context*);
void sqlite3_result_error_code(sqlite3_context*, int);
void sqlite3_result_int(sqlite3_context*, int);
void sqlite3_result_int64(sqlite3_context*, sqlite3_int64);
void sqlite3_result_null(sqlite3_context*);
void sqlite3_result_text(sqlite3_context*, const char*, int, void(*)(void*));
void sqlite3_result_text16(sqlite3_context*, const void*, int, void(*)(void*));
void sqlite3_result_text16le(sqlite3_context*, const void*, int,void(*)(void*));
void sqlite3_result_text16be(sqlite3_context*, const void*, int,void(*)(void*));
void sqlite3_result_value(sqlite3_context*, sqlite3_value*);
void sqlite3_result_zeroblob(sqlite3_context*, int n);

</pre></blockquote>
<p>
These routines are used by the xFunc or xFinal callbacks that
implement SQL functions and aggregates.  See

<a href="#sqlite3_create_function">sqlite3_create_function()</a> and 
<a href="#sqlite3_create_function">sqlite3_create_function16()</a>
for additional information.</p>

<p>These functions work very much like the

<a href="#sqlite3_bind_blob">sqlite3_bind_*</a> family of functions used
to bind values to host parameters in prepared statements.
Refer to the

<a href="#sqlite3_bind_blob">sqlite3_bind_* documentation</a> for
additional information.</p>

<p> The sqlite3_result_blob() interface sets the result from
an application defined function to be the BLOB whose content is pointed
to by the second parameter and which is N bytes long where N is the
third parameter.
 The sqlite3_result_zeroblob() inerfaces set the result of
the application defined function to be a BLOB containing all zero
bytes and N bytes in size, where N is the value of the 2nd parameter.</p>

<p> The sqlite3_result_double() interface sets the result from
an application defined function to be a floating point value specified
by its 2nd argument.</p>

<p> The sqlite3_result_error() and sqlite3_result_error16() functions
cause the implemented SQL function to throw an exception.
 SQLite uses the string pointed to by the
2nd parameter of sqlite3_result_error() or sqlite3_result_error16()
as the text of an error message. SQLite interprets the error
message string from sqlite3_result_error() as UTF8. SQLite
interprets the string from sqlite3_result_error16() as UTF16 in native
byte order. If the third parameter to sqlite3_result_error()
or sqlite3_result_error16() is negative then SQLite takes as the error
message all text up through the first zero character.
 If the third parameter to sqlite3_result_error() or
sqlite3_result_error16() is non-negative then SQLite takes that many
bytes (not characters) from the 2nd parameter as the error message.
 The sqlite3_result_error() and sqlite3_result_error16()
routines make a copy private copy of the error message text before
they return. Hence, the calling function can deallocate or
modify the text after they return without harm.
The sqlite3_result_error_code() function changes the error code
returned by SQLite as a result of an error in a function.  By default,
the error code is SQLITE_ERROR.</p>

<p> The sqlite3_result_toobig() interface causes SQLite
to throw an error indicating that a string or BLOB is to long
to represent. The sqlite3_result_nomem() interface
causes SQLite to throw an exception indicating that the a
memory allocation failed.</p>

<p> The sqlite3_result_int() interface sets the return value
of the application-defined function to be the 32-bit signed integer
value given in the 2nd argument.
 The sqlite3_result_int64() interface sets the return value
of the application-defined function to be the 64-bit signed integer
value given in the 2nd argument.</p>

<p> The sqlite3_result_null() interface sets the return value
of the application-defined function to be NULL.</p>

<p> The sqlite3_result_text(), sqlite3_result_text16(),
sqlite3_result_text16le(), and sqlite3_result_text16be() interfaces
set the return value of the application-defined function to be
a text string which is represented as UTF-8, UTF-16 native byte order,
UTF-16 little endian, or UTF-16 big endian, respectively.
 SQLite takes the text result from the application from
the 2nd parameter of the sqlite3_result_text* interfaces.
 If the 3rd parameter to the sqlite3_result_text* interfaces
is negative, then SQLite takes result text from the 2nd parameter
through the first zero character.
 If the 3rd parameter to the sqlite3_result_text* interfaces
is non-negative, then as many bytes (not characters) of the text
pointed to by the 2nd parameter are taken as the application-defined
function result.
 If the 4th parameter to the sqlite3_result_text* interfaces
or sqlite3_result_blob is a non-NULL pointer, then SQLite calls that
function as the destructor on the text or blob result when it has
finished using that result.
 If the 4th parameter to the sqlite3_result_text* interfaces
or sqlite3_result_blob is the special constant SQLITE_STATIC, then
SQLite assumes that the text or blob result is constant space and
does not copy the space or call a destructor when it has
finished using that result.
 If the 4th parameter to the sqlite3_result_text* interfaces
or sqlite3_result_blob is the special constant SQLITE_TRANSIENT
then SQLite makes a copy of the result into space obtained from
from 
<a href="#sqlite3_free">sqlite3_malloc()</a> before it returns.</p>

<p> The sqlite3_result_value() interface sets the result of
the application-defined function to be a copy the 
<a href="#sqlite3_value">sqlite3_value</a>
object specified by the 2nd parameter. The
sqlite3_result_value() interface makes a copy of the 
<a href="#sqlite3_value">sqlite3_value</a>
so that 
<a href="#sqlite3_value">sqlite3_value</a> specified in the parameter may change or
be deallocated after sqlite3_result_value() returns without harm.</p>

<p> These routines are called from within the different thread
than the one containing the application-defined function that recieved
the 
<a href="#sqlite3_context">sqlite3_context</a> pointer, the results are undefined.
</p>
<hr>
<a name="sqlite3_value_blob"></a>
<h2>Obtaining SQL Function Parameter Values</h2>
<blockquote><pre>
const void *sqlite3_value_blob(sqlite3_value*);
int sqlite3_value_bytes(sqlite3_value*);
int sqlite3_value_bytes16(sqlite3_value*);
double sqlite3_value_double(sqlite3_value*);
int sqlite3_value_int(sqlite3_value*);
sqlite3_int64 sqlite3_value_int64(sqlite3_value*);
const unsigned char *sqlite3_value_text(sqlite3_value*);
const void *sqlite3_value_text16(sqlite3_value*);
const void *sqlite3_value_text16le(sqlite3_value*);
const void *sqlite3_value_text16be(sqlite3_value*);
int sqlite3_value_type(sqlite3_value*);
int sqlite3_value_numeric_type(sqlite3_value*);

</pre></blockquote>
<p>
The C-language implementation of SQL functions and aggregates uses
this set of interface routines to access the parameter values on
the function or aggregate.</p>

<p>The xFunc (for scalar functions) or xStep (for aggregates) parameters
to 
<a href="#sqlite3_create_function">sqlite3_create_function()</a> and 
<a href="#sqlite3_create_function">sqlite3_create_function16()</a>
define callbacks that implement the SQL functions and aggregates.
The 4th parameter to these callbacks is an array of pointers to

<a href="#sqlite3_value">sqlite3_value</a> objects.  There is one 
<a href="#sqlite3_value">sqlite3_value</a> object for
each parameter to the SQL function.  These routines are used to
extract values from the 
<a href="#sqlite3_value">sqlite3_value</a> objects.</p>

<p>These routines work just like the corresponding

<a href="#sqlite3_column_blob">sqlite3_column_* routines</a> except that
these routines take a single 
<a href="#sqlite3_value">sqlite3_value*</a> pointer instead
of an 
<a href="#sqlite3_stmt">sqlite3_stmt*</a> pointer and an integer column number.</p>

<p>The sqlite3_value_text16() interface extracts a UTF16 string
in the native byte-order of the host machine.  The
sqlite3_value_text16be() and sqlite3_value_text16le() interfaces
extract UTF16 strings as big-endian and little-endian respectively.</p>

<p>The sqlite3_value_numeric_type() interface attempts to apply
numeric affinity to the value.  This means that an attempt is
made to convert the value to an integer or floating point.  If
such a conversion is possible without loss of information (in other
words if the value is a string that looks like a number)
then the conversion is done.  Otherwise no conversion occurs.  The

<a href="#SQLITE_BLOB">datatype</a> after conversion is returned.</p>

<p>Please pay particular attention to the fact that the pointer that
is returned from 
<a href="#sqlite3_value_blob">sqlite3_value_blob()</a>, 
<a href="#sqlite3_value_blob">sqlite3_value_text()</a>, or

<a href="#sqlite3_value_blob">sqlite3_value_text16()</a> can be invalidated by a subsequent call to

<a href="#sqlite3_value_blob">sqlite3_value_bytes()</a>, 
<a href="#sqlite3_value_blob">sqlite3_value_bytes16()</a>, 
<a href="#sqlite3_value_blob">sqlite3_value_text()</a>,
or 
<a href="#sqlite3_value_blob">sqlite3_value_text16()</a>.</p>

<p>These routines must be called from the same thread as
the SQL function that supplied the sqlite3_value* parameters.
Or, if the sqlite3_value* argument comes from the 
<a href="#sqlite3_column_blob">sqlite3_column_value()</a>
interface, then these routines should be called from the same thread
that ran 
<a href="#sqlite3_column_blob">sqlite3_column_value()</a>.</p>

<p></p>
<hr>
<a name="sqlite3_vfs_find"></a>
<h2>Virtual File System Objects</h2>
<blockquote><pre>
sqlite3_vfs *sqlite3_vfs_find(const char *zVfsName);
int sqlite3_vfs_register(sqlite3_vfs*, int makeDflt);
int sqlite3_vfs_unregister(sqlite3_vfs*);

</pre></blockquote>
<p>
A virtual filesystem (VFS) is an 
<a href="#sqlite3_vfs">sqlite3_vfs</a> object
that SQLite uses to interact
with the underlying operating system.  Most builds come with a
single default VFS that is appropriate for the host computer.
New VFSes can be registered and existing VFSes can be unregistered.
The following interfaces are provided.</p>

<p> The sqlite3_vfs_find() interface returns a pointer to
a VFS given its name. Names are case sensitive.
 Names are zero-terminated UTF-8 strings.
 If there is no match, a NULL
pointer is returned. If zVfsName is NULL then the default
VFS is returned.</p>

<p> New VFSes are registered with sqlite3_vfs_register().
 Each new VFS becomes the default VFS if the makeDflt flag is set.
 The same VFS can be registered multiple times without injury.
 To make an existing VFS into the default VFS, register it again
with the makeDflt flag set. If two different VFSes with the
same name are registered, the behavior is undefined. If a
VFS is registered with a name that is NULL or an empty string,
then the behavior is undefined.</p>

<p> Unregister a VFS with the sqlite3_vfs_unregister() interface.
 If the default VFS is unregistered, another VFS is chosen as
the default.  The choice for the new VFS is arbitrary.
</p>
<hr>
<a name="sqlite3_create_function"></a>
<h2>Create Or Redefine SQL Functions</h2>
<blockquote><pre>
int sqlite3_create_function(
  sqlite3 *db,
  const char *zFunctionName,
  int nArg,
  int eTextRep,
  void *pApp,
  void (*xFunc)(sqlite3_context*,int,sqlite3_value**),
  void (*xStep)(sqlite3_context*,int,sqlite3_value**),
  void (*xFinal)(sqlite3_context*)
);
int sqlite3_create_function16(
  sqlite3 *db,
  const void *zFunctionName,
  int nArg,
  int eTextRep,
  void *pApp,
  void (*xFunc)(sqlite3_context*,int,sqlite3_value**),
  void (*xStep)(sqlite3_context*,int,sqlite3_value**),
  void (*xFinal)(sqlite3_context*)
);

</pre></blockquote>
<p>
These two functions (collectively known as
"function creation routines") are used to add SQL functions or aggregates
or to redefine the behavior of existing SQL functions or aggregates.  The
difference only between the two is that the second parameter, the
name of the (scalar) function or aggregate, is encoded in UTF-8 for
sqlite3_create_function() and UTF-16 for sqlite3_create_function16().</p>

<p>The first argument is the 
<a href="#sqlite3">database connection</a> that holds the
SQL function or aggregate is to be added or redefined. If a single
program uses more than one database handle internally, then SQL
functions or aggregates must be added individually to each database
handle with which they will be used.</p>

<p>The second parameter is the name of the SQL function to be created
or redefined.
The length of the name is limited to 255 bytes, exclusive of the
zero-terminator.  Note that the name length limit is in bytes, not
characters.  Any attempt to create a function with a longer name
will result in an SQLITE_ERROR error.</p>

<p>The third parameter is the number of arguments that the SQL function or
aggregate takes. If this parameter is negative, then the SQL function or
aggregate may take any number of arguments.</p>

<p>The fourth parameter, eTextRep, specifies what

<a href="#SQLITE_ANY">text encoding</a> this SQL function prefers for
its parameters.  Any SQL function implementation should be able to work
work with UTF-8, UTF-16le, or UTF-16be.  But some implementations may be
more efficient with one encoding than another.  It is allowed to
invoke sqlite3_create_function() or sqlite3_create_function16() multiple
times with the same function but with different values of eTextRep.
When multiple implementations of the same function are available, SQLite
will pick the one that involves the least amount of data conversion.
If there is only a single implementation which does not care what
text encoding is used, then the fourth argument should be

<a href="#SQLITE_ANY">SQLITE_ANY</a>.</p>

<p>The fifth parameter is an arbitrary pointer.  The implementation
of the function can gain access to this pointer using

<a href="#sqlite3_user_data">sqlite3_user_data()</a>.</p>

<p>The seventh, eighth and ninth parameters, xFunc, xStep and xFinal, are
pointers to C-language functions that implement the SQL
function or aggregate. A scalar SQL function requires an implementation of
the xFunc callback only, NULL pointers should be passed as the xStep
and xFinal parameters. An aggregate SQL function requires an implementation
of xStep and xFinal and NULL should be passed for xFunc. To delete an
existing SQL function or aggregate, pass NULL for all three function
callback.</p>

<p>It is permitted to register multiple implementations of the same
functions with the same name but with either differing numbers of
arguments or differing perferred text encodings.  SQLite will use
the implementation most closely matches the way in which the
SQL function is used.</p>

<p><h3>Invariants:</h3>
<table border="0" cellpadding="5" cellspacing="0">
<tr><td valign="top">F16103</td> 
<td valign="top">
The 
<a href="#sqlite3_create_function">sqlite3_create_function16()</a> interface behaves exactly
like 
<a href="#sqlite3_create_function">sqlite3_create_function()</a> in every way except that it
interprets the zFunctionName argument as
zero-terminated UTF-16 native byte order instead of as a
zero-terminated UTF-8.</p>

<p></td></tr>
</table>
</p>
<hr>


<hr><small<i>
This page last modified 2008/01/31 20:37:13 UTC
</i></small></div></body></html>
